<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ObservableEquivocation.v</title><meta charset="utf-8"><meta content="Alectryon v1.0" name="generator"><link href="alectryon.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script><style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-centered alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc alectryon-coqdoc"><div class="alectryon-header">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running <a href="https://coq.inria.fr/">Coq</a>+<a href="https://github.com/ejgallego/coq-serapi">SerAPI</a> v8.12.0+0.12.0. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> List ListSet FinFun
  Reals.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Import</span> ListNotations.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">From</span> CasperCBC
  <span class="kn">Require Import</span>
    Preamble ListExtras ListSetExtras
    Lib.Classes
    CBC.Common CBC.Equivocation
    VLSM.Common VLSM.Composition VLSM.Equivocation
    VLSM.ProjectionTraces
    .</span></span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Observable equivocation</h1>
<div class="paragraph"> </div>

In this section we define a notion of equivocation based on observations.

<div class="paragraph"> </div>

This approach is based on the intuition that a participant to the protocol
stores in its state knowledge about validators, obtained either directly or
through third parties.

<div class="paragraph"> </div>

We will consider this items of knowledge to be abstract objects of a
type <tt>event</tt>.
The <tt>event</tt> type is equiped with a decidable relation <span class="inlinecode"><span class="id" title="var">happens_before</span></span> which should tell
whether an event was generated befor another.

<div class="paragraph"> </div>

We assume that all events for a given validator must be comparable through
<span class="inlinecode"><span class="id" title="var">happens_before</span></span>. Under this assumption, if there are events for the same
validator which are not comparable through <span class="inlinecode"><span class="id" title="var">happens_before</span></span>, this constitutes
an <span class="inlinecode"><span class="id" title="var">equivocation_evidence</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">observation_based_equivocation_evidence</span>
  (<span class="nv">state</span> <span class="nv">validator</span> <span class="nv">event</span> : <span class="kt">Type</span>)
  (<span class="nv">event_eq</span> : EqDecision event)
  (<span class="nv">happens_before</span> : event -&gt; event -&gt; <span class="kt">Prop</span>)
  (<span class="nv">happens_before_dec</span> : RelDecision happens_before) :=
  {
    observable_events : state -&gt; validator -&gt; <span class="nb">set</span> event;
    equivocation_evidence (s : state) (v : validator) : <span class="kt">Prop</span> :=
      <span class="kr">exists</span> <span class="nv">e1</span>, In e1 (observable_events s v) /\
      <span class="kr">exists</span> <span class="nv">e2</span>, In e2 (observable_events s v) /\
        ~ comparable happens_before e1 e2
  }.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">iff_dec</span> {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Prop</span>}:
  P &lt;-&gt; Q -&gt; Decision P -&gt; Decision Q.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">P, Q</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">P &lt;-&gt; Q -&gt; Decision P -&gt; Decision Q</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">P, Q</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">P &lt;-&gt; Q -&gt; Decision P -&gt; Decision Q</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">ex_out</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">P</span> : <span class="kt">Prop</span>) (<span class="nv">Q</span> : A -&gt; <span class="kt">Prop</span>):
  (<span class="kr">exists</span> <span class="nv">x</span>, P /\ Q x) &lt;-&gt; (P /\ <span class="kr">exists</span> <span class="nv">x</span>, Q x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">exists</span> <span class="nv">x</span> : A, P /\ Q x) &lt;-&gt; P /\ (<span class="kr">exists</span> <span class="nv">x</span> : A, Q x)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">exists</span> <span class="nv">x</span> : A, P /\ Q x) &lt;-&gt; P /\ (<span class="kr">exists</span> <span class="nv">x</span> : A, Q x)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4"><span class="highlight"><span class="kn">Instance</span> <span class="nf">equivocation_evidence_dec</span> {<span class="nv">state</span> <span class="nv">validator</span> <span class="nv">event</span>:<span class="kt">Type</span>}
      `{Hevidence: observation_based_equivocation_evidence state validator event}:
      RelDecision equivocation_evidence.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">RelDecision equivocation_evidence</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">RelDecision equivocation_evidence</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6"><span class="highlight"><span class="nb">intros</span> s v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (equivocation_evidence s v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk7"><span class="highlight"><span class="nb">assert</span> (Exists (<span class="kr">fun</span> <span class="nv">e1</span> =&gt; Exists (<span class="kr">fun</span> <span class="nv">e2</span> =&gt; ~ comparable happens_before e1 e2)
                                   (observable_events s v)) (observable_events s v)
          &lt;-&gt; equivocation_evidence s v).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">e1</span> : event =&gt;
   Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before e1 e2)
     (observable_events s v)) (observable_events s v) &lt;-&gt;
equivocation_evidence s v</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk8" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">e1</span> : event =&gt;
   Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before e1 e2)
     (observable_events s v))
  (observable_events s v) &lt;-&gt;
equivocation_evidence s v</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk8"><hr></label><div class="goal-conclusion"><span class="highlight">Decision (equivocation_evidence s v)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk9"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">e1</span> : event =&gt;
   Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before e1 e2)
     (observable_events s v)) (observable_events s v) &lt;-&gt;
equivocation_evidence s v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka"><span class="highlight"><span class="nb">unfold</span> equivocation_evidence.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">e1</span> : event =&gt;
   Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before e1 e2)
     (observable_events s v)) (observable_events s v) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">e1</span> : event,
   In e1 (observable_events s v) /\
   (<span class="kr">exists</span> <span class="nv">e2</span> : event,
      In e2 (observable_events s v) /\
      ~ comparable happens_before e1 e2))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb"><span class="highlight"><span class="nb">rewrite</span> Exists_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">exists</span> <span class="nv">x</span> : event,
   In x (observable_events s v) /\
   Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before x e2)
     (observable_events s v)) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">e1</span> : event,
   In e1 (observable_events s v) /\
   (<span class="kr">exists</span> <span class="nv">e2</span> : event,
      In e2 (observable_events s v) /\
      ~ comparable happens_before e1 e2))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc"><span class="highlight"><span class="nb">apply</span> Morphisms_Prop.ex_iff_morphism; <span class="nb">intro</span> e1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e1 (observable_events s v) /\
Exists
  (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt; ~ comparable happens_before e1 e2)
  (observable_events s v) &lt;-&gt;
In e1 (observable_events s v) /\
(<span class="kr">exists</span> <span class="nv">e2</span> : event,
   In e2 (observable_events s v) /\
   ~ comparable happens_before e1 e2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd"><span class="highlight"><span class="nb">apply</span> and_iff_compat_l.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt; ~ comparable happens_before e1 e2)
  (observable_events s v) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">e2</span> : event,
   In e2 (observable_events s v) /\
   ~ comparable happens_before e1 e2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke"><span class="highlight"><span class="nb">rewrite</span> Exists_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">exists</span> <span class="nv">x</span> : event,
   In x (observable_events s v) /\
   ~ comparable happens_before e1 x) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">e2</span> : event,
   In e2 (observable_events s v) /\
   ~ comparable happens_before e1 e2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf"><span class="highlight"><span class="nb">apply</span> Morphisms_Prop.ex_iff_morphism; <span class="nb">intro</span> e2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e2 (observable_events s v) /\
~ comparable happens_before e1 e2 &lt;-&gt;
In e2 (observable_events s v) /\
~ comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk10" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk10"><span class="highlight"><span class="nb">apply</span> and_iff_compat_l.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ comparable happens_before e1 e2 &lt;-&gt;
~ comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">e1</span> : event =&gt;
   Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before e1 e2)
     (observable_events s v))
  (observable_events s v) &lt;-&gt;
equivocation_evidence s v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (equivocation_evidence s v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12"><span class="highlight"><span class="nb">apply</span> (iff_dec H);<span class="nb">clear</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision
  (Exists
     (<span class="kr">fun</span> <span class="nv">e1</span> : event =&gt;
      Exists
        (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
         ~ comparable happens_before e1 e2)
        (observable_events s v))
     (observable_events s v))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13"><span class="highlight"><span class="nb">apply</span> @Exists_dec;<span class="nb">intro</span> e1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision
  (Exists
     (<span class="kr">fun</span> <span class="nv">e2</span> : event =&gt;
      ~ comparable happens_before e1 e2)
     (observable_events s v))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14"><span class="highlight"><span class="nb">apply</span> @Exists_dec;<span class="nb">intro</span> e2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">event_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event event_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (~ comparable happens_before e1 e2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">destruct</span> (decide (comparable happens_before e1 e2)); [<span class="nb">right</span>|<span class="nb">left</span>]; <span class="bp">tauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
We can use this notion of <span class="inlinecode"><span class="id" title="var">observation_based_equivocation_evidence</span></span>
 to obtain the <span class="inlinecode"><span class="id" title="var">basic_equivocation</span></span> between states and validators.
 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">basic_observable_equivocation</span>
  (<span class="nv">state</span> <span class="nv">validator</span> <span class="nv">event</span> : <span class="kt">Type</span>)
  {<span class="nv">event_eq</span>: EqDecision event}
  (<span class="nv">happens_before</span> : event -&gt; event -&gt; <span class="kt">Prop</span>)
  {<span class="nv">happens_before_dec</span> : RelDecision happens_before}
  {<span class="nv">Hevidence</span> : observation_based_equivocation_evidence state validator event event_eq happens_before happens_before_dec}
  {<span class="nv">measurable_V</span> : Measurable validator}
  {<span class="nv">reachable_threshold</span> : ReachableThreshold validator}
  (<span class="nv">validators</span> : state -&gt; <span class="nb">set</span> validator)
  (<span class="nv">validators_nodup</span> : <span class="kr">forall</span> (<span class="nv">s</span> : state), NoDup (validators s))
  : basic_equivocation state validator
  := {|
    is_equivocating_fn := <span class="kr">fun</span> <span class="nv">s</span> <span class="nv">v</span> =&gt; @bool_decide _ (equivocation_evidence_dec s v);
    state_validators := validators;
    state_validators_nodup := validators_nodup
         |}.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">not_heavy_incl</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  (<span class="nv">state</span> <span class="nv">validator</span> <span class="nv">event</span> : <span class="kt">Type</span>)
  `{EqDecision event}
  (v_eq : EqDecision validator)
  {happens_before : event -&gt; event -&gt; <span class="kt">Prop</span>}
  {happens_before_dec : RelDecision happens_before}
  {Hevidence : observation_based_equivocation_evidence state validator event decide_eq happens_before happens_before_dec}
  {measurable_V : Measurable validator}
  {reachable_threshold : ReachableThreshold validator}
  (validators : state -&gt; <span class="nb">set</span> validator)
  (validators_nodup : <span class="kr">forall</span> (<span class="nv">s</span> : state), NoDup (validators s))
  (basic_eqv := basic_observable_equivocation state validator event happens_before validators validators_nodup)
  .</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Existing Instance</span> <span class="nf">basic_eqv</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocation_fault_incl</span>
  (<span class="nv">sigma</span> <span class="nv">sigma&#39;</span> : state)
  (<span class="nv">Hincl_validators</span> : incl (validators sigma) (validators sigma&#39;))
  (<span class="nv">Hincl</span> : <span class="kr">forall</span> <span class="nv">v</span> : validator, incl (observable_events sigma v) (observable_events sigma&#39; v))
  : (equivocation_fault sigma &lt;= equivocation_fault sigma&#39;)%R.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(equivocation_fault sigma &lt;= equivocation_fault sigma&#39;)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(equivocation_fault sigma &lt;= equivocation_fault sigma&#39;)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk17" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk17"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(equivocation_fault sigma &lt;= equivocation_fault sigma&#39;)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18"><span class="highlight"><span class="nb">unfold</span> equivocation_fault.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights (equivocating_validators sigma) &lt;=
 sum_weights (equivocating_validators sigma&#39;))%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19"><span class="highlight"><span class="nb">unfold</span> equivocating_validators.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter (is_equivocating_fn sigma)
      (state_validators sigma)) &lt;=
 sum_weights
   (filter (is_equivocating_fn sigma&#39;)
      (state_validators sigma&#39;)))%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a"><span class="highlight"><span class="nb">apply</span> sum_weights_incl; <span class="kp">try</span> (<span class="nb">apply</span> NoDup_filter; <span class="nb">apply</span> state_validators_nodup).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">incl
  (filter (is_equivocating_fn sigma)
     (state_validators sigma))
  (filter (is_equivocating_fn sigma&#39;)
     (state_validators sigma&#39;))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b"><span class="highlight"><span class="nb">apply</span> incl_tran <span class="kr">with</span> (filter (is_equivocating_fn sigma&#39;) (state_validators sigma))
  ; <span class="kp">try</span> (<span class="nb">apply</span> filter_incl; <span class="bp">assumption</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">incl
  (filter (is_equivocating_fn sigma)
     (state_validators sigma))
  (filter (is_equivocating_fn sigma&#39;)
     (state_validators sigma))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1c"><span class="highlight"><span class="nb">apply</span> filter_incl_fn.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a</span> : validator,
is_equivocating_fn sigma a = true -&gt;
is_equivocating_fn sigma&#39; a = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1d"><span class="highlight"><span class="nb">intro</span> v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">is_equivocating_fn sigma v = true -&gt;
is_equivocating_fn sigma&#39; v = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1e"><span class="highlight">spec Hincl v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">is_equivocating_fn sigma v = true -&gt;
is_equivocating_fn sigma&#39; v = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1f"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool_decide (equivocation_evidence sigma v) = true -&gt;
bool_decide (equivocation_evidence sigma&#39; v) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk20" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk20"><span class="highlight"><span class="nb">unfold</span> equivocation_evidence.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool_decide
  (<span class="kr">exists</span> <span class="nv">e1</span> : event,
     In e1 (observable_events sigma v) /\
     (<span class="kr">exists</span> <span class="nv">e2</span> : event,
        In e2 (observable_events sigma v) /\
        ~ comparable happens_before e1 e2)) = true -&gt;
bool_decide
  (<span class="kr">exists</span> <span class="nv">e1</span> : event,
     In e1 (observable_events sigma&#39; v) /\
     (<span class="kr">exists</span> <span class="nv">e2</span> : event,
        In e2 (observable_events sigma&#39; v) /\
        ~ comparable happens_before e1 e2)) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk21" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk21"><span class="highlight"><span class="kp">repeat</span> <span class="nb">rewrite</span> bool_decide_eq_true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">exists</span> <span class="nv">e1</span> : event,
   In e1 (observable_events sigma v) /\
   (<span class="kr">exists</span> <span class="nv">e2</span> : event,
      In e2 (observable_events sigma v) /\
      ~ comparable happens_before e1 e2)) -&gt;
<span class="kr">exists</span> <span class="nv">e1</span> : event,
  In e1 (observable_events sigma&#39; v) /\
  (<span class="kr">exists</span> <span class="nv">e2</span> : event,
     In e2 (observable_events sigma&#39; v) /\
     ~ comparable happens_before e1 e2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">clear</span> -Hincl;<span class="nb">firstorder</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* If a state is not overweight, none of its subsets are *)</span>
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk22" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk22"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">not_heavy_incl</span>
  (<span class="nv">sigma</span> <span class="nv">sigma&#39;</span> : state)
  (<span class="nv">Hincl_validators</span> : incl (validators sigma) (validators sigma&#39;))
  (<span class="nv">Hincl</span> : <span class="kr">forall</span> <span class="nv">v</span> : validator, incl (observable_events sigma v) (observable_events sigma&#39; v))
  (<span class="nv">Hsigma&#39;</span> : not_heavy sigma&#39;)
  : not_heavy sigma.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_heavy sigma&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_heavy sigma</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk23" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk23"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_heavy sigma&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_heavy sigma</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk24" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk24"><span class="highlight"><span class="nb">apply</span> Rle_trans <span class="kr">with</span> (equivocation_fault sigma&#39;); <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">state, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v_eq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observation_based_equivocation_evidence
  state validator event decide_eq
  happens_before happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">basic_eqv</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">basic_observable_equivocation state
  validator event happens_before validators
  validators_nodup</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">basic_equivocation state validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sigma, sigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl_validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl (validators sigma)
  (validators sigma&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">v</span> : validator,
incl (observable_events sigma v)
  (observable_events sigma&#39; v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsigma'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_heavy sigma&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(equivocation_fault sigma &lt;= equivocation_fault sigma&#39;)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> equivocation_fault_incl; <span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">not_heavy_incl</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">observable_equivocation_in_composition</span>.</span></span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Observable messages in a VLSM composition</h2>
<div class="paragraph"> </div>

We assume a composition of <span class="inlinecode"><span class="id" title="var">VLSM</span></span>s where each machine has a way to
produce <span class="inlinecode"><span class="id" title="var">observation_based_equivocation_evidence</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">message</span> <span class="nv">validator</span> <span class="nv">event</span> : <span class="kt">Type</span>}
  `{EqDecision event}
  {happens_before: event -&gt; event -&gt; <span class="kt">Prop</span>}
  {happens_before_dec: RelDecision happens_before}
  {index : <span class="kt">Type</span>}
  `{EqDecision index}
  (index_listing : list index)
  (finite_index : Listing index_listing)
  (IM : index -&gt; VLSM message)
  (Hevidence : <span class="kr">forall</span> (<span class="nv">i</span> : index),
    observation_based_equivocation_evidence
        (vstate (IM i)) validator event decide_eq happens_before happens_before_dec
  )
  (i0 : index)
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (X := composite_vlsm IM i0 constraint)
  (PreX := pre_loaded_with_all_messages_vlsm X)
  .</span></span></span></pre><div class="doc">
It is easy to define a <span class="inlinecode"><span class="id" title="var">observation_based_equivocation_evidence</span></span> mechanism for
the composition, by just defining the <span class="inlinecode"><span class="id" title="var">observable_events</span></span> for the composite state
to be the union of <span class="inlinecode"><span class="id" title="var">observable_events</span></span> for each of the component states.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composed_observable_events</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">v</span> : validator)
  : <span class="nb">set</span> event
  :=
  fold_right (set_union decide_eq) [] (map (<span class="kr">fun</span> <span class="nv">i</span> =&gt; observable_events (s i) v) index_listing).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composed_observation_based_equivocation_evidence</span>
  : observation_based_equivocation_evidence (composite_state IM) validator event decide_eq happens_before happens_before_dec
  :=
  {| observable_events := composed_observable_events |}.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Existing Instance</span> <span class="nf">composed_observation_based_equivocation_evidence</span>.</span></span></span></pre><div class="doc">
Let us now factor <span class="inlinecode"><span class="id" title="var">VLSM</span></span>s into the event observability framework.

<div class="paragraph"> </div>
<span class="inlinecode"><span class="id" title="var">message_observable_events</span></span> can be extracted from any message.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">composite_vlsm_observable_messages</span>
  :=
  {
<span class="sd">(**</span>
<span class="sd">To simplify the presentation, we assume that no events can be observed in</span>
<span class="sd">initial states.</span>
<span class="sd">*)</span>
    no_events_in_initial_state
      (s : state)
      (His : vinitial_state_prop X s)
      (v : validator)
      : observable_events s v = [];

<span class="sd">(**</span>
<span class="sd">We assume that machines communicate through messages,</span>
<span class="sd">and that messages can carry some of the information of their originating</span>
<span class="sd">states.</span>

<span class="sd">To formalize that, we willl assume a function [message_observable_events]</span>
<span class="sd">yielding the events which can be observed in a message for a validator,</span>
<span class="sd">and we will require that we cannot observe in a sent message events which</span>
<span class="sd">were not available in the transition that generated it</span>
<span class="sd">([message_observable_consistency]).</span>
<span class="sd">*)</span>
    message_observable_events : message -&gt; validator -&gt; <span class="nb">set</span> event;
    message_observable_consistency
      (m : message)
      (v : validator)
      (som : state * option message)
      (l : label)
      (s : state)
      (Ht : protocol_transition X l som (s, Some m))
      : incl (message_observable_events m v) (observable_events (s (projT1 l)) v);
  }.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">Hcomposite</span> : composite_vlsm_observable_messages}
  `{EqDecision message}
  .</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">option_message_observable_events</span>
  (<span class="nv">om</span> : option message)
  (<span class="nv">v</span> : validator)
  : <span class="nb">set</span> event
  :=
  <span class="kr">match</span> om <span class="kr">with</span>
  | Some m =&gt; message_observable_events m v
  | None =&gt; []
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
An useful result, corollary of the abstract <span class="inlinecode"><span class="id" title="var">existsb_first</span></span> says that if
an event is observed into the final state of a trace, there must be a
prefix of the trace with the same property and no prior observation of
the event.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk25" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk25"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">in_observable_events_first</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list (vtransition_item X))
  (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination tr) <span class="kr">is</span>)
  (<span class="nv">He</span> : In e (observable_events s v))
  : <span class="kr">exists</span>
    (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item)
    (<span class="nv">item</span> : transition_item)
    (<span class="nv">Heq</span> : tr = pre ++ [item] ++ suf)
    (<span class="nv">He&#39;</span> : In e (observable_events (destination item) v)),
    Forall (<span class="kr">fun</span> <span class="nv">item</span> =&gt; ~In e (observable_events (destination item) v)) pre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk26" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk26"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk27" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk27"><span class="highlight"><span class="nb">assert</span> (Htr0 : tr = [] \/ tr &lt;&gt; [])
    <span class="bp">by</span> (<span class="nb">destruct</span> tr; (<span class="nb">left</span>; <span class="bp">reflexivity</span>) || (<span class="nb">right</span>; <span class="nb">intro</span> contra; <span class="bp">discriminate</span> contra)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = [] \/ tr &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk28" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk28"><span class="highlight"><span class="nb">destruct</span> Htr0 <span class="kr">as</span> [Htr0 | Htr0].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk29" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk29"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) 
(<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) 
(<span class="nv">_</span> : In e (observable_events (destination item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2a"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2b"><span class="highlight"><span class="nb">subst</span> tr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination []) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : [] = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2c"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination []) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : [] = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2d"><span class="highlight"><span class="nb">specialize</span> (no_events_in_initial_state (<span class="nb">last</span> (map destination []) <span class="kr">is</span>) His v) <span class="kr">as</span> Hno.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination []) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events (<span class="nb">last</span> (map destination []) <span class="kr">is</span>)
  v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : [] = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2e"><span class="highlight"><span class="nb">replace</span>
      (observable_events (<span class="nb">last</span> (map destination []) <span class="kr">is</span>) v)
      <span class="kr">with</span> (@nil event) <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination []) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events (<span class="nb">last</span> (map destination []) <span class="kr">is</span>)
  v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : [] = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">inversion</span> He.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk2f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk2f"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk30" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk30"><span class="highlight"><span class="nb">destruct</span> (exists_last Htr0) <span class="kr">as</span> [l&#39; [a Heq]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk31" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk31"><span class="highlight"><span class="nb">specialize</span>
      (existsb_first tr (<span class="kr">fun</span> <span class="nv">item</span> =&gt; inb decide_eq e (observable_events (destination item) v)))
      <span class="kr">as</span> Hfirst.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk32" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk32"><span class="highlight">spec Hfirst.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v)) tr =
true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk33" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk33"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) 
(<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) 
(<span class="nv">_</span> : In e (observable_events (destination item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk34" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk34"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v)) tr =
true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk35" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk35"><span class="highlight"><span class="nb">apply</span> existsb_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : vtransition_item X,
  In x tr /\
  inb decide_eq e
    (observable_events (destination x) v) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk36" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk36"><span class="highlight"><span class="kr">exists</span> <span class="nv">a</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a tr /\
inb decide_eq e (observable_events (destination a) v) =
true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk37" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk37"><span class="highlight"><span class="nb">split</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a tr</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk38" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk38"><hr></label><div class="goal-conclusion"><span class="highlight">inb decide_eq e (observable_events (destination a) v) =
true</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk39" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk39"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a tr</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3a"><span class="highlight"><span class="nb">subst</span> tr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (l&#39; ++ [a])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">l&#39; ++ [a] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination (l&#39; ++ [a])) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  (l&#39; ++ [a]) = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  l&#39; ++ [a] = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a (l&#39; ++ [a])</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3b"><span class="highlight"><span class="nb">apply</span> in_app_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (l&#39; ++ [a])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">l&#39; ++ [a] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination (l&#39; ++ [a])) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  (l&#39; ++ [a]) = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  l&#39; ++ [a] = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a l&#39; \/ In a [a]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3c"><span class="highlight"><span class="nb">right</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (l&#39; ++ [a])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">l&#39; ++ [a] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination (l&#39; ++ [a])) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  (l&#39; ++ [a]) = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  l&#39; ++ [a] = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a [a]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3d"><span class="highlight"><span class="nb">left</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (l&#39; ++ [a])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">l&#39; ++ [a] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination (l&#39; ++ [a])) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  (l&#39; ++ [a]) = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  l&#39; ++ [a] = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">a = a</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3e"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">inb decide_eq e (observable_events (destination a) v) =
true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk3f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk3f"><span class="highlight"><span class="nb">apply</span> in_correct.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
    <span class="kp">first</span> = true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">        </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk40" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk40"><span class="highlight"><span class="nb">unfold</span> s <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk41" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk41"><span class="highlight"><span class="nb">clear</span> s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk42" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk42"><span class="highlight"><span class="nb">rewrite</span> Heq <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination (l&#39; ++ [a])) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">        </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk43" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk43"><span class="highlight"><span class="nb">rewrite</span> map_app <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span>
        (map destination l&#39; ++
         map destination [a]) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk44" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk44"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (composed_observable_events
     (<span class="nb">last</span>
        (map destination l&#39; ++ [destination a])
        <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk45" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk45"><span class="highlight"><span class="nb">rewrite</span> last_last <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (composed_observable_events (destination a) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  tr = true -&gt;
<span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination a) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">        </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk46" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk46"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list (vtransition_item X)) 
(<span class="nv">first</span> : vtransition_item X),
  inb decide_eq e
    (observable_events (destination <span class="kp">first</span>) v) =
  true /\
  tr = prefix ++ [<span class="kp">first</span>] ++ suffix /\
  existsb
    (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
     inb decide_eq e
       (observable_events 
          (destination item) v)) prefix =
  false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk47" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk47"><span class="highlight"><span class="nb">destruct</span> Hfirst <span class="kr">as</span> [pre [suf [a&#39; [He&#39; [Heq&#39; Hfirst]]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">inb decide_eq e
  (observable_events (destination a&#39;) v) = true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  pre = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk48" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk48"><span class="highlight"><span class="nb">apply</span> in_correct <span class="kr">in</span> He&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">item</span> : vtransition_item X =&gt;
   inb decide_eq e
     (observable_events (destination item) v))
  pre = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk49" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk49"><span class="highlight"><span class="nb">rewrite</span> existsb_forall <span class="kr">in</span> Hfirst.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4a"><span class="highlight"><span class="kr">exists</span> <span class="nv">pre</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">suf</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4b"><span class="highlight"><span class="kr">exists</span> <span class="nv">suf</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">item</span> : transition_item) (<span class="nv">_</span> : tr =
                                pre ++ [item] ++ suf) 
(<span class="nv">_</span> : In e (observable_events (destination item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~ In e (observable_events (destination item0) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4c"><span class="highlight"><span class="kr">exists</span> <span class="nv">a&#39;</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">_</span> : tr = pre ++ [a&#39;] ++ suf) (<span class="nv">_</span> : In e
                                       (observable_events
                                          (destination
                                             a&#39;) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
     ~ In e (observable_events (destination item) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4d"><span class="highlight"><span class="kr">exists</span> <span class="nv">Heq&#39;</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : In e (observable_events (destination a&#39;) v),
  Forall
    (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
     ~ In e (observable_events (destination item) v))
    pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4e"><span class="highlight"><span class="kr">exists</span> <span class="nv">He&#39;</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~ In e (observable_events (destination item) v))
  pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk4f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk4f"><span class="highlight"><span class="nb">apply</span> Forall_forall.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk50" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk50"><span class="highlight"><span class="nb">intros</span> x Hx.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : vtransition_item X,
In x pre -&gt;
inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In x pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In e (observable_events (destination x) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk51" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk51"><span class="highlight"><span class="nb">specialize</span> (Hfirst x Hx).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">inb decide_eq e
  (observable_events (destination x) v) =
false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In x pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In e (observable_events (destination x) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk52" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk52"><span class="highlight"><span class="nb">apply</span> in_correct&#39; <span class="kr">in</span> Hfirst.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = l&#39; ++ [a]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination a&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [a&#39;] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfirst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In x pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In e (observable_events (destination x) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Defining observable equivocation based on observable messages</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --></pre><div class="doc">
We call <span class="inlinecode"><span class="id" title="var">trace_generated_event</span></span> a new event for validator <tt>v</tt> which
appeared as result of a transition in a trace, that is, which it was
not in the state prior to the transition, nor in the received message,
but it is in the state resulted after the transition.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">trace_generated_event</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list (vtransition_item X))
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span>
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list transition_item)
  (<span class="nv">item</span> : transition_item)
  (<span class="nv">Heq</span> : tr = prefix ++ [item] ++ suffix)
  (<span class="nv">i</span> := projT1 (l item))
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination prefix) <span class="kr">is</span>)
  (<span class="nv">s&#39;</span> := destination item),
  In e
    (set_diff decide_eq
      (observable_events (s&#39; i) v)
      (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events (input item) v)
      )
    ).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">trace_generated_event_fn</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list (vtransition_item X))
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  : bool
  :=
  existsb
    (<span class="kr">fun</span> <span class="nv">t</span> : list (vtransition_item X) * vtransition_item X * list (vtransition_item X) =&gt;
      <span class="kr">match</span> t <span class="kr">with</span> (pre, item, _) =&gt;
        <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
          <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
          <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
          inb decide_eq e
            (set_diff decide_eq
              (observable_events (s&#39; i) v)
              (set_union decide_eq
                (observable_events (s i) v)
                (option_message_observable_events (input item) v)
              )
            )
      <span class="kr">end</span>
    )
    (one_element_decompositions tr).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk53" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk53"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">trace_generated_event_function</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list (vtransition_item X))
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  : trace_generated_event <span class="kr">is</span> tr v e &lt;-&gt;
  trace_generated_event_fn <span class="kr">is</span> tr v e = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e &lt;-&gt;
trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk54" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk54"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e &lt;-&gt;
trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk55" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk55"><span class="highlight"><span class="nb">split</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e -&gt;
trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk56" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk56"><hr></label><div class="goal-conclusion"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true -&gt;
trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk57" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk57"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e -&gt;
trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk58" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk58"><span class="highlight"><span class="nb">intros</span> [pre [suf [item [Heq Hin]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk59" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk59"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hin.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5a"><span class="highlight"><span class="nb">unfold</span> trace_generated_event_fn.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb
  (<span class="kr">fun</span>
     <span class="nv">t</span> : list (vtransition_item X) *
         vtransition_item X *
         list (vtransition_item X) =&gt;
   <span class="kr">let</span> (<span class="nv">p</span>, _) := t <span class="kr">in</span>
   <span class="kr">let</span> (<span class="nv">pre</span>, item) := p <span class="kr">in</span>
   inb decide_eq e
     (set_diff decide_eq
        (observable_events
           (destination item (projT1 (l item))) v)
        (set_union decide_eq
           (observable_events
              (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
                 (projT1 (l item))) v)
           (option_message_observable_events
              (input item) v))))
  (one_element_decompositions tr) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5b"><span class="highlight"><span class="nb">apply</span> existsb_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">x</span> : list (vtransition_item X) * vtransition_item X *
      list (vtransition_item X),
  In x (one_element_decompositions tr) /\
  (<span class="kr">let</span> (<span class="nv">p</span>, _) := x <span class="kr">in</span>
   <span class="kr">let</span> (<span class="nv">pre</span>, item) := p <span class="kr">in</span>
   inb decide_eq e
     (set_diff decide_eq
        (observable_events
           (destination item (projT1 (l item))) v)
        (set_union decide_eq
           (observable_events
              (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
                 (projT1 (l item))) v)
           (option_message_observable_events
              (input item) v)))) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5c"><span class="highlight"><span class="kr">exists</span> (<span class="nv">pre</span>, item, suf).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (pre, item, suf) (one_element_decompositions tr) /\
inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events (input item)
           v))) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5d"><span class="highlight"><span class="nb">symmetry in</span> Heq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre ++ [item] ++ suf = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (pre, item, suf) (one_element_decompositions tr) /\
inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events (input item)
           v))) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5e"><span class="highlight"><span class="nb">apply</span> in_one_element_decompositions_iff <span class="kr">in</span> Heq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (pre, item, suf)
  (one_element_decompositions tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (pre, item, suf) (one_element_decompositions tr) /\
inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events (input item)
           v))) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk5f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk5f"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (pre, item, suf)
  (one_element_decompositions tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events (input item)
           v))) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk60" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk60"><span class="highlight"><span class="nb">apply</span> in_correct.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (pre, item, suf)
  (one_element_decompositions tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events (input item)
           v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk61" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk61"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true -&gt;
trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk62" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk62"><span class="highlight"><span class="nb">intro</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk63" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk63"><span class="highlight"><span class="nb">apply</span> existsb_exists <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">x</span> : list (vtransition_item X) *
      vtransition_item X *
      list (vtransition_item X),
  In x (one_element_decompositions tr) /\
  (<span class="kr">let</span> (<span class="nv">p</span>, _) := x <span class="kr">in</span>
   <span class="kr">let</span> (<span class="nv">pre</span>, item) := p <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
   inb decide_eq e
     (set_diff decide_eq
        (observable_events (s&#39; i) v)
        (set_union decide_eq
           (observable_events (s i) v)
           (option_message_observable_events
              (input item) v)))) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk64" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk64"><span class="highlight"><span class="nb">destruct</span> H <span class="kr">as</span> [((pre, item), suf) [Hdec H]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (pre, item, suf)
  (one_element_decompositions tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
 inb decide_eq e
   (set_diff decide_eq
      (observable_events (s&#39; i) v)
      (set_union decide_eq
         (observable_events (s i) v)
         (option_message_observable_events
            (input item) v)))) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk65" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk65"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (pre, item, suf)
  (one_element_decompositions tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v))) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk66" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk66"><span class="highlight"><span class="nb">apply</span> in_correct <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (pre, item, suf)
  (one_element_decompositions tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk67" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk67"><span class="highlight"><span class="nb">apply</span> in_one_element_decompositions_iff <span class="kr">in</span> Hdec.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre ++ [item] ++ suf = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk68" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk68"><span class="highlight"><span class="nb">symmetry in</span> Hdec.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk69" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk69"><span class="highlight"><span class="kr">exists</span> <span class="nv">pre</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">suffix</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suffix),
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6a"><span class="highlight"><span class="kr">exists</span> <span class="nv">suf</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">item</span> : transition_item) (<span class="nv">_</span> : tr =
                                pre ++ [item] ++ suf),
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6b"><span class="highlight"><span class="kr">exists</span> <span class="nv">item</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">_</span> : tr = pre ++ [item] ++ suf,
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6c"><span class="highlight"><span class="kr">exists</span> <span class="nv">Hdec</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hdec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq (observable_events (s&#39; i) v)
     (set_union decide_eq (observable_events (s i) v)
        (option_message_observable_events (input item)
           v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
If an event is generated by a trace <tt>tr</tt>, then it's also generated by
any trace having <tt>tr</tt> as a prefix.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">trace_generated_prefix</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">pre</span> : list (vtransition_item X))
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  (<span class="nv">Hgen</span> : trace_generated_event <span class="kr">is</span> pre v e)
  (<span class="nv">suf</span> : list transition_item)
  : trace_generated_event <span class="kr">is</span> (pre ++ suf) v e.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> pre v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> pre v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk6f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk6f"><span class="highlight"><span class="nb">destruct</span> Hgen <span class="kr">as</span> [pre&#39; [suf&#39; [item [Heq Hgen]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = pre&#39; ++ [item] ++ suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk70" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk70"><span class="highlight"><span class="kr">exists</span> <span class="nv">pre&#39;</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = pre&#39; ++ [item] ++ suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">suffix</span> : list transition_item) (<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : pre ++ suf = pre&#39; ++ [item] ++ suffix),
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk71" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk71"><span class="highlight"><span class="kr">exists</span> (<span class="nv">suf&#39;</span> ++ suf).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = pre&#39; ++ [item] ++ suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">item</span> : transition_item) (<span class="nv">_</span> : pre ++ suf =
                                pre&#39; ++
                                [item] ++ suf&#39; ++ suf),
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk72" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk72"><span class="highlight"><span class="kr">exists</span> <span class="nv">item</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = pre&#39; ++ [item] ++ suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">_</span> : pre ++ suf = pre&#39; ++ [item] ++ suf&#39; ++ suf,
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk73" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk73"><span class="highlight"><span class="nb">subst</span> pre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : (pre&#39; ++ [item] ++ suf&#39;) ++ suf =
      pre&#39; ++ [item] ++ suf&#39; ++ suf,
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk74" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk74"><span class="highlight"><span class="kp">repeat</span> <span class="nb">rewrite</span> &lt;- app_assoc.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : pre&#39; ++ [item] ++ suf&#39; ++ suf =
      pre&#39; ++ [item] ++ suf&#39; ++ suf,
  <span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
  In e
    (set_diff decide_eq (observable_events (s&#39; i) v)
       (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events
             (input item) v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk75" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk75"><span class="highlight"><span class="kr">exists</span> <span class="nv">eq_refl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> := projT1 (l item) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s</span> := <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> := destination item <span class="kr">in</span>
In e
  (set_diff decide_eq (observable_events (s&#39; i) v)
     (set_union decide_eq (observable_events (s i) v)
        (option_message_observable_events (input item)
           v)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Conversely, if an event is not generated by a trace, then it's not
generated by any of its prefixes.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk76" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk76"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">not_trace_generated_prefix</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">pre</span> : list (vtransition_item X))
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  (<span class="nv">suf</span> : list transition_item)
  (<span class="nv">Hngen</span> : ~trace_generated_event <span class="kr">is</span> (pre ++ suf) v e)
  : ~trace_generated_event <span class="kr">is</span> pre v e.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hngen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ trace_generated_event <span class="kr">is</span> pre v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk77" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk77"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hngen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ trace_generated_event <span class="kr">is</span> pre v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk78" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk78"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hngen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> pre v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk79" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk79"><span class="highlight"><span class="nb">elim</span> Hngen.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hngen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> pre v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk7a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk7a"><span class="highlight"><span class="nb">apply</span> trace_generated_prefix.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hngen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ suf) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> pre v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> pre v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
An event which was not generated prior to reaching a trace, but it is
observable in its final state must come from the previous state or
the incoming message.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk7b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk7b"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">not_trace_generated_event</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list (vtransition_item X))
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  (<span class="nv">Hne</span> : ~trace_generated_event <span class="kr">is</span> tr v e)
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list transition_item)
  (<span class="nv">item</span> : transition_item)
  (<span class="nv">Heq</span> : tr = prefix ++ [item] ++ suffix)
  (<span class="nv">i</span> := projT1 (l item))
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination prefix) <span class="kr">is</span>)
  (<span class="nv">s&#39;</span> := destination item)
  (<span class="nv">Hin</span> : In e (observable_events (s&#39; i) v))
  : In e (observable_events (s i) v)
  \/ In e (option_message_observable_events (input item) v).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk7c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk7c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk7d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk7d"><span class="highlight"><span class="nb">destruct</span> (trace_generated_event_fn <span class="kr">is</span> tr v e) <span class="nb">eqn</span>:Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk7e" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = false</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk7e"><hr></label><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk7f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk7f"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk80" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk80"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk81" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk81"><span class="highlight"><span class="nb">elim</span> Hne.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk82" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk82"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk83" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk83"><span class="highlight"><span class="nb">unfold</span> trace_generated_event_fn <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existsb
  (<span class="kr">fun</span>
     <span class="nv">t</span> : list (vtransition_item X) *
         vtransition_item X *
         list (vtransition_item X) =&gt;
   <span class="kr">let</span> (<span class="nv">p</span>, _) := t <span class="kr">in</span>
   <span class="kr">let</span> (<span class="nv">pre</span>, item) := p <span class="kr">in</span>
   inb decide_eq e
     (set_diff decide_eq
        (observable_events
           (destination item (projT1 (l item)))
           v)
        (set_union decide_eq
           (observable_events
              (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
                 (projT1 (l item))) v)
           (option_message_observable_events
              (input item) v))))
  (one_element_decompositions tr) = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk84" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk84"><span class="highlight"><span class="nb">rewrite</span> existsb_forall <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">x</span> : list (vtransition_item X) *
      vtransition_item X *
      list (vtransition_item X),
In x (one_element_decompositions tr) -&gt;
(<span class="kr">let</span> (<span class="nv">p</span>, _) := x <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">pre</span>, item) := p <span class="kr">in</span>
 inb decide_eq e
   (set_diff decide_eq
      (observable_events
         (destination item (projT1 (l item))) v)
      (set_union decide_eq
         (observable_events
            (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
               (projT1 (l item))) v)
         (option_message_observable_events
            (input item) v)))) = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk85" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk85"><span class="highlight"><span class="nb">specialize</span> (Hne&#39; (prefix, item, suffix)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (prefix, item, suffix)
  (one_element_decompositions tr) -&gt;
(<span class="kr">let</span> (<span class="nv">p</span>, _) := (prefix, item, suffix) <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">pre</span>, item) := p <span class="kr">in</span>
 inb decide_eq e
   (set_diff decide_eq
      (observable_events
         (destination item (projT1 (l item))) v)
      (set_union decide_eq
         (observable_events
            (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
               (projT1 (l item))) v)
         (option_message_observable_events
            (input item) v)))) = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk86" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk86"><span class="highlight"><span class="nb">rewrite</span> in_one_element_decompositions_iff <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr -&gt;
inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v))) = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk87" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk87"><span class="highlight"><span class="nb">symmetry in</span> Heq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr -&gt;
inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v))) = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk88" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk88"><span class="highlight"><span class="nb">specialize</span> (Hne&#39; Heq).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">inb decide_eq e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v))) = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk89" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk89"><span class="highlight"><span class="nb">apply</span> in_correct&#39; <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (set_diff decide_eq
     (observable_events
        (destination item (projT1 (l item))) v)
     (set_union decide_eq
        (observable_events
           (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
              (projT1 (l item))) v)
        (option_message_observable_events
           (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk8a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk8a"><span class="highlight"><span class="nb">rewrite</span> set_diff_iff <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 ~
 In e
   (set_union decide_eq
      (observable_events
         (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
            (projT1 (l item))) v)
      (option_message_observable_events
         (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk8b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk8b"><span class="highlight"><span class="nb">rewrite</span> set_union_iff <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 ~
 (In e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v) \/
  In e
    (option_message_observable_events
       (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk8c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk8c"><span class="highlight"><span class="kp">repeat</span> <span class="nb">rewrite</span> in_correct <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(inb decide_eq e
   (observable_events
      (destination item (projT1 (l item))) v) =
 true /\
 ~
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v) = true \/
  inb decide_eq e
    (option_message_observable_events
       (input item) v) = true))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk8d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk8d"><span class="highlight"><span class="nb">rewrite</span> &lt;- in_correct <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 ~
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v) = true \/
  inb decide_eq e
    (option_message_observable_events
       (input item) v) = true))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk8e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk8e"><span class="highlight"><span class="nb">rewrite</span> &lt;- Bool.orb_true_iff <span class="kr">in</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v)
  || inb decide_eq e
       (option_message_observable_events
          (input item) v))%bool &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (s i) v) \/
In e (option_message_observable_events (input item) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk8f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk8f"><span class="highlight"><span class="kp">repeat</span> <span class="nb">rewrite</span> in_correct.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v)
  || inb decide_eq e
       (option_message_observable_events
          (input item) v))%bool &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">inb decide_eq e (observable_events (s i) v) = true \/
inb decide_eq e
  (option_message_observable_events (input item) v) =
true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk90" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk90"><span class="highlight"><span class="nb">rewrite</span> &lt;- Bool.orb_true_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v)
  || inb decide_eq e
       (option_message_observable_events
          (input item) v))%bool &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(inb decide_eq e (observable_events (s i) v)
 || inb decide_eq e
      (option_message_observable_events (input item) v))%bool =
true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk91" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk91"><span class="highlight"><span class="nb">unfold</span> s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v)
  || inb decide_eq e
       (option_message_observable_events
          (input item) v))%bool &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span> i) v)
 || inb decide_eq e
      (option_message_observable_events (input item) v))%bool =
true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk92" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk92"><span class="highlight"><span class="nb">unfold</span> s&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v)
  || inb decide_eq e
       (option_message_observable_events
          (input item) v))%bool &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span> i) v)
 || inb decide_eq e
      (option_message_observable_events (input item) v))%bool =
true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk93" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk93"><span class="highlight"><span class="nb">unfold</span> i.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 (inb decide_eq e
    (observable_events
       (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
          (projT1 (l item))) v)
  || inb decide_eq e
       (option_message_observable_events
          (input item) v))%bool &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
         (projT1 (l item))) v)
 || inb decide_eq e
      (option_message_observable_events (input item) v))%bool =
true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk94" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk94"><span class="highlight"><span class="nb">destruct</span>
      (inb decide_eq e
        (observable_events (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span> (projT1 (l item))) v)
      || inb decide_eq e (option_message_observable_events (input item) v)
      )%bool
      <span class="nb">eqn</span>:Hor; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
         (projT1 (l item))) v)
 || inb decide_eq e
      (option_message_observable_events
         (input item) v))%bool = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 false &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk95" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk95"><span class="highlight"><span class="nb">elim</span> Hne&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
         (projT1 (l item))) v)
 || inb decide_eq e
      (option_message_observable_events
         (input item) v))%bool = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 false &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events
     (destination item (projT1 (l item))) v) /\
false &lt;&gt; true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk96" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk96"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
         (projT1 (l item))) v)
 || inb decide_eq e
      (option_message_observable_events
         (input item) v))%bool = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 false &lt;&gt; true)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false &lt;&gt; true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk97" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk97"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">prefix ++ [item] ++ suffix = tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(inb decide_eq e
   (observable_events
      (<span class="nb">last</span> (map destination prefix) <span class="kr">is</span>
         (projT1 (l item))) v)
 || inb decide_eq e
      (option_message_observable_events
         (input item) v))%bool = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
(In e
   (observable_events
      (destination item (projT1 (l item))) v) /\
 false &lt;&gt; true)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">false = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> contra.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
We say that an equivocation of validator <tt>v</tt> can be observed in the
last state <tt>s</tt> of a trace (<span class="inlinecode"><span class="id" title="var">equivocating_trace_last</span></span>) if there is an
<span class="inlinecode"><span class="id" title="var">observable_event</span></span> for <tt>v</tt> in s, which was no <span class="inlinecode"><span class="id" title="var">trace_generated_event</span></span>
in the same trace.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocating_in_trace_last</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination tr) <span class="kr">is</span>)
  (<span class="nv">v</span> : validator)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span>
    (<span class="nv">e</span> : event)
    (<span class="nv">He</span> : In e (observable_events s v)),
    ~ trace_generated_event <span class="kr">is</span> tr v e.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocating_in_trace_last_fn</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination tr) <span class="kr">is</span>)
  (<span class="nv">v</span> : validator)
  : bool
  :=
  existsb
    (<span class="kr">fun</span> <span class="nv">e</span> : event =&gt;
      negb (trace_generated_event_fn <span class="kr">is</span> tr v e)
    )
    (observable_events s v).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk98" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk98"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocating_in_trace_last_function</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">v</span> : validator)
  : equivocating_in_trace_last <span class="kr">is</span> tr v
  &lt;-&gt; equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v &lt;-&gt;
equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk99" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk99"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v &lt;-&gt;
equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk9a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk9a"><span class="highlight"><span class="nb">split</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v -&gt;
equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk9b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk9b"><hr></label><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true -&gt;
equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk9c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk9c"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v -&gt;
equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk9d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk9d"><span class="highlight"><span class="nb">intros</span> [e [He Hnobs]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk9e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk9e"><span class="highlight"><span class="nb">unfold</span> equivocating_in_trace_last_fn.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb
  (<span class="kr">fun</span> <span class="nv">e</span> : event =&gt;
   negb (trace_generated_event_fn <span class="kr">is</span> tr v e))
  (observable_events (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v) =
true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk9f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk9f"><span class="highlight"><span class="nb">apply</span> existsb_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : event,
  In x
    (observable_events (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)
       v) /\
  negb (trace_generated_event_fn <span class="kr">is</span> tr v x) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka0"><span class="highlight"><span class="kr">exists</span> <span class="nv">e</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v) /\
negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka1"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka2"><span class="highlight"><span class="nb">destruct</span> (trace_generated_event_fn <span class="kr">is</span> tr v e) <span class="nb">eqn</span>:H; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">negb true = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka3"><span class="highlight"><span class="nb">elim</span> Hnobs.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka4"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnobs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka5"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true -&gt;
equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka6"><span class="highlight"><span class="nb">intro</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last_fn <span class="kr">is</span> tr v = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka7"><span class="highlight"><span class="nb">apply</span> existsb_exists <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : event,
  In x
    (observable_events
       (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v) /\
  negb (trace_generated_event_fn <span class="kr">is</span> tr v x) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka8"><span class="highlight"><span class="nb">destruct</span> H <span class="kr">as</span> [e [Hin H]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chka9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chka9"><span class="highlight"><span class="kr">exists</span> <span class="nv">e</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : In e
        (observable_events
           (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v),
  ~ trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkaa" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkaa"><span class="highlight"><span class="kr">exists</span> <span class="nv">Hin</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkab" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkab"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkac" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkac"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function <span class="kr">in</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">negb (trace_generated_event_fn <span class="kr">is</span> tr v e) = true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkad" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkad"><span class="highlight"><span class="nb">rewrite</span> contra <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">negb true = true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkae" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkae"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">false = true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> H.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Since the initial state has no events, no equivocations can exist in an
empty protocol trace.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkaf" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkaf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">not_equivocating_in_trace_last_initial</span>
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hs</span> : vinitial_state_prop X s)
  (<span class="nv">v</span> : validator)
  : ~ equivocating_in_trace_last s [] v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last s [] v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb0"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last s [] v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb1"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last s [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb2"><span class="highlight"><span class="nb">destruct</span> contra <span class="kr">as</span> [e [He Hne]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination []) s) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event s [] v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb3"><span class="highlight"><span class="nb">specialize</span> (no_events_in_initial_state (<span class="nb">last</span> (map destination []) s) Hs v) <span class="kr">as</span> Hno.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination []) s) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event s [] v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events (<span class="nb">last</span> (map destination []) s)
  v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb4"><span class="highlight"><span class="nb">replace</span>
    (observable_events (<span class="nb">last</span> (map destination []) s) v)
    <span class="kr">with</span> (@nil event) <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event s [] v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events (<span class="nb">last</span> (map destination []) s)
  v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">inversion</span> He.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
We say that <tt>v</tt> is <span class="inlinecode"><span class="id" title="var">equivocating_in_trace</span></span> <tt>tr</tt> if there is
a prefix of <tt>tr</tt> such that v is <span class="inlinecode"><span class="id" title="var">equivocating_trace_last</span></span> w.r.t. that
prefix.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocating_in_trace</span>
  (<span class="nv">tr</span> : protocol_trace X)
  (<span class="nv">v</span> : validator)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span>
    (<span class="nv">prefix</span> : list transition_item)
    (<span class="nv">last</span> : transition_item)
    (<span class="nv">Hpr</span> : trace_prefix X (proj1_sig tr) <span class="nb">last</span> prefix),
    equivocating_in_trace_last (trace_first (proj1_sig tr)) prefix v.</span></span></span></pre><div class="doc">
We say that <tt>v</tt> is <span class="inlinecode"><span class="id" title="var">equivocating_in_all_traces_ending_in_state</span></span> <tt>s</tt> if it is
<span class="inlinecode"><span class="id" title="var">equivocating_in_trace_last</span></span> w.r.t. all <span class="inlinecode"><span class="id" title="var">protocol_trace</span></span>s ending in <tt>s</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocating_in_all_traces_ending_in_state</span>
  (<span class="nv">s</span> : protocol_state X)
  (<span class="nv">v</span> : validator)
  : <span class="kt">Prop</span>
  := <span class="kr">forall</span>
    (<span class="nv">is</span> : vstate X)
    (<span class="nv">tr</span> : list transition_item)
    (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
    (<span class="nv">Hlast</span> : <span class="nb">last</span> (map destination tr) <span class="kr">is</span> = proj1_sig s),
    equivocating_in_trace_last <span class="kr">is</span> tr v.</span></span></span></pre><div class="doc">
Next property holds for states <tt>s</tt> and validators <tt>v</tt> for which there
exists at least one trace ending in <tt>s</tt> and not equivocating in <tt>v</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">not_equivocating_in_some_traces_ending_in_state</span>
  (<span class="nv">s</span> : protocol_state X)
  (<span class="nv">v</span> : validator)
  : <span class="kt">Prop</span>
  := <span class="kr">exists</span>
    (<span class="nv">is</span> : vstate X)
    (<span class="nv">tr</span> : list transition_item)
    (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
    (<span class="nv">Hlast</span> : <span class="nb">last</span> (map destination tr) <span class="kr">is</span> = proj1_sig s),
    ~equivocating_in_trace_last <span class="kr">is</span> tr v.</span></span></span></pre><div class="doc">
Next property holds for states <tt>s</tt> and validators <tt>v</tt> for which
all protocol traces ending in <tt>s</tt> are not equivocating in <tt>v</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">not_equivocating_in_all_traces_ending_in_state</span>
  (<span class="nv">s</span> : protocol_state X)
  (<span class="nv">v</span> : validator)
  : <span class="kt">Prop</span>
  := <span class="kr">forall</span>
    (<span class="nv">is</span> : vstate X)
    (<span class="nv">tr</span> : list transition_item)
    (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
    (<span class="nv">Hlast</span> : <span class="nb">last</span> (map destination tr) <span class="kr">is</span> = proj1_sig s),
    ~equivocating_in_trace_last <span class="kr">is</span> tr v.</span></span></span></pre><div class="doc">
Given that each protocol state has a witness trace, it follow that
<span class="inlinecode"><span class="id" title="var">not_equivocating_in_all_traces_ending_in_state</span></span> implies
<span class="inlinecode"><span class="id" title="var">not_equivocating_in_some_traces_ending_in_state</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb5"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">not_equivocating_in_traces_ending_in_state</span>
  (<span class="nv">s</span> : protocol_state X)
  (<span class="nv">v</span> : validator)
  (<span class="nv">Hall</span> : not_equivocating_in_all_traces_ending_in_state s v)
  : not_equivocating_in_some_traces_ending_in_state s v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  s v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state s v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb6"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  s v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state s v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb7"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> [s [_om Hs]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s) s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkb8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkb8"><span class="highlight"><span class="nb">destruct</span> (protocol_is_trace X s _om Hs) <span class="kr">as</span> [Hinit | [<span class="kr">is</span> [tr [Htr [Hlast _]]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s) s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chkb9" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chkb9"><hr></label><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s) s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkba" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkba"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s) s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkbb" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkbb"><span class="highlight"><span class="kr">exists</span> <span class="nv">s</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">tr</span> : list transition_item) (<span class="nv">_</span> : finite_protocol_trace
                                     X s tr) (<span class="nv">_</span> : 
                                              <span class="nb">last</span>
                                                (map
                                                 destination
                                                 tr) s =
                                              proj1_sig
                                                (exist
                                                 (<span class="kr">fun</span>
                                                 <span class="nv">s</span> : state
                                                 =&gt;
                                                 protocol_state_prop
                                                 X s)
                                                 s
                                                 (ex_intro
                                                 (<span class="kr">fun</span>
                                                 <span class="nv">om</span> : 
                                                 option
                                                 message
                                                 =&gt;
                                                 protocol_prop
                                                 X
                                                 (s,
                                                 om))
                                                 _om
                                                 Hs))),
  ~ equivocating_in_trace_last s tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkbc" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkbc"><span class="highlight"><span class="kr">exists</span> [].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">_</span> : finite_protocol_trace X s []) (<span class="nv">_</span> : <span class="nb">last</span>
                                            (map
                                               destination
                                               []) s =
                                          proj1_sig
                                            (exist
                                               (<span class="kr">fun</span>
                                                 <span class="nv">s</span> : state
                                                =&gt;
                                                protocol_state_prop
                                                 X s)
                                               s
                                               (ex_intro
                                                 (<span class="kr">fun</span>
                                                 <span class="nv">om</span> : 
                                                 option
                                                 message
                                                 =&gt;
                                                 protocol_prop
                                                 X
                                                 (s,
                                                 om))
                                                 _om
                                                 Hs))),
  ~ equivocating_in_trace_last s [] v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkbd" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkbd"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from X s []</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chkbe" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chkbe"><hr></label><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last s [] v</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkbf" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkbf"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from X s []</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc0"><span class="highlight"><span class="nb">constructor</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X s</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc1"><span class="highlight"><span class="nb">apply</span> initial_is_protocol.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">initial_state_prop s</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc2"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last s [] v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc3"><span class="highlight"><span class="nb">apply</span> not_equivocating_in_trace_last_initial.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop X s</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc4"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s) s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc5"><span class="highlight"><span class="nb">assert</span> (Hlst := last_error_destination_last tr s Hlast <span class="kr">is</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s) s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc6"><span class="highlight"><span class="kr">exists</span> <span class="nv">is</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">tr</span> : list transition_item) (<span class="nv">_</span> : finite_protocol_trace
                                     X <span class="kr">is</span> tr) (<span class="nv">_</span> : 
                                               <span class="nb">last</span>
                                                 (map
                                                 destination
                                                 tr)
                                                 <span class="kr">is</span> =
                                               proj1_sig
                                                 (exist
                                                 (<span class="kr">fun</span>
                                                 <span class="nv">s</span> : state
                                                 =&gt;
                                                 protocol_state_prop
                                                 X s)
                                                 s
                                                 (ex_intro
                                                 (<span class="kr">fun</span>
                                                 <span class="nv">om</span> : 
                                                 option
                                                 message
                                                 =&gt;
                                                 protocol_prop
                                                 X
                                                 (s,
                                                 om))
                                                 _om
                                                 Hs))),
  ~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc7"><span class="highlight"><span class="kr">exists</span> <span class="nv">tr</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">_</span> : finite_protocol_trace X <span class="kr">is</span> tr) (<span class="nv">_</span> : <span class="nb">last</span>
                                             (map
                                                destination
                                                tr) <span class="kr">is</span> =
                                           proj1_sig
                                             (exist
                                                (<span class="kr">fun</span>
                                                 <span class="nv">s</span> : state
                                                 =&gt;
                                                 protocol_state_prop
                                                 X s)
                                                s
                                                (ex_intro
                                                 (<span class="kr">fun</span>
                                                 <span class="nv">om</span> : 
                                                 option
                                                 message
                                                 =&gt;
                                                 protocol_prop
                                                 X
                                                 (s,
                                                 om))
                                                 _om
                                                 Hs))),
  ~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc8"><span class="highlight"><span class="kr">exists</span> <span class="nv">Htr</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : <span class="nb">last</span> (map destination tr) <span class="kr">is</span> =
      proj1_sig
        (exist
           (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
           s
           (ex_intro
              (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
               protocol_prop X (s, om)) _om Hs)),
  ~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkc9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkc9"><span class="highlight"><span class="kr">exists</span> <span class="nv">Hlst</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist
     (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; protocol_state_prop X s)
     s
     (ex_intro
        (<span class="kr">fun</span> <span class="nv">om</span> : option message =&gt;
         protocol_prop X (s, om)) _om Hs)) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkca" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkca"><span class="highlight"><span class="nb">specialize</span> (Hall <span class="kr">is</span> tr Htr Hlst).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_map destination (last_error tr) =
Some s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Linking observable equivocation to message-based equivocation</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --></pre><div class="doc">
This shows that if there exists an event which is observable for a
validator <tt>v</tt> in the last state of a trace but which was not generated
by <tt>v</tt> during the trace <span class="inlinecode"><span class="id" title="var">equivocating_in_trace_last</span></span>, then there exists
a message <tt>m</tt> which was received but not sent in the trace
<span class="inlinecode"><span class="id" title="var">VLSM.Equivocation.equivocation_in_trace</span></span>.

<div class="paragraph"> </div>

Note that this result does not guarantee that the sender of <tt>m</tt> is <tt>v</tt>.
To achieve that we would need additional <span class="inlinecode"><span class="id" title="var">unforgeable_messages</span></span> assumptions.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkcb" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkcb"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">event_equivocation_implies_message_equivocation</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
  (<span class="nv">v</span> : validator)
  (<span class="nv">Heqv</span> : equivocating_in_trace_last <span class="kr">is</span> tr v)
  : <span class="kr">exists</span> (<span class="nv">m</span> : message), VLSM.Equivocation.equivocation_in_trace X m tr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message, equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkcc" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkcc"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message, equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkcd" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkcd"><span class="highlight"><span class="nb">destruct</span> Heqv <span class="kr">as</span> [e [He Hne]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message, equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkce" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkce"><span class="highlight"><span class="nb">apply</span> in_observable_events_first <span class="kr">in</span> He; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">pre</span> <span class="nv">suf</span> : list transition_item) 
(<span class="nv">item</span> : transition_item) 
(<span class="nv">_</span> : tr = pre ++ [item] ++ suf) 
(<span class="nv">_</span> : In e
       (observable_events (destination item) v)),
  Forall
    (<span class="kr">fun</span> <span class="nv">item0</span> : transition_item =&gt;
     ~
     In e
       (observable_events (destination item0) v))
    pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message, equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkcf" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkcf"><span class="highlight"><span class="nb">destruct</span> He <span class="kr">as</span> [pre [suf [item [Heq [He Hpre]]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message, equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd0"><span class="highlight"><span class="nb">rewrite</span> app_assoc <span class="kr">in</span> Heq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = (pre ++ [item]) ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message, equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd1"><span class="highlight"><span class="nb">subst</span> tr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span>
  ((pre ++ [item]) ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre ++ [item]) ++ suf) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd2"><span class="highlight"><span class="nb">apply</span> not_trace_generated_prefix <span class="kr">in</span> Hne.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span>
  ((pre ++ [item]) ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd3"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  ((pre ++ [item]) ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd4"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> (pre ++ [item]) /\
finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination (pre ++ [item])) <span class="kr">is</span>)
  suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd5"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr _].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> (pre ++ [item])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">item</span> : transition_item =&gt;
   ~
   In e
     (observable_events (destination item) v))
  pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd6"><span class="highlight"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hpre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> (pre ++ [item])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd7"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre /\
finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) [item]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd8"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr Ht].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) [item]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m ((pre ++ [item]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkd9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkd9"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) [item]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (destination item) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ trace_generated_event <span class="kr">is</span> (pre ++ [item]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = <span class="nb">last</span> (map destination pre) <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := l;
input := iom;
destination := s;
output := oom |} = item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tl = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkda" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkda"><span class="highlight"><span class="nb">subst</span> item tl s&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  [{|
   l := l;
   input := iom;
   destination := s;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (destination
        {|
        l := l;
        input := iom;
        destination := s;
        output := oom |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkdb" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkdb"><span class="highlight"><span class="nb">clear</span> Ht H2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (destination
        {|
        l := l;
        input := iom;
        destination := s;
        output := oom |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkdc" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkdc"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (composed_observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkdd" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkdd"><span class="highlight"><span class="nb">apply</span> set_union_in_iterated <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Exists (<span class="kr">fun</span> <span class="nv">s</span> : list event =&gt; In e s)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt; observable_events (s i) v)
     index_listing)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkde" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkde"><span class="highlight"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : list event,
  In x
    (map
       (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
        observable_events (s i) v) index_listing) /\
  In e x</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkdf" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkdf"><span class="highlight"><span class="nb">destruct</span> He <span class="kr">as</span> [esi [Hesi He]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">esi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hesi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In esi
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events (s i) v) index_listing)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e esi</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke0"><span class="highlight"><span class="nb">apply</span> in_map_iff <span class="kr">in</span> Hesi.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">esi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hesi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : index,
  observable_events (s x) v = esi /\
  In x index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e esi</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke1"><span class="highlight"><span class="nb">destruct</span> Hesi <span class="kr">as</span> [i [Hesi Hi]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">esi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hesi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events (s i) v = esi</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e esi</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke2"><span class="highlight"><span class="nb">subst</span> esi.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke3"><span class="highlight"><span class="nb">assert</span> (Hnpre : ~In e (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chke4" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chke4"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke5"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke6"><span class="highlight"><span class="nb">assert</span> (Hpre0: pre = [] \/ pre &lt;&gt; [])
      <span class="bp">by</span> (<span class="nb">destruct</span> pre; (<span class="nb">left</span>; <span class="bp">reflexivity</span>) || (<span class="nb">right</span>; <span class="nb">intro</span> contra; <span class="bp">discriminate</span> contra)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = [] \/ pre &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke7"><span class="highlight"><span class="nb">destruct</span> Hpre0 <span class="kr">as</span> [Hpre0 | Hpre0].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chke8" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre &lt;&gt; []</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chke8"><hr></label><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chke9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chke9"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkea" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkea"><span class="highlight"><span class="nb">subst</span> pre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination []) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ([] ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x [] -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination []) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkeb" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkeb"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination []) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ([] ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x [] -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In e (composed_observable_events <span class="kr">is</span> v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkec" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkec"><span class="highlight"><span class="nb">specialize</span> (no_events_in_initial_state <span class="kr">is</span> His v) <span class="kr">as</span> Hno.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination []) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ([] ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x [] -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events <span class="kr">is</span> v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In e (composed_observable_events <span class="kr">is</span> v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chked" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chked"><span class="highlight"><span class="nb">replace</span> (composed_observable_events <span class="kr">is</span> v) <span class="kr">with</span> (@nil event).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination []) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ([] ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x [] -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events <span class="kr">is</span> v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In e []</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkee" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkee"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination []) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ([] ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x [] -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events <span class="kr">is</span> v = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">inversion</span> contra.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkef" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkef"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf0"><span class="highlight"><span class="nb">destruct</span> (exists_last Hpre0) <span class="kr">as</span> [pre&#39; [item&#39; Heq&#39;]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = pre&#39; ++ [item&#39;]</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf1"><span class="highlight"><span class="nb">subst</span> pre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf2"><span class="highlight"><span class="nb">rewrite</span> map_app.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination pre&#39; ++
         map destination [item&#39;]) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf3"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (composed_observable_events
     (<span class="nb">last</span>
        (map destination pre&#39; ++ [destination item&#39;])
        <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf4"><span class="highlight"><span class="nb">rewrite</span> last_last.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (composed_observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf5"><span class="highlight"><span class="nb">apply</span> (Hpre item&#39;).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In item&#39; (pre&#39; ++ [item&#39;])</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf6"><span class="highlight"><span class="nb">apply</span> in_app_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In item&#39; pre&#39; \/ In item&#39; [item&#39;]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf7"><span class="highlight"><span class="nb">right</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In item&#39; [item&#39;]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf8"><span class="highlight"><span class="nb">left</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ [item&#39;])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre&#39; ++ [item&#39;] &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ [item&#39;])) <span class="kr">is</span>,
  iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ [item&#39;]) ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x (pre&#39; ++ [item&#39;]) -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">item&#39; = item&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkf9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkf9"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkfa" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkfa"><span class="highlight"><span class="nb">assert</span> (Hnei : ~In e (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chkfb" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chkfb"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkfc" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkfc"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkfd" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkfd"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkfe" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkfe"><span class="highlight"><span class="nb">elim</span> Hnpre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chkff" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chkff"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (composed_observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk100" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk100"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (composed_observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk101" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk101"><span class="highlight"><span class="nb">apply</span> set_union_in_iterated.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists (<span class="kr">fun</span> <span class="nv">s</span> : list event =&gt; In e s)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events
        (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
     index_listing)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk102" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk102"><span class="highlight"><span class="nb">apply</span> Exists_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : list event,
  In x
    (map
       (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
        observable_events
          (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
       index_listing) /\ In e x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk103" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk103"><span class="highlight"><span class="kr">exists</span> (<span class="nv">observable_events</span> (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events
        (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
     index_listing) /\
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk104" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk104"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events
        (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
     index_listing)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk105" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk105"><span class="highlight"><span class="nb">apply</span> in_map_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : index,
  observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> x)
    v =
  observable_events
    (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v /\
  In x index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk106" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk106"><span class="highlight"><span class="kr">exists</span> (<span class="nv">projT1</span> <span class="nv">l</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">observable_events
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v =
observable_events
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l)) v /\
In (projT1 l) index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk107" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk107"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (projT1 l) index_listing</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> (proj2 finite_index).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk108" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk108"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk109" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk109"><span class="highlight"><span class="nb">destruct</span> (decide (i = (projT1 l))).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i = projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk10a" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk10a"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk10b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk10b"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i = projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk10c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk10c"><span class="highlight"><span class="nb">specialize</span>
    (not_trace_generated_event _ _ _ _ Hne
      pre [] {| l := l; input := iom; destination := s; output := oom |}
      eq_refl
    ) <span class="kr">as</span> Hng.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i = projT1 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">i</span> :=
  projT1
    (Common.l
       {|
       l := l;
       input := iom;
       destination := s;
       output := oom |}) <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s0</span> := <span class="nb">last</span> (map destination pre) <span class="kr">is</span> <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">s&#39;</span> :=
  destination
    {|
    l := l;
    input := iom;
    destination := s;
    output := oom |} <span class="kr">in</span>
In e (observable_events (s&#39; i) v) -&gt;
In e (observable_events (s0 i) v) \/
In e
  (option_message_observable_events
     (input
        {|
        l := l;
        input := iom;
        destination := s;
        output := oom |}) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk10d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk10d"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hng.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i = projT1 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v) -&gt;
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v) \/
In e (option_message_observable_events iom v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk10e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk10e"><span class="highlight"><span class="nb">subst</span> i.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v) -&gt;
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v) \/
In e (option_message_observable_events iom v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk10f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk10f"><span class="highlight"><span class="nb">specialize</span> (Hng He).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v) \/
In e (option_message_observable_events iom v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk110" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk110"><span class="highlight"><span class="nb">destruct</span> Hng <span class="kr">as</span> [Hng | Hng]; <span class="kp">try</span> (<span class="nb">elim</span> Hnei; <span class="bp">assumption</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (option_message_observable_events iom v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk111" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk111"><span class="highlight"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|]; <span class="kp">try</span> <span class="nb">inversion</span> Hng.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m0</span> : message,
  equivocation_in_trace X m0
    ((pre ++
      [{|
       l := l;
       input := Some m;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk112" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk112"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocation_in_trace X m
  ((pre ++
    [{|
     l := l;
     input := Some m;
     destination := s;
     output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk113" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk113"><span class="highlight"><span class="kr">exists</span> <span class="nv">pre</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">suffix</span> : list transition_item) (<span class="nv">item</span> : transition_item),
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) ++ suf = pre ++ item :: suffix /\
  input item = Some m /\
  ~ In (Some m) (map output pre)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk114" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk114"><span class="highlight"><span class="kr">exists</span> <span class="nv">suf</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">item</span> : transition_item,
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) ++ suf = pre ++ item :: suf /\
  input item = Some m /\
  ~ In (Some m) (map output pre)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk115" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk115"><span class="highlight"><span class="kr">exists</span> {| l := l; input := Some m; destination := s; output := oom |}.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(pre ++
 [{|
  l := l;
  input := Some m;
  destination := s;
  output := oom |}]) ++ suf =
pre ++
{|
l := l;
input := Some m;
destination := s;
output := oom |} :: suf /\
input
  {|
  l := l;
  input := Some m;
  destination := s;
  output := oom |} = Some m /\
~ In (Some m) (map output pre)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk116" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk116"><span class="highlight"><span class="nb">rewrite</span> &lt;- app_assoc.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">pre ++
[{|
 l := l;
 input := Some m;
 destination := s;
 output := oom |}] ++ suf =
pre ++
{|
l := l;
input := Some m;
destination := s;
output := oom |} :: suf /\
input
  {|
  l := l;
  input := Some m;
  destination := s;
  output := oom |} = Some m /\
~ In (Some m) (map output pre)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk117" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk117"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ In (Some m) (map output pre)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk118" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk118"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (Some m) (map output pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk119" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk119"><span class="highlight"><span class="nb">apply</span> in_map_iff <span class="kr">in</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  output x = Some m /\ In x pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11a"><span class="highlight"><span class="nb">destruct</span> contra <span class="kr">as</span> [item&#39; [Hout Hitem&#39;]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item&#39; pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11b"><span class="highlight"><span class="nb">specialize</span> (Hpre item&#39; Hitem&#39;).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item&#39; pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11c"><span class="highlight"><span class="nb">elim</span> Hpre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item&#39; pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11d"><span class="highlight"><span class="nb">apply</span> in_split <span class="kr">in</span> Hitem&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">l1</span> <span class="nv">l2</span> : list transition_item,
  pre = l1 ++ item&#39; :: l2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11e"><span class="highlight"><span class="nb">destruct</span> Hitem&#39; <span class="kr">as</span> [pre&#39; [suf&#39; Hitem&#39;]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">pre = pre&#39; ++ item&#39; :: suf&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk11f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk11f"><span class="highlight"><span class="nb">subst</span> pre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre&#39; ++ item&#39; :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ item&#39; :: suf&#39;))
     <span class="kr">is</span>, Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ item&#39; :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk120" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk120"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre&#39; /\
finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  (item&#39; :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ item&#39; :: suf&#39;))
     <span class="kr">is</span>, Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ item&#39; :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk121" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk121"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [_ Htr].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  (item&#39; :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ item&#39; :: suf&#39;))
     <span class="kr">is</span>, Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ item&#39; :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (observable_events (destination item&#39;) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk122" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk122"><span class="highlight"><span class="nb">inversion</span> Htr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  (item&#39; :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e (observable_events (destination item&#39;) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++ item&#39; :: suf&#39;)) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination (pre&#39; ++ item&#39; :: suf&#39;))
     <span class="kr">is</span>, Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++ item&#39; :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item&#39; = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, oom0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = <span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := l0;
input := iom;
destination := s0;
output := oom0 |} = item&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tl = suf&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := oom0 |}) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk123" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk123"><span class="highlight"><span class="nb">subst</span> s&#39; item&#39; tl.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom0 |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := oom0 |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := oom0 |} :: suf&#39;)) <span class="kr">is</span>, 
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := oom0 |} :: suf&#39;)) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := oom0 |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := oom0 |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output
  {|
  l := l0;
  input := iom;
  destination := s0;
  output := oom0 |} = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, oom0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := oom0 |}) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk124" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk124"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hout.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom0 |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := oom0 |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := oom0 |} :: suf&#39;)) <span class="kr">is</span>, 
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := oom0 |} :: suf&#39;)) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := oom0 |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := oom0 |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">oom0 = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, oom0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := oom0 |}) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk125" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk125"><span class="highlight"><span class="nb">subst</span> oom0.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk126" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk126"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (option_message_observable_events (Some m) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (composed_observable_events s0 v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk127" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk127"><span class="highlight"><span class="nb">apply</span> (message_observable_consistency m v _ _ _ H4) <span class="kr">in</span> Hng.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (composed_observable_events s0 v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk128" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk128"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e (composed_observable_events s0 v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk129" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk129"><span class="highlight"><span class="nb">apply</span> set_union_in_iterated.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists (<span class="kr">fun</span> <span class="nv">s</span> : list event =&gt; In e s)
  (map (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt; observable_events (s0 i) v)
     index_listing)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12a"><span class="highlight"><span class="nb">apply</span> Exists_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : list event,
  In x
    (map (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt; observable_events (s0 i) v)
       index_listing) /\ In e x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12b"><span class="highlight"><span class="kr">exists</span> (<span class="nv">observable_events</span> (s0 (projT1 l0)) v).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (observable_events (s0 (projT1 l0)) v)
  (map (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt; observable_events (s0 i) v)
     index_listing) /\
In e (observable_events (s0 (projT1 l0)) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12c"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (observable_events (s0 (projT1 l0)) v)
  (map (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt; observable_events (s0 i) v)
     index_listing)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12d"><span class="highlight"><span class="nb">apply</span> in_map_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : index,
  observable_events (s0 x) v =
  observable_events (s0 (projT1 l0)) v /\
  In x index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12e"><span class="highlight"><span class="kr">exists</span> (<span class="nv">projT1</span> <span class="nv">l0</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">observable_events (s0 (projT1 l0)) v =
observable_events (s0 (projT1 l0)) v /\
In (projT1 l0) index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk12f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk12f"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf, pre', suf'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>)
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := Some m |} :: suf&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (projT1 l) index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (destination
        {|
        l := l0;
        input := iom;
        destination := s0;
        output := Some m |}) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>
        (projT1 l)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span>
        (map destination
           (pre&#39; ++
            {|
            l := l0;
            input := iom;
            destination := s0;
            output := Some m |} :: suf&#39;)) <span class="kr">is</span>)
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span>
     (map destination
        (pre&#39; ++
         {|
         l := l0;
         input := iom;
         destination := s0;
         output := Some m |} :: suf&#39;)) <span class="kr">is</span>,
  Some m) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  ((pre&#39; ++
    {|
    l := l0;
    input := iom;
    destination := s0;
    output := Some m |} :: suf&#39;) ++
   [{|
    l := l;
    input := Some m;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hng</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s0 (projT1 l0)) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l0
  (<span class="nb">last</span> (map destination pre&#39;) <span class="kr">is</span>, iom)
  (s0, Some m)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (projT1 l0) index_listing</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> (proj2 finite_index).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk130" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk130"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk131" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk131"><span class="highlight"><span class="nb">replace</span> (s i) <span class="kr">with</span> (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk132" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk132"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nb">last</span> (map destination pre) <span class="kr">is</span> i = s i</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk133" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk133"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m
    ((pre ++
      [{|
       l := l;
       input := iom;
       destination := s;
       output := oom |}]) ++ suf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk134" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk134"><span class="highlight"><span class="nb">elim</span> Hnpre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk135" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk135"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (composed_observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk136" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk136"><span class="highlight"><span class="nb">apply</span> set_union_in_iterated.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists (<span class="kr">fun</span> <span class="nv">s</span> : list event =&gt; In e s)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events
        (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
     index_listing)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk137" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk137"><span class="highlight"><span class="nb">apply</span> Exists_exists.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : list event,
  In x
    (map
       (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
        observable_events
          (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
       index_listing) /\ In e x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk138" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk138"><span class="highlight"><span class="kr">exists</span> (<span class="nv">observable_events</span> (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i)
     v)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events
        (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
     index_listing) /\
In e
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i)
     v)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk139" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk139"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In
  (observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i)
     v)
  (map
     (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt;
      observable_events
        (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)
     index_listing)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13a"><span class="highlight"><span class="nb">apply</span> in_map_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : index,
  observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> x)
    v =
  observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i)
    v /\ In x index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13b"><span class="highlight"><span class="kr">exists</span> <span class="nv">i</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v =
observable_events (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v /\
In i index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13c"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In i index_listing</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13d"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="nb">last</span> (map destination pre) <span class="kr">is</span> i = s i</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13e"><span class="highlight"><span class="nb">symmetry</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : transition_item,
In x pre -&gt;
~ In e (observable_events (destination x) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
trace_generated_event <span class="kr">is</span>
  (pre ++
   [{|
    l := l;
    input := iom;
    destination := s;
    output := oom |}]) v e</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (observable_events
     (<span class="nb">last</span> (map destination pre) <span class="kr">is</span> (projT1 l))
     v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; projT1 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">s i = <span class="nb">last</span> (map destination pre) <span class="kr">is</span> i</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> (composite_transition_state_neq _ _ _ _ _ _ _ H3 _ n).</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The counter-positive of the above: if there exists no message <tt>m</tt> which
was received but not sent in the trace, then, for any validator <tt>v</tt>
<div class="paragraph"> </div>

there exists no event which is observable for <tt>v</tt> but not generated
during the trace.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk13f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk13f"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">event_equivocation_implies_message_equivocation_converse</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
  (<span class="nv">Hneqv</span> : <span class="kr">forall</span> (<span class="nv">m</span> : message), ~VLSM.Equivocation.equivocation_in_trace X m tr)
  (<span class="nv">v</span> : validator)
  : ~equivocating_in_trace_last <span class="kr">is</span> tr v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
~ equivocation_in_trace X m tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk140" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk140"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
~ equivocation_in_trace X m tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk141" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk141"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
~ equivocation_in_trace X m tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk142" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk142"><span class="highlight"><span class="nb">apply</span> event_equivocation_implies_message_equivocation <span class="kr">in</span> contra; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
~ equivocation_in_trace X m tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk143" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk143"><span class="highlight"><span class="nb">destruct</span> contra <span class="kr">as</span> [m contra].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
~ equivocation_in_trace X m tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocation_in_trace X m tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk144" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk144"><span class="highlight"><span class="nb">elim</span> (Hneqv m).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
~ equivocation_in_trace X m tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocation_in_trace X m tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocation_in_trace X m tr</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">Linking evidence of equivocation with observable equivocation</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --></pre><div class="doc">
The class below links <span class="inlinecode"><span class="id" title="var">composite_vlsm_observable_messages</span></span> with
<span class="inlinecode"><span class="id" title="var">observation_based_equivocation_evidence</span></span> by requiring that all
<span class="inlinecode"><span class="id" title="var">trace_generated_event</span></span>s for the same validator are <span class="inlinecode"><span class="id" title="var">comparable</span></span> through
the <span class="inlinecode"><span class="id" title="var">happens_before</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">composite_vlsm_comparable_generated_events</span>
  :=
  {
    comparable_generated_events
      (<span class="kr">is</span> : vstate X)
      (tr : list transition_item)
      (Htr : finite_protocol_trace X <span class="kr">is</span> tr)
      (v : validator)
      (e1 e2 : event)
      (He1 : trace_generated_event <span class="kr">is</span> tr v e1)
      (He2 : trace_generated_event <span class="kr">is</span> tr v e2)
      : comparable happens_before e1 e2;
  }.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">Hcomparable_generated_events</span> : composite_vlsm_comparable_generated_events}.</span></span></span></pre><div class="doc">
A helping lemma: if two events obsevable for <tt>v</tt> in the last state of
a protocol trace are uncomparable and one of them is generated, then
there exists an equivocation (the other cannot be).

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk145" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk145"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">uncomparable_with_generated_event_equivocation</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
  (<span class="nv">v</span> : validator)
  (<span class="nv">e1</span> <span class="nv">e2</span> : event)
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination tr) <span class="kr">is</span>)
  (<span class="nv">He1</span> : In e1 (observable_events s v))
  (<span class="nv">He2</span> : In e2 (observable_events s v))
  (<span class="nv">Hnc</span> : ~comparable happens_before e1 e2)
  (<span class="nv">Hgen1</span> : trace_generated_event <span class="kr">is</span> tr v e1)
  : equivocating_in_trace_last <span class="kr">is</span> tr v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk146" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk146"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk147" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk147"><span class="highlight"><span class="nb">destruct</span> (trace_generated_event_fn <span class="kr">is</span> tr v e2) <span class="nb">eqn</span>:Hgen2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk148" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk148"><hr></label><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk149" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk149"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14a"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function <span class="kr">in</span> Hgen2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14b"><span class="highlight"><span class="bp">contradict</span> Hnc.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">exact</span> (comparable_generated_events <span class="kr">is</span> tr Htr v e1 e2 Hgen1 Hgen2).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14c"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14d"><span class="highlight"><span class="kr">exists</span> <span class="nv">e2</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : In e2
        (observable_events
           (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v),
  ~ trace_generated_event <span class="kr">is</span> tr v e2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14e"><span class="highlight"><span class="kr">exists</span> <span class="nv">He2</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk14f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk14f"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk150" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk150"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function <span class="kr">in</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk151" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk151"><span class="highlight"><span class="nb">rewrite</span> Hgen2 <span class="kr">in</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e2 = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">false = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> contra.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
We now tie the <span class="inlinecode"><span class="id" title="var">observation_based_equivocation_evidence</span></span> notion
to that of <span class="inlinecode"><span class="id" title="var">composite_vlsm_comparable_generated_events</span></span> by showing that
the existence of two events observable for a validator <tt>v</tt> in a state <tt>s</tt>
<div class="paragraph"> </div>

which are not <span class="inlinecode"><span class="id" title="var">comparable</span></span> w.r.t. <span class="inlinecode"><span class="id" title="var">happens_before</span></span> relation guarantees
that <tt>v</tt> is <span class="inlinecode"><span class="id" title="var">equivocating_in_all_traces_ending_in_state</span></span> <tt>s</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk152" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk152"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">evidence_implies_equivocation</span>
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hs</span> : protocol_state_prop X s)
  (<span class="nv">v</span> : validator)
  (<span class="nv">e1</span> <span class="nv">e2</span> : event)
  (<span class="nv">He1</span> : In e1 (observable_events s v))
  (<span class="nv">He2</span> : In e2 (observable_events s v))
  (<span class="nv">Heqv</span> : ~comparable happens_before e1 e2)
  : equivocating_in_all_traces_ending_in_state (exist _ s Hs) v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk153" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk153"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk154" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk154"><span class="highlight"><span class="nb">intro</span> <span class="kr">is</span>; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> =
proj1_sig (exist (protocol_state_prop X) s Hs)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk155" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk155"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hlast.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk156" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk156"><span class="highlight"><span class="nb">subst</span> s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk157" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk157"><span class="highlight"><span class="nb">destruct</span> (trace_generated_event_fn <span class="kr">is</span> tr v e1) <span class="nb">eqn</span>:Hgen1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk158" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk158"><hr></label><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk159" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk159"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15a"><span class="highlight"><span class="nb">apply</span> uncomparable_with_generated_event_equivocation <span class="kr">with</span> e1 e2
    ; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15b"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15c"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15d"><span class="highlight"><span class="kr">exists</span> <span class="nv">e1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : In e1
        (observable_events
           (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v),
  ~ trace_generated_event <span class="kr">is</span> tr v e1</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15e"><span class="highlight"><span class="kr">exists</span> <span class="nv">He1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ trace_generated_event <span class="kr">is</span> tr v e1</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk15f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk15f"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event <span class="kr">is</span> tr v e1</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk160" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk160"><span class="highlight"><span class="nb">apply</span> trace_generated_event_function <span class="kr">in</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk161" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk161"><span class="highlight"><span class="nb">rewrite</span> Hgen1 <span class="kr">in</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1
  (observable_events
     (<span class="nb">last</span> (map destination tr) <span class="kr">is</span>) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_generated_event_fn <span class="kr">is</span> tr v e1 = false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">false = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> contra.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The counter-positive of the above says that if there exists a trace
leading to <tt>s</tt> which is not equivocating, then all events observed
for <tt>v</tt> in <tt>s</tt> must be comparable w.r.t. the <span class="inlinecode"><span class="id" title="var">happens_before</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk162" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk162"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">evidence_implies_equivocation_converse</span>
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hs</span> : protocol_state_prop X s)
  (<span class="nv">v</span> : validator)
  (<span class="nv">Hneqv</span> : not_equivocating_in_some_traces_ending_in_state (exist _ s Hs) v)
  (<span class="nv">e1</span> <span class="nv">e2</span> : event)
  (<span class="nv">He1</span> : In e1 (observable_events s v))
  (<span class="nv">He2</span> : In e2 (observable_events s v))
  : comparable happens_before e1 e2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk163" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk163"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk164" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk164"><span class="highlight"><span class="nb">destruct</span> (comparable_dec happens_before e1 e2) <span class="kr">as</span> [|Hcmp].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">c</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">comparable happens_before e1 e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk165" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcmp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk165"><hr></label><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk166" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk166"><span class="highlight"><span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcmp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk167" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk167"><span class="highlight"><span class="nb">specialize</span> (evidence_implies_equivocation s Hs v e1 e2 He1 He2 Hcmp)
    <span class="kr">as</span> Heqv.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcmp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk168" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk168"><span class="highlight"><span class="nb">destruct</span> Hneqv <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr [Hlast Hneqv]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> =
proj1_sig (exist (protocol_state_prop X) s Hs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hneqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcmp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk169" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk169"><span class="highlight"><span class="nb">destruct</span> Hneqv.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> =
proj1_sig (exist (protocol_state_prop X) s Hs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcmp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16a"><span class="highlight"><span class="nb">specialize</span> (Heqv <span class="kr">is</span> tr Htr Hlast).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> =
proj1_sig (exist (protocol_state_prop X) s Hs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcmp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ comparable happens_before e1 e2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab6"></a><h2 class="section">No-equivocation composition constraint guarantees no equivocations</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --></pre><div class="doc">
If the composition constraint subsumes the no-equivocations constraint,
then all observable events for a validator are comparable w.r.t.
the <span class="inlinecode"><span class="id" title="var">happens_before_fn</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16b"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">no_equivocation_constraint_implies_no_equivocations</span>
  (<span class="nv">Hbs</span> : <span class="kr">forall</span> <span class="nv">i</span> : index, has_been_sent_capability (IM i))
  (<span class="nv">Xhbs</span> : has_been_sent_capability (composite_vlsm IM i0 constraint) := composite_has_been_sent_capability IM i0 constraint finite_index Hbs)
  (<span class="nv">Hno_equiv</span> : constraint_subsumption IM constraint (no_equivocations IM i0 constraint finite_index Hbs))
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hs</span> : protocol_state_prop X s)
  (<span class="nv">v</span> : validator)
  : not_equivocating_in_all_traces_ending_in_state (exist _ s Hs) v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16d"><span class="highlight"><span class="nb">intro</span> <span class="kr">is</span>; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> =
proj1_sig (exist (protocol_state_prop X) s Hs)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16e"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hlast.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ equivocating_in_trace_last <span class="kr">is</span> tr v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk16f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk16f"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> tr v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk170" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk170"><span class="highlight"><span class="nb">apply</span> event_equivocation_implies_message_equivocation <span class="kr">in</span> contra; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">m</span> : message,
  equivocation_in_trace X m tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk171" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk171"><span class="highlight"><span class="nb">destruct</span> contra <span class="kr">as</span> [m [pre [suf [item [Heq [Hinput contra]]]]]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination tr) <span class="kr">is</span> = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ item :: suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk172" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk172"><span class="highlight"><span class="nb">subst</span> tr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination (pre ++ item :: suf)) <span class="kr">is</span> =
s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ item :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk173" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk173"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr Hinit].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination (pre ++ item :: suf)) <span class="kr">is</span> =
s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span>
  (pre ++ item :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk174" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk174"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination (pre ++ item :: suf)) <span class="kr">is</span> =
s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre /\
finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) 
  (item :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk175" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk175"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Hpre Htr].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination (pre ++ item :: suf)) <span class="kr">is</span> =
s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) 
  (item :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk176" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk176"><span class="highlight"><span class="nb">inversion</span> Htr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlast</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination (pre ++ item :: suf)) <span class="kr">is</span> =
s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) 
  (item :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = <span class="nb">last</span> (map destination pre) <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := l;
input := iom;
destination := s0;
output := oom |} = item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tl = suf</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk177" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk177"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := iom;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := iom;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk178" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk178"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hinput.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := iom;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := iom;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">iom = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, iom) 
  (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk179" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk179"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)
  (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk17a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk17a"><span class="highlight"><span class="nb">destruct</span> H3 <span class="kr">as</span> [[Hps [Hpm [Hv Hconstr]]] Ht].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk17b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk17b"><span class="highlight"><span class="nb">apply</span> Hno_equiv <span class="kr">in</span> Hconstr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk17c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk17c"><span class="highlight"><span class="nb">assert</span> (Hpps : protocol_state_prop (pre_loaded_with_all_messages_vlsm X) (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk17d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk17d"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk17e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk17e"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk17f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk17f"><span class="highlight"><span class="nb">destruct</span> Hps <span class="kr">as</span> [_om Hps].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk180" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk180"><span class="highlight"><span class="kr">exists</span> <span class="nv">_om</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, _om)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk181" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk181"><span class="highlight"><span class="nb">apply</span> (pre_loaded_with_all_messages_protocol_prop X).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop X (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, _om)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk182" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk182"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations IM i0 constraint
  finite_index Hbs l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk183" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk183"><span class="highlight"><span class="nb">apply</span> (@proper_sent _ _ Xhbs _ Hpps) <span class="kr">in</span> Hconstr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">selected_message_exists_in_all_traces
  (composite_vlsm IM i0 constraint) output
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>) m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk184" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk184"><span class="highlight">spec Hconstr <span class="kr">is</span> pre.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm IM i0 constraint)) <span class="kr">is</span>
  pre -&gt;
<span class="nb">last</span> (map destination pre) <span class="kr">is</span> =
<span class="nb">last</span> (map destination pre) <span class="kr">is</span> -&gt;
Exists
  (<span class="kr">fun</span> <span class="nv">elem</span> : transition_item =&gt;
   output elem = Some m) pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk185" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk185"><span class="highlight"><span class="nb">assert</span> (Hincl : VLSM_incl X (pre_loaded_with_all_messages_vlsm X))
    <span class="bp">by</span> <span class="nb">apply</span> vlsm_incl_pre_loaded_with_all_messages_vlsm.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm IM i0 constraint)) <span class="kr">is</span>
  pre -&gt;
<span class="nb">last</span> (map destination pre) <span class="kr">is</span> =
<span class="nb">last</span> (map destination pre) <span class="kr">is</span> -&gt;
Exists
  (<span class="kr">fun</span> <span class="nv">elem</span> : transition_item =&gt;
   output elem = Some m) pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk186" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk186"><span class="highlight"><span class="nb">apply</span> (VLSM_incl_finite_trace _ (machine (pre_loaded_with_all_messages_vlsm X))) <span class="kr">in</span> Hpre
  ; [|<span class="bp">assumption</span>].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm IM i0 constraint)) <span class="kr">is</span>
  pre -&gt;
<span class="nb">last</span> (map destination pre) <span class="kr">is</span> =
<span class="nb">last</span> (map destination pre) <span class="kr">is</span> -&gt;
Exists
  (<span class="kr">fun</span> <span class="nv">elem</span> : transition_item =&gt;
   output elem = Some m) pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk187" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk187"><span class="highlight"><span class="nb">specialize</span> (Hconstr (conj Hpre Hinit) eq_refl).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">elem</span> : transition_item =&gt;
   output elem = Some m) pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk188" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk188"><span class="highlight"><span class="nb">elim</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">elem</span> : transition_item =&gt;
   output elem = Some m) pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (Some m) (map output pre)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk189" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk189"><span class="highlight"><span class="nb">apply</span> in_map_iff.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Exists
  (<span class="kr">fun</span> <span class="nv">elem</span> : transition_item =&gt;
   output elem = Some m) pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  output x = Some m /\ In x pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18a"><span class="highlight"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hconstr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hconstr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  In x pre /\ output x = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  output x = Some m /\ In x pre</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18b"><span class="highlight"><span class="nb">destruct</span> Hconstr <span class="kr">as</span> [item [Hitem Hout]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  output x = Some m /\ In x pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18c"><span class="highlight"><span class="kr">exists</span> <span class="nv">item</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xhbs</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability IM i0
  constraint finite_index Hbs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  (composite_vlsm IM i0 constraint)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span>
     (map destination
        (pre ++
         {|
         l := l;
         input := Some m;
         destination := s0;
         output := oom |} :: suf)) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm X)))
  <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)
  ({|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |} :: suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In (Some m) (map output pre)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X (Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">free_composite_valid IM l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="nb">last</span> (map destination pre) <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl X
  (pre_loaded_with_all_messages_vlsm X)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">output item = Some m /\ In item pre</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">split</span>; <span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
As a corollary, if the composition constraint subsumes the
no-equivocations constraint, then for any validator, all observable events
in a protocol state are comparable w.r.t. the <span class="inlinecode"><span class="id" title="var">happens_before_fn</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">no_equivocation_constraint_implies_comparable_events</span>
  (<span class="nv">Hbs</span> : <span class="kr">forall</span> <span class="nv">i</span> : index, has_been_sent_capability (IM i))
  (<span class="nv">Hno_equiv</span> :
    constraint_subsumption IM constraint (no_equivocations IM i0 constraint finite_index Hbs)
  )
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hs</span> : protocol_state_prop X s)
  (<span class="nv">e1</span> <span class="nv">e2</span> : event)
  (<span class="nv">v</span> : validator)
  (<span class="nv">He1</span> : In e1 (observable_events s v))
  (<span class="nv">He2</span> : In e2 (observable_events s v))
  : comparable happens_before e1 e2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">comparable happens_before e1 e2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk18f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk18f"><span class="highlight"><span class="nb">apply</span> evidence_implies_equivocation_converse <span class="kr">with</span> s Hs v; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_some_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk190" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk190"><span class="highlight"><span class="nb">apply</span> not_equivocating_in_traces_ending_in_state.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) s Hs) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk191" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk191"><span class="highlight"><span class="nb">apply</span> no_equivocation_constraint_implies_no_equivocations <span class="kr">with</span> Hbs.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint
     finite_index Hbs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (observable_events s v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e2 (observable_events s v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations IM i0 constraint finite_index Hbs)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Since an initial state has no observable events, it follows that it
cannot be equivocating for any validator.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk192" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk192"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">no_equivocation_in_initial_state</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">Hs</span> : vinitial_state_prop X <span class="kr">is</span>)
  (<span class="nv">v</span> : validator)
  (<span class="nv">Hps</span> := initial_is_protocol X <span class="kr">is</span> Hs)
  : ~ equivocating_in_all_traces_ending_in_state (exist _ <span class="kr">is</span> Hps) v.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk193" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk193"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) v</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk194" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk194"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_all_traces_ending_in_state
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk195" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk195"><span class="highlight"><span class="nb">specialize</span> (contra <span class="kr">is</span> []).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> [] -&gt;
<span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk196" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk196"><span class="highlight">spec contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> [] -&gt;
<span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> []</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="ObservableEquivocation-v-chk197" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="ObservableEquivocation-v-chk197"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk198" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk198"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> [] -&gt;
<span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> []</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk199" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk199"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> [] -&gt;
<span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> []</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19a" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19a"><span class="highlight"><span class="nb">constructor</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> [] -&gt;
<span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19b" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19b"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="nb">last</span> (map destination []) <span class="kr">is</span> =
proj1_sig
  (exist (protocol_state_prop X) <span class="kr">is</span> Hps) -&gt;
equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19c" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19c"><span class="highlight"><span class="nb">specialize</span> (contra eq_refl).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocating_in_trace_last <span class="kr">is</span> [] v</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19d" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19d"><span class="highlight"><span class="nb">destruct</span> contra <span class="kr">as</span> [e [He _]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (observable_events
     (<span class="nb">last</span> (map destination []) <span class="kr">is</span>) v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19e" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19e"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (composed_observable_events <span class="kr">is</span> v)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk19f" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk19f"><span class="highlight"><span class="nb">specialize</span> (no_events_in_initial_state <span class="kr">is</span> Hs v) <span class="kr">as</span> Heis.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (composed_observable_events <span class="kr">is</span> v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heis</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">observable_events <span class="kr">is</span> v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a0"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Heis.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (composed_observable_events <span class="kr">is</span> v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heis</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composed_observable_events <span class="kr">is</span> v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a1"><span class="highlight"><span class="nb">rewrite</span> Heis <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">initial_is_protocol X <span class="kr">is</span> Hs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heis</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composed_observable_events <span class="kr">is</span> v = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">inversion</span> He.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">measurable_V</span> : Measurable validator}
  {<span class="nv">reachable_threshold</span> : ReachableThreshold validator}
  (<span class="nv">validators</span> : composite_state IM -&gt; <span class="nb">set</span> validator)
  (<span class="nv">validators_nodup</span> : <span class="kr">forall</span> (<span class="nv">s</span> : composite_state IM), NoDup (validators s))
  .</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composed_observable_basic_equivocation</span>
  : basic_equivocation (composite_state IM) validator
  := @basic_observable_equivocation (composite_state IM) validator event
      decide_eq
      happens_before
      happens_before_dec
      composed_observation_based_equivocation_evidence
      measurable_V
      reachable_threshold
      validators
      validators_nodup.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Existing Instance</span> <span class="nf">composed_observable_basic_equivocation</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a2"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">initial_state_not_heavy</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">Hs</span> : vinitial_state_prop X <span class="kr">is</span>)
  : not_heavy <span class="kr">is</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_heavy <span class="kr">is</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">not_heavy <span class="kr">is</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a4"><span class="highlight"><span class="nb">unfold</span> not_heavy.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(equivocation_fault <span class="kr">is</span> &lt;= proj1_sig threshold)%R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a5"><span class="highlight"><span class="nb">unfold</span> equivocation_fault.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights (equivocating_validators <span class="kr">is</span>) &lt;=
 proj1_sig threshold)%R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a6"><span class="highlight"><span class="nb">unfold</span> equivocating_validators.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter (is_equivocating_fn <span class="kr">is</span>)
      (state_validators <span class="kr">is</span>)) &lt;= proj1_sig threshold)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a7"><span class="highlight"><span class="nb">unfold</span> state_validators.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter (is_equivocating_fn <span class="kr">is</span>)
      ((<span class="kr">let</span> (<span class="nv">_</span>, state_validators, _, _, _, _) :=
          composed_observable_basic_equivocation <span class="kr">in</span>
        state_validators) <span class="kr">is</span>)) &lt;= proj1_sig threshold)%R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a8"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter
      (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
       bool_decide (equivocation_evidence <span class="kr">is</span> v))
      (validators <span class="kr">is</span>)) &lt;= proj1_sig threshold)%R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1a9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1a9"><span class="highlight"><span class="nb">unfold</span> equivocation_evidence.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter
      (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
       bool_decide
         (<span class="kr">exists</span> <span class="nv">e1</span> : event,
            In e1 (observable_events <span class="kr">is</span> v) /\
            (<span class="kr">exists</span> <span class="nv">e2</span> : event,
               In e2 (observable_events <span class="kr">is</span> v) /\
               ~ comparable happens_before e1 e2)))
      (validators <span class="kr">is</span>)) &lt;= proj1_sig threshold)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1aa" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1aa"><span class="highlight"><span class="nb">destruct</span> threshold.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(x &gt;= <span class="mi">0</span>)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter
      (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
       bool_decide
         (<span class="kr">exists</span> <span class="nv">e1</span> : event,
            In e1 (observable_events <span class="kr">is</span> v) /\
            (<span class="kr">exists</span> <span class="nv">e2</span> : event,
               In e2 (observable_events <span class="kr">is</span> v) /\
               ~ comparable happens_before e1 e2)))
      (validators <span class="kr">is</span>)) &lt;=
 proj1_sig (exist (<span class="kr">fun</span> <span class="nv">r</span> : R =&gt; r &gt;= <span class="mi">0</span>) x r))%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1ab" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1ab"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(x &gt;= <span class="mi">0</span>)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter
      (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
       bool_decide
         (<span class="kr">exists</span> <span class="nv">e1</span> : event,
            In e1 (composed_observable_events <span class="kr">is</span> v) /\
            (<span class="kr">exists</span> <span class="nv">e2</span> : event,
               In e2 (composed_observable_events <span class="kr">is</span> v) /\
               ~ comparable happens_before e1 e2)))
      (validators <span class="kr">is</span>)) &lt;= x)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1ac" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1ac"><span class="highlight"><span class="nb">apply</span> Rge_le <span class="kr">in</span> r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(sum_weights
   (filter
      (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
       bool_decide
         (<span class="kr">exists</span> <span class="nv">e1</span> : event,
            In e1 (composed_observable_events <span class="kr">is</span> v) /\
            (<span class="kr">exists</span> <span class="nv">e2</span> : event,
               In e2 (composed_observable_events <span class="kr">is</span> v) /\
               ~ comparable happens_before e1 e2)))
      (validators <span class="kr">is</span>)) &lt;= x)%R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1ad" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1ad"><span class="highlight"><span class="nb">replace</span>
    (filter _ (validators <span class="kr">is</span>))
    <span class="kr">with</span> (@nil validator)
  ; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[] =
filter
  (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
   bool_decide
     (<span class="kr">exists</span> <span class="nv">e1</span> : event,
        In e1 (composed_observable_events <span class="kr">is</span> v) /\
        (<span class="kr">exists</span> <span class="nv">e2</span> : event,
           In e2 (composed_observable_events <span class="kr">is</span> v) /\
           ~ comparable happens_before e1 e2)))
  (validators <span class="kr">is</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1ae" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1ae"><span class="highlight"><span class="nb">symmetry</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">filter
  (<span class="kr">fun</span> <span class="nv">v</span> : validator =&gt;
   bool_decide
     (<span class="kr">exists</span> <span class="nv">e1</span> : event,
        In e1 (composed_observable_events <span class="kr">is</span> v) /\
        (<span class="kr">exists</span> <span class="nv">e2</span> : event,
           In e2 (composed_observable_events <span class="kr">is</span> v) /\
           ~ comparable happens_before e1 e2)))
  (validators <span class="kr">is</span>) = []</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1af" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1af"><span class="highlight"><span class="nb">apply</span> filter_nil.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Forall
  (<span class="kr">fun</span> <span class="nv">a</span> : validator =&gt;
   bool_decide
     (<span class="kr">exists</span> <span class="nv">e1</span> : event,
        In e1 (composed_observable_events <span class="kr">is</span> a) /\
        (<span class="kr">exists</span> <span class="nv">e2</span> : event,
           In e2 (composed_observable_events <span class="kr">is</span> a) /\
           ~ comparable happens_before e1 e2)) = false)
  (validators <span class="kr">is</span>)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b0" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b0"><span class="highlight"><span class="nb">rewrite</span> Forall_forall.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : validator,
In x (validators <span class="kr">is</span>) -&gt;
bool_decide
  (<span class="kr">exists</span> <span class="nv">e1</span> : event,
     In e1 (composed_observable_events <span class="kr">is</span> x) /\
     (<span class="kr">exists</span> <span class="nv">e2</span> : event,
        In e2 (composed_observable_events <span class="kr">is</span> x) /\
        ~ comparable happens_before e1 e2)) = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b1" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b1"><span class="highlight"><span class="nb">intros</span> v Hv.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In v (validators <span class="kr">is</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool_decide
  (<span class="kr">exists</span> <span class="nv">e1</span> : event,
     In e1 (composed_observable_events <span class="kr">is</span> v) /\
     (<span class="kr">exists</span> <span class="nv">e2</span> : event,
        In e2 (composed_observable_events <span class="kr">is</span> v) /\
        ~ comparable happens_before e1 e2)) = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b2" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b2"><span class="highlight"><span class="nb">apply</span> bool_decide_eq_false.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In v (validators <span class="kr">is</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
(<span class="kr">exists</span> <span class="nv">e1</span> : event,
   In e1 (composed_observable_events <span class="kr">is</span> v) /\
   (<span class="kr">exists</span> <span class="nv">e2</span> : event,
      In e2 (composed_observable_events <span class="kr">is</span> v) /\
      ~ comparable happens_before e1 e2))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b3" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b3"><span class="highlight"><span class="nb">intros</span> [e1 [He1 H]].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomposite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hcomparable_generated_events</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_comparable_generated_events</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">measurable_V</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Measurable validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">reachable_threshold</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ReachableThreshold validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM -&gt; <span class="nb">set</span> validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">validators_nodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : composite_state IM,
NoDup (validators s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X <span class="kr">is</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="mi">0</span> &lt;= x)%R</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In v (validators <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e1 (composed_observable_events <span class="kr">is</span> v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">e2</span> : event,
  In e2 (composed_observable_events <span class="kr">is</span> v) /\
  ~ comparable happens_before e1 e2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> no_events_in_initial_state <span class="kr">in</span> He1 <span class="bp">by</span> <span class="bp">assumption</span>;<span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">observable_equivocation_in_composition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">unforgeable_messages</span>.</span></span></span></pre><div class="doc">
<a id="lab7"></a><h2 class="section">Unforgeability and observations</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">message</span> <span class="nv">validator</span> <span class="nv">event</span> : <span class="kt">Type</span>}
  `{EqDecision event}
  {happens_before: event -&gt; event -&gt; <span class="kt">Prop</span>}
  {happens_before_dec: RelDecision happens_before}
  {index : <span class="kt">Type</span>}
  `{EqDecision index}
  (index_listing : list index)
  (finite_index : Listing index_listing)
  (IM : index -&gt; VLSM message)
  (Hevidence : <span class="kr">forall</span> (<span class="nv">i</span> : index),
    observation_based_equivocation_evidence
        (vstate (IM i)) validator event decide_eq happens_before happens_before_dec
  )
  (i0 : index)
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (A : validator -&gt; index)
  (X := composite_vlsm IM i0 constraint)
  (PreX := pre_loaded_with_all_messages_vlsm X)
  {Hobservable_messages :
    @composite_vlsm_observable_messages _ _ _ decide_eq happens_before happens_before_dec _ decide_eq
    index_listing IM Hevidence i0 constraint}
.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">unforgeable_messages</span>
  :=
  {
<span class="sd">(**</span>
<span class="sd">We&#39;ll also assume a weak form of [unforgeability]: that a machine can only</span>
<span class="sd">produce events for its own validator; for other validators it can only</span>
<span class="sd">gather information through the messages it receives.</span>
<span class="sd">*)</span>
    sent_messages_unforgeability
      (s s&#39; : vstate X)
      (om om&#39; : option message)
      (l : label)
      (Ht : protocol_transition X l (s, om) (s&#39;, om&#39;))
      (i := projT1 l)
      (v : validator)
      (Hv : A v &lt;&gt; i)
      : incl
        (observable_events (s&#39; i) v)
        (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events index_listing IM Hevidence i0 constraint om v)
        );
  }.</span></span></span></pre><div class="doc">
<a id="lab8"></a><h3 class="section">On stating unforgeability for received messages</h3>
<div class="paragraph"> </div>

We'd like to argue here that it's not actually possible to state a similar
property for received messages. In fact, we argue that it is not possible
to require anything more from the received messages than what we already
know, i.e., that the message was produced in an alternative protocol trace.

<div class="paragraph"> </div>

The reason for the above affirmation is that we can assume that all the
nodes from the current protocol run which don't behave as in the protocol
run generating the message are in fact equivocating and there is a fork of
them behaving such as to guarantee the production of the message.

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">Hunforge</span> : unforgeable_messages}.</span></span></span></pre><div class="doc">
If a new event is <span class="inlinecode"><span class="id" title="var">trace_generated_event</span></span> for a validator, then it must be
that it's generated by the machine corresponding to that validator.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b4" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b4"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">trace_generated_index</span>
  (<span class="nv">is</span> : vstate X)
  (<span class="nv">tr</span> : list (vtransition_item X))
  (<span class="nv">Htr</span> : finite_protocol_trace X <span class="kr">is</span> tr)
  (<span class="nv">v</span> : validator)
  (<span class="nv">e</span> : event)
  (<span class="nv">prefix</span> <span class="nv">suffix</span> : list transition_item)
  (<span class="nv">item</span> : transition_item)
  (<span class="nv">Heq</span> : tr = prefix ++ [item] ++ suffix)
  (<span class="nv">i</span> := projT1 (l item))
  (<span class="nv">s</span> := <span class="nb">last</span> (map destination prefix) <span class="kr">is</span>)
  (<span class="nv">s&#39;</span> := destination item)
  (<span class="nv">He</span> : In e
      (set_diff decide_eq
        (observable_events (s&#39; i) v)
        (set_union decide_eq
          (observable_events (s i) v)
          (option_message_observable_events index_listing IM Hevidence i0 constraint (input item) v)
        )
      )
  )
  : A v = i.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           index_listing IM Hevidence i0
           constraint (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b5" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b5"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           index_listing IM Hevidence i0
           constraint (input item) v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b6" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b6"><span class="highlight"><span class="nb">destruct</span> (decide ((A v) = i)); <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           index_listing IM Hevidence i0
           constraint (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b7" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b7"><span class="highlight"><span class="nb">specialize</span> (protocol_transition_to X <span class="kr">is</span> item tr prefix suffix Heq (proj1 Htr)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           index_listing IM Hevidence i0
           constraint (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> <span class="nv">prev_state</span> := <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
 protocol_transition X (l item)
   (prev_state, input item)
   (destination item, output item)) -&gt; A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b8" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b8"><span class="highlight"><span class="nb">intro</span> Hpt.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           index_listing IM Hevidence i0
           constraint (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">prev_state</span> :=
  <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
protocol_transition X (l item)
  (prev_state, input item)
  (destination item, output item)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1b9" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1b9"><span class="highlight"><span class="nb">specialize</span> (sent_messages_unforgeability s s&#39; (input item) (output item) (l item) Hpt v n) <span class="kr">as</span> Hincl.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_diff decide_eq
     (observable_events (s&#39; i) v)
     (set_union decide_eq
        (observable_events (s i) v)
        (option_message_observable_events
           index_listing IM Hevidence i0
           constraint (input item) v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">prev_state</span> :=
  <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
protocol_transition X (l item)
  (prev_state, input item)
  (destination item, output item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl
  (observable_events (s&#39; (projT1 (l item))) v)
  (set_union decide_eq
     (observable_events 
        (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0
        constraint (input item) v))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1ba" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1ba"><span class="highlight"><span class="nb">apply</span> set_diff_iff <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v) /\
~
In e
  (set_union decide_eq
     (observable_events (s i) v)
     (option_message_observable_events
        index_listing IM Hevidence i0 constraint
        (input item) v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">prev_state</span> :=
  <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
protocol_transition X (l item)
  (prev_state, input item)
  (destination item, output item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl
  (observable_events (s&#39; (projT1 (l item))) v)
  (set_union decide_eq
     (observable_events 
        (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0
        constraint (input item) v))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1bb" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1bb"><span class="highlight"><span class="nb">destruct</span> He <span class="kr">as</span> [He Hne].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e (observable_events (s&#39; i) v)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (set_union decide_eq
     (observable_events (s i) v)
     (option_message_observable_events
        index_listing IM Hevidence i0 constraint
        (input item) v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">prev_state</span> :=
  <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
protocol_transition X (l item)
  (prev_state, input item)
  (destination item, output item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl
  (observable_events (s&#39; (projT1 (l item))) v)
  (set_union decide_eq
     (observable_events 
        (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0
        constraint (input item) v))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1bc" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1bc"><span class="highlight"><span class="nb">apply</span> Hincl <span class="kr">in</span> He.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_union decide_eq
     (observable_events (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0 constraint
        (input item) v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (set_union decide_eq
     (observable_events (s i) v)
     (option_message_observable_events
        index_listing IM Hevidence i0 constraint
        (input item) v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">prev_state</span> :=
  <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
protocol_transition X (l item)
  (prev_state, input item)
  (destination item, output item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl
  (observable_events (s&#39; (projT1 (l item))) v)
  (set_union decide_eq
     (observable_events 
        (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0
        constraint (input item) v))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">A v = i</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="ObservableEquivocation-v-chk1bd" style="display: none" type="checkbox"><label class="coq-input" for="ObservableEquivocation-v-chk1bd"><span class="highlight"><span class="nb">elim</span> Hne.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, validator, event</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event -&gt; event -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">happens_before_dec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">RelDecision happens_before</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">EqDecision1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hevidence</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
observation_based_equivocation_evidence
  (vstate (IM i)) validator event
  decide_eq happens_before
  happens_before_dec</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator -&gt; index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM i0 constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hobservable_messages</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_vlsm_observable_messages
  index_listing IM Hevidence i0
  constraint</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hunforge</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">unforgeable_messages</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (vtransition_item X)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">validator</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">event</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">prefix, suffix</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = prefix ++ [item] ++ suffix</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight"><span class="nb">last</span> (map destination prefix) <span class="kr">is</span></span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">destination item</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">He</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In e
  (set_union decide_eq
     (observable_events (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0 constraint
        (input item) v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
In e
  (set_union decide_eq
     (observable_events (s i) v)
     (option_message_observable_events
        index_listing IM Hevidence i0 constraint
        (input item) v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A v &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">prev_state</span> :=
  <span class="nb">last</span> (map destination prefix) <span class="kr">is</span> <span class="kr">in</span>
protocol_transition X (l item)
  (prev_state, input item)
  (destination item, output item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">incl
  (observable_events (s&#39; (projT1 (l item))) v)
  (set_union decide_eq
     (observable_events 
        (s (projT1 (l item))) v)
     (option_message_observable_events
        index_listing IM Hevidence i0
        constraint (input item) v))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In e
  (set_union decide_eq (observable_events (s i) v)
     (option_message_observable_events index_listing
        IM Hevidence i0 constraint (input item) v))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">unforgeable_messages</span>.</span></span></span></pre></article></body></html>
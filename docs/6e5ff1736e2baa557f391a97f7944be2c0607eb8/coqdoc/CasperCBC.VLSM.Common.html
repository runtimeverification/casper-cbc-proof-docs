<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"><script>document.write("<a href='" + document.title + ".svg'>" + document.title + "</a>")</script></span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Nat.html#"><span class="id" title="library">Nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#"><span class="id" title="library">RelationClasses</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#"><span class="id" title="library">Lib.ListExtras</span></a> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#"><span class="id" title="library">Lib.StreamExtras</span></a>.<br/>

<br/>
</div>

<div class="doc">
This module provides basic VLSM infrastructure

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab1"></a><h1 class="section">VLSM definition</h1>


<div class="paragraph"> </div>

<a id="lab2"></a><h2 class="section">The type of a VLSM</h2>


<div class="paragraph"> </div>

The type of a VLSM is a triple consisting of the undelying types of
messages, states, and labels.

<div class="paragraph"> </div>

In Coq it is defined as a Class taking <tt>message</tt> as parameter and having
<span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> as fields.  <tt>message</tt> is a parameter to allow it to be
easily shared by multiple VLSMs during composition.

<div class="paragraph"> </div>


</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="VLSM_type" class="idref" href="#VLSM_type"><span class="id" title="record">VLSM_type</span></a> (<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="state" class="idref" href="#state"><span class="id" title="projection">state</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="label" class="idref" href="#label"><span class="id" title="projection">label</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab3"></a><h2 class="section">The signature of a VLSM</h2>


<div class="paragraph"> </div>

Although the VLSM definition does not single out the notion of a VLSM
signature, we find it convenient to extract it as the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span> class.

<div class="paragraph"> </div>

The <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span> class is parameterized by a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span> and defines properties
for initial states (<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>) and initial messages
(<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>), from which we can immediately define the dependent
types <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> (as <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span>s having the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>erty) and
<span class="inlinecode"><span class="id" title="var">intial_message</span></span> (as <tt>message</tt>s having the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>erty).

<div class="paragraph"> </div>

Additionally, <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span> requires the identification of an <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a></span>,
a <tt>message</tt> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="projection">m0</span></a></span>, and a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="projection">l0</span></a></span> to ensure the non-emptiness of the
corresponding sets.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="VLSM_sign" class="idref" href="#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a> {<a id="message:5" class="idref" href="#message:5"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} (<a id="vtype:6" class="idref" href="#vtype:6"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="initial_state_prop" class="idref" href="#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">initial_state</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:9" class="idref" href="#s:9"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop:8"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:9"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="initial_message_prop" class="idref" href="#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">initial_message</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="m:12" class="idref" href="#m:12"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop:11"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:12"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="s0" class="idref" href="#s0"><span class="id" title="projection">s0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state:10"><span class="id" title="method">initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="m0" class="idref" href="#m0"><span class="id" title="projection">m0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="l0" class="idref" href="#l0"><span class="id" title="projection">l0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="option_initial_message_prop" class="idref" href="#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:17" class="idref" href="#message:17"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:18" class="idref" href="#vtype:18"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:17"><span class="id" title="variable">message</span></a>} {<a id="sign:19" class="idref" href="#sign:19"><span class="id" title="binder">sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:18"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:20" class="idref" href="#om:20"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:17"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#om:20"><span class="id" title="variable">om</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_sign_pre_loaded_with_messages" class="idref" href="#VLSM_sign_pre_loaded_with_messages"><span class="id" title="definition">VLSM_sign_pre_loaded_with_messages</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:22" class="idref" href="#message:22"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:23" class="idref" href="#vtype:23"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:22"><span class="id" title="variable">message</span></a>} (<a id="sign:24" class="idref" href="#sign:24"><span class="id" title="binder">sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:23"><span class="id" title="variable">vtype</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="initial:25" class="idref" href="#initial:25"><span class="id" title="binder">initial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:22"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:23"><span class="id" title="variable">vtype</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="m:26" class="idref" href="#m:26"><span class="id" title="binder">m</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#m:26"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial:25"><span class="id" title="variable">initial</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:26"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decidable_initial_messages_prop" class="idref" href="#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:27" class="idref" href="#message:27"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:28" class="idref" href="#vtype:28"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:27"><span class="id" title="variable">message</span></a>} (<a id="sign:29" class="idref" href="#sign:29"><span class="id" title="binder">sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:28"><span class="id" title="variable">vtype</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span> <a id="m:30" class="idref" href="#m:30"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.Lib.Classes.html#Decision"><span class="id" title="class">Decision</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:30"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab4"></a><h2 class="section">VLSM class definition</h2>


<div class="paragraph"> </div>

Given a V<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span>nature, a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> is defined by providing a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span>
function and a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>ity condition.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="VLSM_class" class="idref" href="#VLSM_class"><span class="id" title="record">VLSM_class</span></a> {<a id="message:31" class="idref" href="#message:31"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:32" class="idref" href="#vtype:32"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a>} (<a id="lsm:33" class="idref" href="#lsm:33"><span class="id" title="binder">lsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:32"><span class="id" title="variable">vtype</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="transition" class="idref" href="#transition"><span class="id" title="projection">transition</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="valid" class="idref" href="#valid"><span class="id" title="projection">valid</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_class_pre_loaded_with_messages" class="idref" href="#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:37" class="idref" href="#message:37"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:38" class="idref" href="#vtype:38"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:37"><span class="id" title="variable">message</span></a>} {<a id="lsm:39" class="idref" href="#lsm:39"><span class="id" title="binder">lsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:38"><span class="id" title="variable">vtype</span></a>} (<a id="vlsm:40" class="idref" href="#vlsm:40"><span class="id" title="binder">vlsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#lsm:39"><span class="id" title="variable">lsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="initial:41" class="idref" href="#initial:41"><span class="id" title="binder">initial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:37"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign_pre_loaded_with_messages"><span class="id" title="definition">VLSM_sign_pre_loaded_with_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#lsm:39"><span class="id" title="variable">lsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial:41"><span class="id" title="variable">initial</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm:40"><span class="id" title="variable">vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm:40"><span class="id" title="variable">vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="definition">VLSM</span></a> (<a id="message:42" class="idref" href="#message:42"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a> (<span class="id" title="keyword">fun</span> <a id="T:43" class="idref" href="#T:43"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:42"><span class="id" title="variable">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a> (<span class="id" title="keyword">fun</span> <a id="S:44" class="idref" href="#S:44"><span class="id" title="binder">S</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#T:43"><span class="id" title="variable">T</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#S:44"><span class="id" title="variable">S</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="mk_vlsm" class="idref" href="#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:45" class="idref" href="#message:45"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="T:46" class="idref" href="#T:46"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:45"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="S:47" class="idref" href="#S:47"><span class="id" title="binder">S</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#T:46"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M:48" class="idref" href="#M:48"><span class="id" title="binder">M</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#S:47"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:45"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#T:46"><span class="id" title="variable">T</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#S:47"><span class="id" title="variable">S</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#M:48"><span class="id" title="variable">M</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_vlsm" class="idref" href="#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:49" class="idref" href="#message:49"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:50" class="idref" href="#X:50"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:49"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="initial:51" class="idref" href="#initial:51"><span class="id" title="binder">initial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:49"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:49"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="M:52" class="idref" href="#M:52"><span class="id" title="binder">M</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:50"><span class="id" title="variable">X</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="M':53" class="idref" href="#M':53"><span class="id" title="binder">M'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#M:52"><span class="id" title="variable">M</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial:51"><span class="id" title="variable">initial</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#M':53"><span class="id" title="variable">M'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Traces" class="idref" href="#Traces"><span class="id" title="section">Traces</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:54" class="idref" href="#message:54"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="T:55" class="idref" href="#T:55"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:54"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h1 class="section">Traces</h1>


<div class="paragraph"> </div>

We introduce the concept of a trace to formalize an execution of the protocol.
It is abstracted as a pair <tt>(start, steps)</tt> where <tt>start</tt> is a state
and <tt>steps</tt> is a tuple of objects which fully describe the transitions
underwent during execution. Notably, <tt>steps</tt> might be infinite.

<div class="paragraph"> </div>

In Coq, we can define these objects (which we name <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s) as consisting of:
<ul class="doclist">
<li> the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a></span>

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a></span> <tt>message</tt>
<div class="paragraph"> </div>


</li>
<li> the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> of the transition

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a></span> <tt>message</tt> generated by the transition

<div class="paragraph"> </div>


</li>
</ul>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="transition_item" class="idref" href="#transition_item"><span class="id" title="record">transition_item</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{   <a id="l" class="idref" href="#l"><span class="id" title="projection">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="input" class="idref" href="#input"><span class="id" title="projection">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="destination" class="idref" href="#destination"><span class="id" title="projection">destination</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="output" class="idref" href="#output"><span class="id" title="projection">output</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="field_selector" class="idref" href="#field_selector"><span class="id" title="definition">field_selector</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="field:61" class="idref" href="#field:61"><span class="id" title="binder">field</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a> <a id="item:63" class="idref" href="#item:63"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#field:61"><span class="id" title="variable">field</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:63"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:62"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="item_sends_or_receives" class="idref" href="#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="m:64" class="idref" href="#m:64"><span class="id" title="binder">m</span></a> <a id="item:65" class="idref" href="#item:65"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:65"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:64"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:65"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:64"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_has_message" class="idref" href="#trace_has_message"><span class="id" title="definition">trace_has_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="message_selector:66" class="idref" href="#message_selector:66"><span class="id" title="binder">message_selector</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="msg:67" class="idref" href="#msg:67"><span class="id" title="binder">msg</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:68" class="idref" href="#tr:68"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#message_selector:66"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:67"><span class="id" title="variable">msg</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:68"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
</div>

<div class="doc">
'proto_run's are used for an alternative definition of 'protocol_prop' which
  takes into account transitions. See 'vlsm_run_prop'.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="proto_run" class="idref" href="#proto_run"><span class="id" title="record">proto_run</span></a> : <span class="id" title="keyword">Type</span> := <a id="mk_proto_run" class="idref" href="#mk_proto_run"><span class="id" title="constructor">mk_proto_run</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="start" class="idref" href="#start"><span class="id" title="projection">start</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a id="transitions" class="idref" href="#transitions"><span class="id" title="projection">transitions</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a id="final" class="idref" href="#final"><span class="id" title="projection">final</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Trace" class="idref" href="#Trace"><span class="id" title="inductive">Trace</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="Finite" class="idref" href="#Finite"><span class="id" title="constructor">Finite</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Trace:73"><span class="id" title="inductive">Trace</span></a><br/>
&nbsp;&nbsp;| <a id="Infinite" class="idref" href="#Infinite"><span class="id" title="constructor">Infinite</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Trace:73"><span class="id" title="inductive">Trace</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_first" class="idref" href="#trace_first"><span class="id" title="definition">trace_first</span></a> (<a id="tr:75" class="idref" href="#tr:75"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:75"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_last" class="idref" href="#trace_last"><span class="id" title="definition">trace_last</span></a> (<a id="tr:77" class="idref" href="#tr:77"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:77"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">ls</span>) <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="last_error_destination_last" class="idref" href="#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:79" class="idref" href="#tr:79"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:80" class="idref" href="#s:80"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hlast:81" class="idref" href="#Hlast:81"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:79"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:80"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="default:82" class="idref" href="#default:82"><span class="id" title="binder">default</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:79"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#default:82"><span class="id" title="variable">default</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:80"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="var">tr</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_map"><span class="id" title="lemma">last_map</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces"><span class="id" title="section">Traces</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">_</span> <span class="id" title="var">msg</span> <span class="id" title="var">item</span> / .<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> {<span class="id" title="var">message</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">msg</span> <span class="id" title="var">item</span> /.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="vlsm_projections" class="idref" href="#vlsm_projections"><span class="id" title="section">vlsm_projections</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:83" class="idref" href="#message:83"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="vlsm:84" class="idref" href="#vlsm:84"><span class="id" title="binder">vlsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:83"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

Given a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>, it is convenient to be able to retrieve its V<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span>nature
or <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span>. Functions <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a></span> and <span class="inlinecode"><span class="id" title="keyword">type</span></span> below achieve this precise purpose.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="type" class="idref" href="#type"><span class="id" title="definition">type</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sign" class="idref" href="#sign"><span class="id" title="definition">sign</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="machine" class="idref" href="#machine"><span class="id" title="definition">machine</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vstate" class="idref" href="#vstate"><span class="id" title="definition">vstate</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vlabel" class="idref" href="#vlabel"><span class="id" title="definition">vlabel</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_state_prop" class="idref" href="#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_state" class="idref" href="#vinitial_state"><span class="id" title="definition">vinitial_state</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_message_prop" class="idref" href="#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="voption_initial_message_prop" class="idref" href="#voption_initial_message_prop"><span class="id" title="definition">voption_initial_message_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_message" class="idref" href="#vinitial_message"><span class="id" title="definition">vinitial_message</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message"><span class="id" title="method">initial_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vs0" class="idref" href="#vs0"><span class="id" title="definition">vs0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vm0" class="idref" href="#vm0"><span class="id" title="definition">vm0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vl0" class="idref" href="#vl0"><span class="id" title="definition">vl0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vdecidable_initial_messages_prop" class="idref" href="#vdecidable_initial_messages_prop"><span class="id" title="definition">vdecidable_initial_messages_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vtransition" class="idref" href="#vtransition"><span class="id" title="definition">vtransition</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vvalid" class="idref" href="#vvalid"><span class="id" title="definition">vvalid</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vtransition_item" class="idref" href="#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vTrace" class="idref" href="#vTrace"><span class="id" title="definition">vTrace</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vproto_run" class="idref" href="#vproto_run"><span class="id" title="definition">vproto_run</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#proto_run"><span class="id" title="record">proto_run</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections"><span class="id" title="section">vlsm_projections</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mk_vlsm_machine" class="idref" href="#mk_vlsm_machine"><span class="id" title="lemma">mk_vlsm_machine</span></a><br/>
&nbsp;&nbsp;{<a id="message:85" class="idref" href="#message:85"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:86" class="idref" href="#X:86"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:85"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:86"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:86"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)). <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="section">VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

In this section we assume a fixed <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:87" class="idref" href="#message:87"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:88" class="idref" href="#X:88"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:87"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="TypeX:89" class="idref" href="#TypeX:89"><span class="id" title="binder">TypeX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:88"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="SignX:90" class="idref" href="#SignX:90"><span class="id" title="binder">SignX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:88"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MachineX:91" class="idref" href="#MachineX:91"><span class="id" title="binder">MachineX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:88"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">TypeX</span>.<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">SignX</span>.<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">MachineX</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab6"></a><h2 class="section">Protocol states and messages</h2>


<div class="paragraph"> </div>

We further characterize certain objects as being <i>protocol</i>, which means they can
be witnessed or experienced during executions of the protocol. For example,
a message is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span> if there exists an execution of the protocol
in which it is produced.

<div class="paragraph"> </div>

We choose here to define protocol states and messages together as the
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> property, inductively defined over the
<span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> <span class="inlinecode">*</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#message"><span class="id" title="inductive">message</span></a></span> product type,
as this definition avoids the need of using a mutually recursive definition.

<div class="paragraph"> </div>

The inductive definition has three cases:
<ul class="doclist">
<li> if <tt>s</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> with the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>erty, then <tt>(s, None)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

</li>
<li> if <tt>m</tt> is a <tt>message</tt> with the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>erty, then <tt>(</tt><span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span><tt>m)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

</li>
<li> for all <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span>s <tt>s</tt>, <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span>al <tt>message</tt> <tt>om</tt>,
  and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> <tt>l</tt>:

<div class="paragraph"> </div>

  if there is an (optional) <tt>message</tt> <tt>_om</tt> such that <tt>(s, _om)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

<div class="paragraph"> </div>

  and if there is a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> <tt>_s</tt> such that <tt>(_s, om)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

<div class="paragraph"> </div>

  and if <tt>l</tt> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span> <tt>(s, om)</tt>,

<div class="paragraph"> </div>

  then <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span> <tt>l (s, om)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty.

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="protocol_prop" class="idref" href="#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="protocol_initial" class="idref" href="#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:94" class="idref" href="#s:94"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:95" class="idref" href="#Hs:95"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:94"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:96" class="idref" href="#om:96"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hom:97" class="idref" href="#Hom:97"><span class="id" title="binder">Hom</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:96"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:92"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:94"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:96"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="protocol_generated" class="idref" href="#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:98" class="idref" href="#l:98"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:99" class="idref" href="#s:99"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_om:100" class="idref" href="#_om:100"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:101" class="idref" href="#Hps:101"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:92"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:99"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#_om:100"><span class="id" title="variable">_om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_s:102" class="idref" href="#_s:102"><span class="id" title="binder">_s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:103" class="idref" href="#om:103"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:104" class="idref" href="#Hpm:104"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:92"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#_s:102"><span class="id" title="variable">_s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:103"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:105" class="idref" href="#Hv:105"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:98"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:99"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:103"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:92"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:98"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:99"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:103"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_initial_state" class="idref" href="#protocol_initial_state"><span class="id" title="definition">protocol_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<a id="s:106" class="idref" href="#s:106"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>] (<a id="Hs:107" class="idref" href="#Hs:107"><span class="id" title="binder">Hs</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:106"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:106"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:106"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Hs:107"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

The <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span>erty and the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a></span>erty are now
definable as simple projections of the above definition.

<div class="paragraph"> </div>

Moreover, we use these derived properties to define the corresponding
dependent types <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_state_prop" class="idref" href="#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a id="s:108" class="idref" href="#s:108"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="om:109" class="idref" href="#om:109"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:108"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:109"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_message_prop" class="idref" href="#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> (<a id="m:110" class="idref" href="#m:110"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:111" class="idref" href="#s:111"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:111"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:110"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_state" class="idref" href="#protocol_state"><span class="id" title="definition">protocol_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:112" class="idref" href="#s:112"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:112"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_message" class="idref" href="#protocol_message"><span class="id" title="definition">protocol_message</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="m:113" class="idref" href="#m:113"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:113"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="initial_is_protocol" class="idref" href="#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:114" class="idref" href="#s:114"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitial:115" class="idref" href="#Hinitial:115"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:114"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:114"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="initial_message_is_protocol" class="idref" href="#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:116" class="idref" href="#m:116"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitial:117" class="idref" href="#Hinitial:117"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:116"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:116"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As often times we work with optional protocol messages, it is convenient
to define a protocol message property for optional messages:

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="option_protocol_message_prop" class="idref" href="#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> (<a id="om:118" class="idref" href="#om:118"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:119" class="idref" href="#s:119"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:119"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:118"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="option_protocol_message_None" class="idref" href="#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="option_protocol_message_Some" class="idref" href="#option_protocol_message_Some"><span class="id" title="lemma">option_protocol_message_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:120" class="idref" href="#m:120"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:121" class="idref" href="#Hpm:121"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:120"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:120"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hpm</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="option_initial_message_is_protocol" class="idref" href="#option_initial_message_is_protocol"><span class="id" title="lemma">option_initial_message_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:122" class="idref" href="#om:122"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitial:123" class="idref" href="#Hinitial:123"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:122"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:122"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_Some"><span class="id" title="lemma">option_protocol_message_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab7"></a><h2 class="section">Protocol validity and protocol transitions</h2>


<div class="paragraph"> </div>

To achieve this, it is useful to further define <i>protocol</i> validity and
<i>protocol</i> transitions:

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_valid" class="idref" href="#protocol_valid"><span class="id" title="definition">protocol_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:124" class="idref" href="#l:124"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:125" class="idref" href="#som:125"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:126" class="idref" href="#s:126"><span class="id" title="binder">s</span></a>, <a id="om:127" class="idref" href="#om:127"><span class="id" title="binder">om</span></a>) := <a class="idref" href="CasperCBC.VLSM.Common.html#som:125"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:126"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:127"><span class="id" title="variable">om</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:124"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:126"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:127"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_transition" class="idref" href="#protocol_transition"><span class="id" title="definition">protocol_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:128" class="idref" href="#l:128"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:129" class="idref" href="#som:129"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som':130" class="idref" href="#som':130"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:128"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:129"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:128"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:129"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':130"><span class="id" title="variable">som'</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_transition_preserving" class="idref" href="#protocol_transition_preserving"><span class="id" title="definition">protocol_transition_preserving</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:131" class="idref" href="#R:131"><span class="id" title="binder">R</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:132" class="idref" href="#s1:132"><span class="id" title="binder">s1</span></a> <a id="s2:133" class="idref" href="#s2:133"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:134" class="idref" href="#l:134"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om1:135" class="idref" href="#om1:135"><span class="id" title="binder">om1</span></a> <a id="om2:136" class="idref" href="#om2:136"><span class="id" title="binder">om2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hprotocol:137" class="idref" href="#Hprotocol:137"><span class="id" title="binder">Hprotocol</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:134"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s1:132"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om1:135"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s2:133"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om2:136"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#R:131"><span class="id" title="variable">R</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:132"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:133"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Next three lemmas show the two definitions above are strongly related.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_valid" class="idref" href="#protocol_transition_valid"><span class="id" title="lemma">protocol_transition_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:138" class="idref" href="#l:138"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:139" class="idref" href="#som:139"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som':140" class="idref" href="#som':140"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:141" class="idref" href="#Ht:141"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:138"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:139"><span class="id" title="variable">som</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':140"><span class="id" title="variable">som'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:138"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:139"><span class="id" title="variable">som</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpv</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_valid_transition" class="idref" href="#protocol_valid_transition"><span class="id" title="lemma">protocol_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:142" class="idref" href="#l:142"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:143" class="idref" href="#som:143"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:144" class="idref" href="#Hv:144"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:142"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:143"><span class="id" title="variable">som</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som':145" class="idref" href="#som':145"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:142"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:143"><span class="id" title="variable">som</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':145"><span class="id" title="variable">som'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l</span> <span class="id" title="var">som</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_valid_transition_iff" class="idref" href="#protocol_valid_transition_iff"><span class="id" title="lemma">protocol_valid_transition_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:146" class="idref" href="#l:146"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:147" class="idref" href="#som:147"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:146"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:147"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som':148" class="idref" href="#som':148"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:146"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:147"><span class="id" title="variable">som</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':148"><span class="id" title="variable">som'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid_transition"><span class="id" title="lemma">protocol_valid_transition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som'</span> <span class="id" title="var">Hpt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_valid"><span class="id" title="lemma">protocol_transition_valid</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">som'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

The next couple of lemmas relate the two definitions above with
pre-existing concepts.

<div class="paragraph"> </div>


</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_generated_valid" class="idref" href="#protocol_generated_valid"><span class="id" title="lemma">protocol_generated_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:149" class="idref" href="#l:149"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:150" class="idref" href="#s:150"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="_om:151" class="idref" href="#_om:151"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="_s:152" class="idref" href="#_s:152"><span class="id" title="binder">_s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:153" class="idref" href="#om:153"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:154" class="idref" href="#Hps:154"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:150"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#_om:151"><span class="id" title="variable">_om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:155" class="idref" href="#Hpm:155"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#_s:152"><span class="id" title="variable">_s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:153"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:156" class="idref" href="#Hv:156"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:149"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:150"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:153"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:149"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:150"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:153"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_origin" class="idref" href="#protocol_transition_origin"><span class="id" title="lemma">protocol_transition_origin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:157" class="idref" href="#l:157"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:158" class="idref" href="#s:158"><span class="id" title="binder">s</span></a> <a id="s':159" class="idref" href="#s':159"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:160" class="idref" href="#om:160"><span class="id" title="binder">om</span></a> <a id="om':161" class="idref" href="#om':161"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:162" class="idref" href="#Ht:162"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:157"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:158"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:160"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':159"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om':161"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:158"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>] <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_destination" class="idref" href="#protocol_transition_destination"><span class="id" title="lemma">protocol_transition_destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:163" class="idref" href="#l:163"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:164" class="idref" href="#s:164"><span class="id" title="binder">s</span></a> <a id="s':165" class="idref" href="#s':165"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:166" class="idref" href="#om:166"><span class="id" title="binder">om</span></a> <a id="om':167" class="idref" href="#om':167"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:168" class="idref" href="#Ht:168"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:163"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:164"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:166"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':165"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':167"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':165"><span class="id" title="variable">s'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_in" class="idref" href="#protocol_transition_in"><span class="id" title="lemma">protocol_transition_in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:169" class="idref" href="#l:169"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:170" class="idref" href="#s:170"><span class="id" title="binder">s</span></a> <a id="s':171" class="idref" href="#s':171"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:172" class="idref" href="#om:172"><span class="id" title="binder">om</span></a> <a id="om':173" class="idref" href="#om':173"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:174" class="idref" href="#Ht:174"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:169"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:170"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:172"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':171"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':173"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:172"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">_</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_transition_out" class="idref" href="#protocol_prop_transition_out"><span class="id" title="lemma">protocol_prop_transition_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:175" class="idref" href="#l:175"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:176" class="idref" href="#s:176"><span class="id" title="binder">s</span></a> <a id="s':177" class="idref" href="#s':177"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:178" class="idref" href="#om:178"><span class="id" title="binder">om</span></a> <a id="om':179" class="idref" href="#om':179"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:180" class="idref" href="#Ht:180"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:175"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:176"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:178"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':177"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':179"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':177"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':179"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_out" class="idref" href="#protocol_transition_out"><span class="id" title="lemma">protocol_transition_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:181" class="idref" href="#l:181"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:182" class="idref" href="#s:182"><span class="id" title="binder">s</span></a> <a id="s':183" class="idref" href="#s':183"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:184" class="idref" href="#om:184"><span class="id" title="binder">om</span></a> <a id="om':185" class="idref" href="#om':185"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:186" class="idref" href="#Ht:186"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:181"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:182"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:184"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':183"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':185"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':185"><span class="id" title="variable">om'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_transition_out"><span class="id" title="lemma">protocol_prop_transition_out</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_is_valid" class="idref" href="#protocol_transition_is_valid"><span class="id" title="lemma">protocol_transition_is_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:187" class="idref" href="#l:187"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:188" class="idref" href="#s:188"><span class="id" title="binder">s</span></a> <a id="s':189" class="idref" href="#s':189"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:190" class="idref" href="#om:190"><span class="id" title="binder">om</span></a> <a id="om':191" class="idref" href="#om':191"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:192" class="idref" href="#Ht:192"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:188"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:190"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':189"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':191"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:188"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:190"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_transition" class="idref" href="#protocol_transition_transition"><span class="id" title="lemma">protocol_transition_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:193" class="idref" href="#l:193"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:194" class="idref" href="#s:194"><span class="id" title="binder">s</span></a> <a id="s':195" class="idref" href="#s':195"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:196" class="idref" href="#om:196"><span class="id" title="binder">om</span></a> <a id="om':197" class="idref" href="#om':197"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:198" class="idref" href="#Ht:198"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:193"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:194"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:196"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':195"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':197"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:193"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:194"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:196"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':195"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':197"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_valid_out" class="idref" href="#protocol_prop_valid_out"><span class="id" title="lemma">protocol_prop_valid_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:199" class="idref" href="#l:199"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:200" class="idref" href="#s:200"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:201" class="idref" href="#om:201"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:202" class="idref" href="#Hv:202"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:199"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:200"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:201"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:199"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:200"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:201"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid_transition"><span class="id" title="lemma">protocol_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">s'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_transition"><span class="id" title="lemma">protocol_transition_transition</span></a>  <span class="id" title="var">Ht</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_transition_out"><span class="id" title="lemma">protocol_prop_transition_out</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For VLSMs initialized with many initial messages such as
    the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a></span> or the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span>,
    the question of whether a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <tt>m</tt> becomes more
    useful than that whether <tt>m</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_generated_prop" class="idref" href="#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:203" class="idref" href="#s:203"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:204" class="idref" href="#m:204"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:205" class="idref" href="#som:205"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:206" class="idref" href="#l:206"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:206"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:205"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:203"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:204"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Of course, if a VLSM <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> <tt>(s,m)</tt>, then <tt>(s,m)</tt> is protocol.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_generated_prop_protocol" class="idref" href="#protocol_generated_prop_protocol"><span class="id" title="lemma">protocol_generated_prop_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:207" class="idref" href="#s:207"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:208" class="idref" href="#m:208"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hm:209" class="idref" href="#Hm:209"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:207"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:208"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:207"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:208"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">s0</span>, <span class="id" title="var">om0</span>) [<span class="id" title="var">l</span> [[[<span class="id" title="var">_om0</span> <span class="id" title="var">Hs0</span>] [[<span class="id" title="var">_s0</span> <span class="id" title="var">Hom0</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om0</span> <span class="id" title="var">_s0</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="can_emit" class="idref" href="#can_emit"><span class="id" title="definition">can_emit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:210" class="idref" href="#m:210"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:211" class="idref" href="#som:211"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:212" class="idref" href="#l:212"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:213" class="idref" href="#s:213"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:212"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:211"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:213"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:210"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_iff" class="idref" href="#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:214" class="idref" href="#m:214"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:214"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:215" class="idref" href="#s:215"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:215"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:214"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ht</span>]]]. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <span class="id" title="var">som</span>, <span class="id" title="var">l</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> <span class="id" title="var">Ht</span>]]]. <span class="id" title="tactic">exists</span> <span class="id" title="var">som</span>, <span class="id" title="var">l</span>, <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a VLSM <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <tt>m</tt>, then <tt>m</tt> is protocol.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_protocol" class="idref" href="#can_emit_protocol"><span class="id" title="lemma">can_emit_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:216" class="idref" href="#m:216"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hm:217" class="idref" href="#Hm:217"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:216"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:216"><span class="id" title="variable">m</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop_protocol"><span class="id" title="lemma">protocol_generated_prop_protocol</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A characterization of protocol messages in terms of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span>
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_protocol_iff" class="idref" href="#can_emit_protocol_iff"><span class="id" title="lemma">can_emit_protocol_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:218" class="idref" href="#m:218"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:218"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:218"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:218"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Him</span> | <span class="id" title="var">Hem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit_protocol"><span class="id" title="lemma">can_emit_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab8"></a><h2 class="section">Protocol state and protocol message characterization</h2>


<div class="paragraph"> </div>

The definition and results below show that the mutually-recursive definitions
for <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span>s and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>s can be derived from the
prior definitions.

<div class="paragraph"> </div>

The results below offers equivalent characterizations for <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span>s
and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>s, similar to their recursive definition.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_state_prop_iff" class="idref" href="#protocol_state_prop_iff"><span class="id" title="lemma">protocol_state_prop_iff</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="s':219" class="idref" href="#s':219"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':219"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is:220" class="idref" href="#is:220"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':219"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:220"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:221" class="idref" href="#l:221"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="som:222" class="idref" href="#som:222"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="om':223" class="idref" href="#om':223"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:221"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:222"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':219"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':223"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om'</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs0</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">om'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>; [<span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A specialized induction principle for <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span>.

<div class="paragraph"> </div>

        Compared to opening the existential and using <span class="inlinecode"><span class="id" title="var">protocol_prop_ind</span></span>,
        this avoids the redundancy of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="definition">protocol_initial_state</span></a></span> case
        needing a proof for any <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> and then <span class="inlinecode"><span class="id" title="var">protocol_initial_message</span></span>
        asking for a proof specifically for <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a></span>, and also avoids the
        little trouble of needing <tt>set</tt> or <tt>dependent induction</tt> to
        handle the pair in the index in <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> <span class="inlinecode">(<span class="id" title="var">s</span>,<span class="id" title="var">om</span>)</span>.
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_state_prop_ind" class="idref" href="#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:224" class="idref" href="#P:224"><span class="id" title="binder">P</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHinit:227" class="idref" href="#IHinit:227"><span class="id" title="binder">IHinit</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:225" class="idref" href="#s:225"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="Hs:226" class="idref" href="#Hs:226"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:225"><span class="id" title="variable">s</span></a>), <a class="idref" href="CasperCBC.VLSM.Common.html#P:224"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:225"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHgen:235" class="idref" href="#IHgen:235"><span class="id" title="binder">IHgen</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s':228" class="idref" href="#s':228"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="l:229" class="idref" href="#l:229"><span class="id" title="binder">l</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="om:230" class="idref" href="#om:230"><span class="id" title="binder">om</span></a> <a id="om':231" class="idref" href="#om':231"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s:232" class="idref" href="#s:232"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:233" class="idref" href="#Ht:233"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:229"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:232"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:230"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':228"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':231"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a id="Hs:234" class="idref" href="#Hs:234"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#P:224"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:232"><span class="id" title="variable">s</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#P:224"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':228"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> (<a id="s:236" class="idref" href="#s:236"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="Hs:237" class="idref" href="#Hs:237"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:236"><span class="id" title="variable">s</span></a>), <a class="idref" href="CasperCBC.VLSM.Common.html#P:224"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:236"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">som</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">om</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqsom</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinit</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHgen</span> <span class="id" title="var">s1</span> <span class="id" title="var">l1</span> <span class="id" title="var">om</span> <span class="id" title="var">om0</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs1</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHgen</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Protocol&nbsp;message&nbsp;characterization&nbsp;-&nbsp;similar&nbsp;to&nbsp;the&nbsp;definition&nbsp;in&nbsp;the&nbsp;report.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_message_prop_iff" class="idref" href="#protocol_message_prop_iff"><span class="id" title="lemma">protocol_message_prop_iff</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="m':238" class="idref" href="#m':238"><span class="id" title="binder">m'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m':238"><span class="id" title="variable">m'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="im:239" class="idref" href="#im:239"><span class="id" title="binder">im</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message"><span class="id" title="method">initial_message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m':238"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#im:239"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:240" class="idref" href="#l:240"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="som:241" class="idref" href="#som:241"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s':242" class="idref" href="#s':242"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:241"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':242"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m':238"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s'</span> <span class="id" title="var">Hpm'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpm'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m'</span> <span class="id" title="var">Hom</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">s'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab9"></a><h1 class="section">Trace Properties</h1>


<div class="paragraph"> </div>

Note that it is unnecessary to specify the source state of the transition,
as it is implied by the preceding <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a></span> (or by the <tt>start</tt> state,
if such an item doesn't exist).

<div class="paragraph"> </div>


<div class="paragraph"> </div>

We will now split our groundwork for defining traces into the finite case and
the infinite case.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab10"></a><h2 class="section">Finite <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s</h2>


<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a></span> a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> <tt>start</tt> is a pair <tt>(start, steps)</tt> where <tt>steps</tt>
<div class="paragraph"> </div>

is a list of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s, and is inductively defined by:
<ul class="doclist">
<li> <tt>(s, [])</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a></span> <tt>s</tt>
<div class="paragraph"> </div>


</li>
<li> if there is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a></span> <tt>l (s', iom) (s, oom)</tt>
<div class="paragraph"> </div>

  and if <tt>(s,steps)</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_from"><span class="id" title="lemma">protocol_trace_from</span></a></span> <tt>s</tt>
<div class="paragraph"> </div>

  then <tt>(s', ({| l := l; input := iom; destination := s; output := oom |} :: steps)</tt>
<div class="paragraph"> </div>

  is a <span class="inlinecode"><span class="id" title="var">protocol_transition_from</span></span> <tt>s'</tt>.

<div class="paragraph"> </div>

Note that the definition is given such that it extends an existing trace by
adding a transition to its front.
The reason for this choice is to have this definition be similar to the one
for infinite traces, which can only be extended at the front.

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="finite_protocol_trace_from" class="idref" href="#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="finite_ptrace_empty" class="idref" href="#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:245" class="idref" href="#s:245"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>), <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:245"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from:243"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:245"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="finite_ptrace_extend" class="idref" href="#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> : <span class="id" title="keyword">forall</span>  (<a id="s:246" class="idref" href="#s:246"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tl:247" class="idref" href="#tl:247"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from:243"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:246"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tl:247"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s':248" class="idref" href="#s':248"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="iom:249" class="idref" href="#iom:249"><span class="id" title="binder">iom</span></a> <a id="oom:250" class="idref" href="#oom:250"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:251" class="idref" href="#l:251"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:251"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':248"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:249"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:246"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:250"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from:243"><span class="id" title="inductive">finite_protocol_trace_from</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#s':248"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l:251"><span class="id" title="variable">l</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#iom:249"><span class="id" title="variable">iom</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#s:246"><span class="id" title="variable">s</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#oom:250"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tl:247"><span class="id" title="variable">tl</span></a>).<br/>

<br/>
</div>

<div class="doc">
To complete our definition of a finite protocol trace, we must also guarantee that <tt>start</tt> is an
initial state according to the protocol.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="finite_ptrace_singleton" class="idref" href="#finite_ptrace_singleton"><span class="id" title="definition">finite_ptrace_singleton</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<a id="l:252" class="idref" href="#l:252"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>} {<a id="s:253" class="idref" href="#s:253"><span class="id" title="binder">s</span></a> <a id="s':254" class="idref" href="#s':254"><span class="id" title="binder">s'</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>} {<a id="iom:255" class="idref" href="#iom:255"><span class="id" title="binder">iom</span></a> <a id="oom:256" class="idref" href="#oom:256"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:252"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:253"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:255"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':254"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:256"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#s:253"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l:252"><span class="id" title="variable">l</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#iom:255"><span class="id" title="variable">iom</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#s':254"><span class="id" title="variable">s'</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#oom:256"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="l:257" class="idref" href="#l:257"><span class="id" title="binder">l</span></a> <a id="s:258" class="idref" href="#s:258"><span class="id" title="binder">s</span></a> <a id="s':259" class="idref" href="#s':259"><span class="id" title="binder">s'</span></a> <a id="iom:260" class="idref" href="#iom:260"><span class="id" title="binder">iom</span></a> <a id="oom:261" class="idref" href="#oom:261"><span class="id" title="binder">oom</span></a> <a id="Hptrans:262" class="idref" href="#Hptrans:262"><span class="id" title="binder">Hptrans</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':259"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':259"><span class="id" title="variable">s'</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_destination"><span class="id" title="lemma">protocol_transition_destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Hptrans:262"><span class="id" title="variable">Hptrans</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#Hptrans:262"><span class="id" title="variable">Hptrans</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="finite_protocol_trace" class="idref" href="#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> (<a id="s:263" class="idref" href="#s:263"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="ls:264" class="idref" href="#ls:264"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:263"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:264"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:263"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
In the remainder of the section we provide various results allowing us to
decompose the above properties in proofs.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_first_valid_transition" class="idref" href="#finite_ptrace_first_valid_transition"><span class="id" title="lemma">finite_ptrace_first_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:265" class="idref" href="#s:265"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:266" class="idref" href="#tr:266"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:267" class="idref" href="#te:267"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:268" class="idref" href="#Htr:268"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:265"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#te:267"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:266"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:267"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:265"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:267"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:267"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:267"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_first_pstate" class="idref" href="#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:269" class="idref" href="#s:269"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:270" class="idref" href="#tr:270"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:271" class="idref" href="#Htr:271"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:269"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:270"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:269"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hs</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_tail" class="idref" href="#finite_ptrace_tail"><span class="id" title="lemma">finite_ptrace_tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:272" class="idref" href="#s:272"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:273" class="idref" href="#tr:273"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:274" class="idref" href="#te:274"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:275" class="idref" href="#Htr:275"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:272"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#te:274"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:273"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:274"><span class="id" title="variable">te</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:273"><span class="id" title="variable">tr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_last_pstate" class="idref" href="#finite_ptrace_last_pstate"><span class="id" title="lemma">finite_ptrace_last_pstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:276" class="idref" href="#s:276"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:277" class="idref" href="#tr:277"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:278" class="idref" href="#Htr:278"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:276"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:277"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:277"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#s:276"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_tail"><span class="id" title="lemma">finite_ptrace_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr</span>)) <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">tr</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_consecutive_valid_transition" class="idref" href="#finite_ptrace_consecutive_valid_transition"><span class="id" title="lemma">finite_ptrace_consecutive_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:279" class="idref" href="#s:279"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:280" class="idref" href="#tr:280"><span class="id" title="binder">tr</span></a> <a id="tr2:281" class="idref" href="#tr2:281"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr1:282" class="idref" href="#tr1:282"><span class="id" title="binder">tr1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te1:283" class="idref" href="#te1:283"><span class="id" title="binder">te1</span></a> <a id="te2:284" class="idref" href="#te2:284"><span class="id" title="binder">te2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:285" class="idref" href="#Htr:285"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:279"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:280"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:286" class="idref" href="#Heq:286"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#tr:280"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr1:282"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#te1:283"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:284"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr2:281"><span class="id" title="variable">tr2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:284"><span class="id" title="variable">te2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te1:283"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:284"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:284"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:284"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="var">s</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHtr1</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> <span class="id" title="var">s</span> <span class="id" title="var">H2</span>). <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_output_is_protocol" class="idref" href="#protocol_trace_output_is_protocol"><span class="id" title="lemma">protocol_trace_output_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:287" class="idref" href="#is:287"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:288" class="idref" href="#tr:288"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:289" class="idref" href="#Htr:289"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:287"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:288"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:290" class="idref" href="#m:290"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Houtput:291" class="idref" href="#Houtput:291"><span class="id" title="binder">Houtput</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:290"><span class="id" title="variable">m</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:288"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:290"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Houtput</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_out"><span class="id" title="lemma">protocol_transition_out</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHoutput</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_input_is_protocol" class="idref" href="#protocol_trace_input_is_protocol"><span class="id" title="lemma">protocol_trace_input_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:292" class="idref" href="#is:292"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:293" class="idref" href="#tr:293"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:294" class="idref" href="#Htr:294"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:292"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:293"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:295" class="idref" href="#m:295"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinput:296" class="idref" href="#Hinput:296"><span class="id" title="binder">Hinput</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:295"><span class="id" title="variable">m</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:293"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:295"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hinput</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_in"><span class="id" title="lemma">protocol_transition_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHinput</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="first_transition_valid" class="idref" href="#first_transition_valid"><span class="id" title="lemma">first_transition_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:297" class="idref" href="#s:297"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:298" class="idref" href="#te:298"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:299" class="idref" href="#Htr:299"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:297"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#te:298"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:298"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:297"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:298"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:298"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:298"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extend_right_finite_trace_from" class="idref" href="#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:300" class="idref" href="#s1:300"><span class="id" title="binder">s1</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ts:301" class="idref" href="#ts:301"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht12:302" class="idref" href="#Ht12:302"><span class="id" title="binder">Ht12</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:300"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ts:301"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l3:303" class="idref" href="#l3:303"><span class="id" title="binder">l3</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s2:304" class="idref" href="#s2:304"><span class="id" title="binder">s2</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ts:301"><span class="id" title="variable">ts</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#s1:300"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="iom3:305" class="idref" href="#iom3:305"><span class="id" title="binder">iom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s3:306" class="idref" href="#s3:306"><span class="id" title="binder">s3</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="oom3:307" class="idref" href="#oom3:307"><span class="id" title="binder">oom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv23:308" class="idref" href="#Hv23:308"><span class="id" title="binder">Hv23</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l3:303"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s2:304"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom3:305"><span class="id" title="variable">iom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s3:306"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom3:307"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:300"><span class="id" title="variable">s1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#ts:301"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l3:303"><span class="id" title="variable">l3</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#s3:306"><span class="id" title="variable">s3</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#iom3:305"><span class="id" title="variable">iom3</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#oom3:307"><span class="id" title="variable">oom3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">|}]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_singleton"><span class="id" title="definition">finite_ptrace_singleton</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHt12</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHt12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s2</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">tl</span>) <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l1</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">s</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span>)) <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#remove_hd_last"><span class="id" title="lemma">remove_hd_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can now prove several general properties of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a></span>s. For example,
the following lemma states that given two such traces, such that the latter's starting state
is equal to the former's last state, it is possible to <i>concatenate</i> them into a single
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a></span>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_app_iff" class="idref" href="#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> (<a id="s:309" class="idref" href="#s:309"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="ls:310" class="idref" href="#ls:310"><span class="id" title="binder">ls</span></a> <a id="ls':311" class="idref" href="#ls':311"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="s':312" class="idref" href="#s':312"><span class="id" title="binder">s'</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:310"><span class="id" title="variable">ls</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#s:309"><span class="id" title="variable">s</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:309"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:310"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':312"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls':311"><span class="id" title="variable">ls'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:309"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#ls:310"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls':311"><span class="id" title="variable">ls'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ls'</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">H</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_origin"><span class="id" title="lemma">protocol_transition_origin</span></a> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Htr'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">last_identity</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">ls</span>) <span class="id" title="var">destination0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l1</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">input0</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">destination0</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">output0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ls</span>)) <span class="id" title="var">s</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">last_identity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHls</span> <span class="id" title="var">s1</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHls</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHls</span> <span class="id" title="var">ls'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">last_identity</span> : <span class="id" title="var">s'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">ls</span>) <span class="id" title="var">s1</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">last_identity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Several other lemmas in this vein are necessary for proving results regarding
traces.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_prefix" class="idref" href="#finite_protocol_trace_from_prefix"><span class="id" title="lemma">finite_protocol_trace_from_prefix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:313" class="idref" href="#s:313"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:314" class="idref" href="#ls:314"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:315" class="idref" href="#Htr:315"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:313"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:314"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n:316" class="idref" href="#n:316"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:313"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:314"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:316"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_suffix"><span class="id" title="lemma">list_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdecompose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdecompose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_suffix" class="idref" href="#finite_protocol_trace_from_suffix"><span class="id" title="lemma">finite_protocol_trace_from_suffix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:317" class="idref" href="#s:317"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:318" class="idref" href="#ls:318"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:319" class="idref" href="#Htr:319"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:317"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:318"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n:320" class="idref" href="#n:320"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nth:321" class="idref" href="#nth:321"><span class="id" title="binder">nth</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hnth:322" class="idref" href="#Hnth:322"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#s:317"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:318"><span class="id" title="variable">ls</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#n:320"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#nth:321"><span class="id" title="variable">nth</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#nth:321"><span class="id" title="variable">nth</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_suffix"><span class="id" title="definition">list_suffix</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:318"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:320"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_suffix"><span class="id" title="lemma">list_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdecompose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdecompose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Heq</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>)) <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">nth</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnth</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">ls</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth_last"><span class="id" title="lemma">list_prefix_nth_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_segment" class="idref" href="#finite_protocol_trace_from_segment"><span class="id" title="lemma">finite_protocol_trace_from_segment</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:323" class="idref" href="#s:323"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:324" class="idref" href="#ls:324"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:325" class="idref" href="#Htr:325"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:323"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:324"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n1:326" class="idref" href="#n1:326"><span class="id" title="binder">n1</span></a> <a id="n2:327" class="idref" href="#n2:327"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hle:328" class="idref" href="#Hle:328"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#n1:326"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n2:327"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n1th:329" class="idref" href="#n1th:329"><span class="id" title="binder">n1th</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hnth:330" class="idref" href="#Hnth:330"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#s:323"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:324"><span class="id" title="variable">ls</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#n1:326"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1th:329"><span class="id" title="variable">n1th</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1th:329"><span class="id" title="variable">n1th</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_segment"><span class="id" title="definition">list_segment</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:324"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1:326"><span class="id" title="variable">n1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n2:327"><span class="id" title="variable">n2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_suffix"><span class="id" title="lemma">finite_protocol_trace_from_suffix</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_prefix"><span class="id" title="lemma">finite_protocol_trace_from_prefix</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth"><span class="id" title="lemma">list_prefix_nth</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Having defined <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s, we now connect them to protocol states
and messages, in the following sense: for each state-message pair (<tt>s</tt>, <tt>m</tt>)
that has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty, there exists a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> which ends
in <tt>s</tt> by outputting <tt>m</tt> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_is_trace" class="idref" href="#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:442" class="idref" href="#s:442"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:443" class="idref" href="#om:443"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:444" class="idref" href="#Hp:444"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:442"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:443"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:442"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:445" class="idref" href="#is:445"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:446" class="idref" href="#tr:446"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:445"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:446"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:446"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:442"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:446"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:443"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_run"><span class="id" title="lemma">protocol_is_run</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">Hp</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">vr</span> <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#run_is_trace"><span class="id" title="lemma">run_is_trace</span></a> <span class="id" title="var">vr</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">Hvr</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transitions"><span class="id" title="projection">transitions</span></a> <span class="id" title="var">r</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrace</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> <span class="id" title="var">His</span>]. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">ts</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#start"><span class="id" title="projection">start</span></a> <span class="id" title="var">r</span>). <span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transitions"><span class="id" title="projection">transitions</span></a> <span class="id" title="var">r</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_run_last_final"><span class="id" title="lemma">vlsm_run_last_final</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">r</span> <span class="id" title="var">Hvr</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htrace</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlf</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlf</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">HC</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Giving a trace for <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span> can be stated more
        simply than <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a></span>, because we don't need a
        disjunction because we are not making claims about <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a></span>
        messages.
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_state_has_trace" class="idref" href="#protocol_state_has_trace"><span class="id" title="lemma">protocol_state_has_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:447" class="idref" href="#s:447"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:448" class="idref" href="#Hp:448"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:447"><span class="id" title="variable">s</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:449" class="idref" href="#is:449"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:450" class="idref" href="#tr:450"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:449"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:450"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:450"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#is:449"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:447"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span>|<span class="id" title="var">Htrace</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrace</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hlast</span> <span class="id" title="var">_</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>;[<span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hlast</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_map"><span class="id" title="lemma">last_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Any trace with the 'finite_protocol_trace_from' property can be completed
    (to the left) to start in an initial state
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_complete_left" class="idref" href="#finite_protocol_trace_from_complete_left"><span class="id" title="lemma">finite_protocol_trace_from_complete_left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:451" class="idref" href="#s:451"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:452" class="idref" href="#tr:452"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:453" class="idref" href="#Htr:453"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:451"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:452"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:454" class="idref" href="#is:454"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="trs:455" class="idref" href="#trs:455"><span class="id" title="binder">trs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:454"><span class="id" title="variable">is</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#trs:455"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:452"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#trs:455"><span class="id" title="variable">trs</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#is:454"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:451"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs</span> | [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hom</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">trs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">His</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">default</span> := <span class="id" title="keyword">is</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Next function extract the nth state of a trace, where the sequence of
states of a trace is obtained by appending the all destination
states in the transition list/stream to the initial state of the trace.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_nth" class="idref" href="#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a id="tr:456" class="idref" href="#tr:456"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="n:457" class="idref" href="#n:457"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:456"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">ls</span>) <a class="idref" href="CasperCBC.VLSM.Common.html#n:457"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:457"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">st</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Another benefit of defining traces is that we can succintly
describe indirect transitions between arbitrary pairs of states.

<div class="paragraph"> </div>

We say that state <tt>second</tt> is in state <tt>first</tt>'s futures if
there exists a finite (possibly empty) protocol trace that begins
with <tt>first</tt> and ends in <tt>second</tt>.

<div class="paragraph"> </div>

This relation is often used in stating safety and liveness properties.
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="in_futures" class="idref" href="#in_futures"><span class="id" title="definition">in_futures</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="first:459" class="idref" href="#first:459"><span class="id" title="binder">first</span></a> <a id="second:460" class="idref" href="#second:460"><span class="id" title="binder">second</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:461" class="idref" href="#tr:461"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#first:459"><span class="id" title="variable">first</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:461"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:461"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#first:459"><span class="id" title="variable">first</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#second:460"><span class="id" title="variable">second</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_futures_preserving" class="idref" href="#in_futures_preserving"><span class="id" title="lemma">in_futures_preserving</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:462" class="idref" href="#R:462"><span class="id" title="binder">R</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpre:463" class="idref" href="#Hpre:463"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#PreOrder"><span class="id" title="class">PreOrder</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:462"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:464" class="idref" href="#Ht:464"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_preserving"><span class="id" title="definition">protocol_transition_preserving</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:462"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:465" class="idref" href="#s1:465"><span class="id" title="binder">s1</span></a> <a id="s2:466" class="idref" href="#s2:466"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hin:467" class="idref" href="#Hin:467"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:465"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:466"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#R:462"><span class="id" title="variable">R</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:465"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:466"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#transitivity"><span class="id" title="definition">transitivity</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">y</span> := <span class="id" title="var">s</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHx</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="eq_equiv" class="idref" href="#eq_equiv"><span class="id" title="instance">eq_equiv</span></a> : @<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> := <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_futures_strict_preserving" class="idref" href="#in_futures_strict_preserving"><span class="id" title="lemma">in_futures_strict_preserving</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:468" class="idref" href="#R:468"><span class="id" title="binder">R</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpre:469" class="idref" href="#Hpre:469"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#StrictOrder"><span class="id" title="class">StrictOrder</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:468"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:470" class="idref" href="#Ht:470"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_preserving"><span class="id" title="definition">protocol_transition_preserving</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:468"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:471" class="idref" href="#s1:471"><span class="id" title="binder">s1</span></a> <a id="s2:472" class="idref" href="#s2:472"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hin:473" class="idref" href="#Hin:473"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:471"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:472"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hneq:474" class="idref" href="#Hneq:474"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#s1:471"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:472"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#R:468"><span class="id" title="variable">R</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:471"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:472"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.Morphisms.html#StrictOrder_PreOrder"><span class="id" title="lemma">StrictOrder_PreOrder</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#eq_equiv"><span class="id" title="instance">eq_equiv</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_preserving"><span class="id" title="lemma">in_futures_preserving</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#relation_disjunction"><span class="id" title="definition">relation_disjunction</span></a> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <span class="id" title="var">Hpre</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpreserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hpreserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Ht</span> <span class="id" title="var">s3</span> <span class="id" title="var">s4</span> <span class="id" title="var">l1</span> <span class="id" title="var">om1</span> <span class="id" title="var">om2</span> <span class="id" title="var">Hprotocol</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">Hpreserve</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpreserve</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">y1</span> <span class="id" title="var">y2</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_futures_protocol_fst" class="idref" href="#in_futures_protocol_fst"><span class="id" title="lemma">in_futures_protocol_fst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="first:475" class="idref" href="#first:475"><span class="id" title="binder">first</span></a> <a id="second:476" class="idref" href="#second:476"><span class="id" title="binder">second</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfuture:477" class="idref" href="#Hfuture:477"><span class="id" title="binder">Hfuture</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#first:475"><span class="id" title="variable">first</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#second:476"><span class="id" title="variable">second</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#first:475"><span class="id" title="variable">first</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfuture</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hlast</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Stating livness properties will require quantifying over complete
executions of the protocol. To make this possible, we will now define
<i>complete</i> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s.

<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> is <i>terminating</i> if there's no other <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>
that contains it as a prefix.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="terminating_trace_prop" class="idref" href="#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> (<a id="tr:554" class="idref" href="#tr:554"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:554"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:556" class="idref" href="#tr:556"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="last:557" class="idref" href="#last:557"><span class="id" title="binder">last</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:556"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#last:557"><span class="id" title="variable">last</span></a> <span class="id" title="var">ls</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> is <i>complete</i>, if it is either <i>terminating</i> or infinite.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="complete_trace_prop" class="idref" href="#complete_trace_prop"><span class="id" title="definition">complete_trace_prop</span></a> (<a id="tr:558" class="idref" href="#tr:558"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:558"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:558"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:558"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="section">VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
Make all arguments of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a></span> explicit
    so it will work with the <tt>induction using</tt> tactic.
    (closing the section added <tt>{message}</tt> as an implicit argument)
 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab11"></a><h2 class="section">VLSM Inclusion and Equality.</h2>


<div class="paragraph"> </div>

We can also define VLSM <i>inclusion</i>  and <i>equality</i> in terms of traces.
When both VLSMs have the same state and label types they also share the
same <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a></span> type, and sets of traces can be compared without conversion.
<ul class="doclist">
<li> VLSM X is <i>included</i> in VLSM Y if every <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> available to X

</li>
</ul>
is also available to Y.
<ul class="doclist">
<li> VLSM X and VLSM Y are <i>equal</i> if their <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s are exactly the same.

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_equality" class="idref" href="#VLSM_equality"><span class="id" title="section">VLSM_equality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:564" class="idref" href="#message:564"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="vtype:565" class="idref" href="#vtype:565"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:564"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_eq_part" class="idref" href="#VLSM_eq_part"><span class="id" title="definition">VLSM_eq_part</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:566" class="idref" href="#SigX:566"><span class="id" title="binder">SigX</span></a> <a id="SigY:567" class="idref" href="#SigY:567"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:568" class="idref" href="#MX:568"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:566"><span class="id" title="variable">SigX</span></a>) (<a id="MY:569" class="idref" href="#MY:569"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:567"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:570" class="idref" href="#X:570"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:568"><span class="id" title="variable">MX</span></a>) (<a id="Y:571" class="idref" href="#Y:571"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:569"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="t:572" class="idref" href="#t:572"><span class="id" title="binder">t</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:570"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:572"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:571"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:572"><span class="id" title="variable">t</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a id="VLSM_eq" class="idref" href="#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_part"><span class="id" title="definition">VLSM_eq_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_incl_part" class="idref" href="#VLSM_incl_part"><span class="id" title="definition">VLSM_incl_part</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:573" class="idref" href="#SigX:573"><span class="id" title="binder">SigX</span></a> <a id="SigY:574" class="idref" href="#SigY:574"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:575" class="idref" href="#MX:575"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:573"><span class="id" title="variable">SigX</span></a>) (<a id="MY:576" class="idref" href="#MY:576"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:574"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:577" class="idref" href="#X:577"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:575"><span class="id" title="variable">MX</span></a>) (<a id="Y:578" class="idref" href="#Y:578"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:576"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="t:579" class="idref" href="#t:579"><span class="id" title="binder">t</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:577"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:579"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:578"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:579"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a id="VLSM_incl" class="idref" href="#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_part"><span class="id" title="definition">VLSM_incl_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_trans" class="idref" href="#VLSM_incl_trans"><span class="id" title="lemma">VLSM_incl_trans</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:580" class="idref" href="#SigX:580"><span class="id" title="binder">SigX</span></a> <a id="SigY:581" class="idref" href="#SigY:581"><span class="id" title="binder">SigY</span></a> <a id="SigZ:582" class="idref" href="#SigZ:582"><span class="id" title="binder">SigZ</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:583" class="idref" href="#MX:583"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:580"><span class="id" title="variable">SigX</span></a>) (<a id="MY:584" class="idref" href="#MY:584"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:581"><span class="id" title="variable">SigY</span></a>) (<a id="MZ:585" class="idref" href="#MZ:585"><span class="id" title="binder">MZ</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigZ:582"><span class="id" title="variable">SigZ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:586" class="idref" href="#X:586"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:583"><span class="id" title="variable">MX</span></a>) (<a id="Y:587" class="idref" href="#Y:587"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:584"><span class="id" title="variable">MY</span></a>) (<a id="Z:588" class="idref" href="#Z:588"><span class="id" title="binder">Z</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MZ:585"><span class="id" title="variable">MZ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:586"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:587"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:587"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:588"><span class="id" title="variable">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:586"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:588"><span class="id" title="variable">Z</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_in_futures" class="idref" href="#VLSM_incl_in_futures"><span class="id" title="lemma">VLSM_incl_in_futures</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:589" class="idref" href="#SigX:589"><span class="id" title="binder">SigX</span></a> <a id="SigY:590" class="idref" href="#SigY:590"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:591" class="idref" href="#MX:591"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:589"><span class="id" title="variable">SigX</span></a>) (<a id="MY:592" class="idref" href="#MY:592"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:590"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:593" class="idref" href="#X:593"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:591"><span class="id" title="variable">MX</span></a>) (<a id="Y:594" class="idref" href="#Y:594"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:592"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hincl:595" class="idref" href="#Hincl:595"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:593"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:594"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:596" class="idref" href="#s1:596"><span class="id" title="binder">s1</span></a> <a id="s2:597" class="idref" href="#s2:597"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:593"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfuture:598" class="idref" href="#Hfuture:598"><span class="id" title="binder">Hfuture</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:593"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:596"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:597"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:594"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:596"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:597"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness"><span class="id" title="lemma">in_futures_witness</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfuture</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfuture</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>] [<span class="id" title="var">n1</span> [<span class="id" title="var">n2</span> [<span class="id" title="var">Hle</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness_reverse"><span class="id" title="lemma">in_futures_witness_reverse</span></a> <span class="id" title="var">Y</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>) <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">Hle</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality"><span class="id" title="section">VLSM_equality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="VLSM_eq" class="idref" href="#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_part"><span class="id" title="definition">VLSM_eq_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="VLSM_incl" class="idref" href="#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_part"><span class="id" title="definition">VLSM_incl_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_eq_sym" class="idref" href="#VLSM_eq_sym"><span class="id" title="lemma">VLSM_eq_sym</span></a><br/>
&nbsp;&nbsp;{<a id="message:666" class="idref" href="#message:666"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:667" class="idref" href="#vtype:667"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:666"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:668" class="idref" href="#SigX:668"><span class="id" title="binder">SigX</span></a> <a id="SigY:669" class="idref" href="#SigY:669"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:667"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:670" class="idref" href="#MX:670"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:668"><span class="id" title="variable">SigX</span></a>) (<a id="MY:671" class="idref" href="#MY:671"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:669"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:672" class="idref" href="#X:672"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:670"><span class="id" title="variable">MX</span></a>) (<a id="Y:673" class="idref" href="#Y:673"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:671"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:672"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:673"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:673"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:672"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_eq_trans" class="idref" href="#VLSM_eq_trans"><span class="id" title="lemma">VLSM_eq_trans</span></a><br/>
&nbsp;&nbsp;{<a id="message:674" class="idref" href="#message:674"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:675" class="idref" href="#vtype:675"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:674"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:676" class="idref" href="#SigX:676"><span class="id" title="binder">SigX</span></a> <a id="SigY:677" class="idref" href="#SigY:677"><span class="id" title="binder">SigY</span></a> <a id="SigZ:678" class="idref" href="#SigZ:678"><span class="id" title="binder">SigZ</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:675"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:679" class="idref" href="#MX:679"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:676"><span class="id" title="variable">SigX</span></a>) (<a id="MY:680" class="idref" href="#MY:680"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:677"><span class="id" title="variable">SigY</span></a>) (<a id="MZ:681" class="idref" href="#MZ:681"><span class="id" title="binder">MZ</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigZ:678"><span class="id" title="variable">SigZ</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:682" class="idref" href="#X:682"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:679"><span class="id" title="variable">MX</span></a>) (<a id="Y:683" class="idref" href="#Y:683"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:680"><span class="id" title="variable">MY</span></a>) (<a id="Z:684" class="idref" href="#Z:684"><span class="id" title="binder">Z</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MZ:681"><span class="id" title="variable">MZ</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:682"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:683"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:683"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:684"><span class="id" title="variable">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:682"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:684"><span class="id" title="variable">Z</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a></span> almost implies inclusion of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> sets.
  Some additional hypotheses are required because <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a></span> only
  refers to traces, and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a></span> means that
  <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> includes some pairs that do not appear in any
  transition.
 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_incl" class="idref" href="#protocol_prop_incl"><span class="id" title="lemma">protocol_prop_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<a id="message:685" class="idref" href="#message:685"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>] [<a id="vtype:686" class="idref" href="#vtype:686"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:685"><span class="id" title="variable">message</span></a>] [<a id="SigX:687" class="idref" href="#SigX:687"><span class="id" title="binder">SigX</span></a> <a id="SigY:688" class="idref" href="#SigY:688"><span class="id" title="binder">SigY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:686"><span class="id" title="variable">vtype</span></a>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:689" class="idref" href="#MX:689"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:687"><span class="id" title="variable">SigX</span></a>) (<a id="MY:690" class="idref" href="#MY:690"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:688"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:691" class="idref" href="#X:691"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:689"><span class="id" title="variable">MX</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Y:692" class="idref" href="#Y:692"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:690"><span class="id" title="variable">MY</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:691"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:692"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="m:694" class="idref" href="#m:694"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:691"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:694"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:692"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:694"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="som:693" class="idref" href="#som:693"><span class="id" title="binder">som</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:691"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:693"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:692"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:693"><span class="id" title="variable">som</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">Hinits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;protocol_initial&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <span class="id" title="var">Y</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinits</span>|];<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <span class="id" title="var">X</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;protocol_generated&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">som'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <span class="id" title="var">X</span> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">som'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">som'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span> <span class="id" title="var">om'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_protocol_transition"><span class="id" title="lemma">VLSM_incl_protocol_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hincl</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a>;[<span class="id" title="var">eassumption</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It is natural to look for sufficient conditions for VLSM inclusion (or equality),
which are easy to verify in a practical setting. One such result is the following.

<div class="paragraph"> </div>

For VLSM <tt>X</tt> to be included in VLSM <tt>Y</tt>, the following set of conditions is sufficient:
<ul class="doclist">
<li> <tt>X</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span>s are included in <tt>Y</tt>'s <span class="inlinecode"><span class="id" title="var">initial</span></span> <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span>s

</li>
<li> Every message <tt>m</tt> (including the empty one) which can be input to a
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span> transition in <tt>X</tt>, is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span> in <tt>Y</tt>
<div class="paragraph"> </div>


</li>
<li> <tt>X</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span> is included in <tt>Y</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>.

</li>
<li> For all <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span> inputs (in <tt>X</tt>), <tt>Y</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span> acts
like <tt>X</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span>.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="basic_VLSM_incl" class="idref" href="#basic_VLSM_incl"><span class="id" title="section">basic_VLSM_incl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:695" class="idref" href="#message:695"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="T:696" class="idref" href="#T:696"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:695"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SX:697" class="idref" href="#SX:697"><span class="id" title="binder">SX</span></a> <a id="SY:698" class="idref" href="#SY:698"><span class="id" title="binder">SY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#T:696"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:699" class="idref" href="#MX:699"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SX:697"><span class="id" title="variable">SX</span></a>)<br/>
&nbsp;&nbsp;(<a id="MY:700" class="idref" href="#MY:700"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SY:698"><span class="id" title="variable">SY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:701" class="idref" href="#X:701"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:699"><span class="id" title="variable">MX</span></a>)<br/>
&nbsp;&nbsp;(<a id="Y:702" class="idref" href="#Y:702"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:700"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinitial_state:704" class="idref" href="#Hinitial_state:704"><span class="id" title="binder">Hinitial_state</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="s:703" class="idref" href="#s:703"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:701"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:703"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:702"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:703"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="Hinitial_protocol_message:708" class="idref" href="#Hinitial_protocol_message:708"><span class="id" title="binder">Hinitial_protocol_message</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:705" class="idref" href="#l:705"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:706" class="idref" href="#s:706"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="m:707" class="idref" href="#m:707"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:695"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:701"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:705"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:706"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:707"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:701"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:707"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:702"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:707"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="Hvalid:712" class="idref" href="#Hvalid:712"><span class="id" title="binder">Hvalid</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:709" class="idref" href="#l:709"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:710" class="idref" href="#s:710"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="om:711" class="idref" href="#om:711"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:695"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:701"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:709"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:710"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:711"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:702"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:709"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:710"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:711"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="Htransition:716" class="idref" href="#Htransition:716"><span class="id" title="binder">Htransition</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:713" class="idref" href="#l:713"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:714" class="idref" href="#s:714"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="om:715" class="idref" href="#om:715"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:695"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:701"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:713"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:714"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:715"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:701"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:713"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:714"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:715"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:702"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:713"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:714"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:715"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_props" class="idref" href="#protocol_props"><span class="id" title="lemma">protocol_props</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="som:717" class="idref" href="#som:717"><span class="id" title="binder">som</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:717"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:717"><span class="id" title="variable">som</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="l:718" class="idref" href="#l:718"><span class="id" title="binder">l</span></a> <a id="s:719" class="idref" href="#s:719"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:718"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:719"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:717"><span class="id" title="variable">som</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:717"><span class="id" title="variable">som</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">som</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_state"><span class="id" title="variable">Hinitial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">l</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;[|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_protocol_message"><span class="id" title="variable">Hinitial_protocol_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rename</span> <span class="id" title="var">IHprotocol_prop1</span> <span class="id" title="var">into</span> <span class="id" title="var">IHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">IHprotocol_prop2</span> <span class="id" title="var">into</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHm</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">IHm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHs</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHs</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHm</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">Hv</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_om</span> <span class="id" title="var">H</span> <span class="id" title="var">_s</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Htransition"><span class="id" title="variable">Htransition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpvalid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l1</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">l1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Htransition"><span class="id" title="variable">Htransition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">_om</span>:=<span class="id" title="var">_om</span>) (<span class="id" title="var">_s</span>:=<span class="id" title="var">_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hvalid"><span class="id" title="variable">Hvalid</span></a>;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hpvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">eexists</span>;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a>;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Hprotocol_message" class="idref" href="#Hprotocol_message"><span class="id" title="lemma">Hprotocol_message</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:720" class="idref" href="#l:720"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:721" class="idref" href="#s:721"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="om:722" class="idref" href="#om:722"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:720"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:721"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:722"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:722"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> [<span class="id" title="var">m</span>|] <span class="id" title="var">H</span>;[|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">H</span>] <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_props"><span class="id" title="lemma">protocol_props</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l</span>, <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_protocol_state" class="idref" href="#basic_VLSM_incl_protocol_state"><span class="id" title="lemma">basic_VLSM_incl_protocol_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:723" class="idref" href="#s:723"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:724" class="idref" href="#om:724"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:725" class="idref" href="#Hps:725"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:723"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:724"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:723"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_props"><span class="id" title="lemma">protocol_props</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_protocol_transition" class="idref" href="#basic_VLSM_incl_protocol_transition"><span class="id" title="lemma">basic_VLSM_incl_protocol_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:726" class="idref" href="#l:726"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="is:727" class="idref" href="#is:727"><span class="id" title="binder">is</span></a> <a id="os:728" class="idref" href="#os:728"><span class="id" title="binder">os</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="iom:729" class="idref" href="#iom:729"><span class="id" title="binder">iom</span></a> <a id="oom:730" class="idref" href="#oom:730"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:731" class="idref" href="#Ht:731"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:726"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#is:727"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:729"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#os:728"><span class="id" title="variable">os</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:730"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:726"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#is:727"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:729"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#os:728"><span class="id" title="variable">os</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:730"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_valid"><span class="id" title="lemma">protocol_generated_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">Hps</span> <span class="id" title="var">Hpm</span> <span class="id" title="var">Hv</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hpv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_state"><span class="id" title="lemma">basic_VLSM_incl_protocol_state</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#Hprotocol_message"><span class="id" title="lemma">Hprotocol_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpv</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hvalid"><span class="id" title="variable">Hvalid</span></a> <span class="id" title="var">l</span> <span class="id" title="keyword">is</span> <span class="id" title="var">iom</span> <span class="id" title="var">Hpv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Htransition"><span class="id" title="variable">Htransition</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_finite_protocol_trace" class="idref" href="#basic_VLSM_incl_finite_protocol_trace"><span class="id" title="lemma">basic_VLSM_incl_finite_protocol_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:732" class="idref" href="#s:732"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:733" class="idref" href="#ls:733"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpxt:734" class="idref" href="#Hpxt:734"><span class="id" title="binder">Hpxt</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:732"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:733"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:732"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:733"><span class="id" title="variable">ls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hpxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_state"><span class="id" title="lemma">basic_VLSM_incl_protocol_state</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_transition"><span class="id" title="lemma">basic_VLSM_incl_protocol_transition</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_infinite_protocol_trace" class="idref" href="#basic_VLSM_incl_infinite_protocol_trace"><span class="id" title="lemma">basic_VLSM_incl_infinite_protocol_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:735" class="idref" href="#s:735"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:736" class="idref" href="#ls:736"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpxt:737" class="idref" href="#Hpxt:737"><span class="id" title="binder">Hpxt</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from"><span class="id" title="inductive">infinite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:735"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:736"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from"><span class="id" title="inductive">infinite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:735"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:736"><span class="id" title="variable">ls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ls</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> [[<span class="id" title="var">l</span> <span class="id" title="var">input</span> <span class="id" title="var">destination</span> <span class="id" title="var">output</span>] <span class="id" title="var">ls</span>] <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">destination</span> <span class="id" title="var">ls</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_transition"><span class="id" title="lemma">basic_VLSM_incl_protocol_transition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;end&nbsp;hide&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl" class="idref" href="#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">ls</span>| <span class="id" title="var">s</span> <span class="id" title="var">ss</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hxt</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_finite_protocol_trace"><span class="id" title="lemma">basic_VLSM_incl_finite_protocol_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_state"><span class="id" title="variable">Hinitial_state</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_infinite_protocol_trace"><span class="id" title="lemma">basic_VLSM_incl_infinite_protocol_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_state"><span class="id" title="variable">Hinitial_state</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="section">basic_VLSM_incl</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab12"></a><h2 class="section">Pre-loaded VLSMs</h2>


<div class="paragraph"> </div>

Given a VLSM <tt>X</tt>, we introduce the <i>pre-loaded</i> version of it,
which is identical to <tt>X</tt>, except that it is endowed with the
whole message universe as its initial messages. The high degree
of freedom allowed to the <i>pre-loaded</i> version lets it experience
everything experienced by <tt>X</tt> but also other types of behaviour,
including <i>Byzantine</i> behaviour, which makes it a useful concept in
Byzantine fault tolerance analysis. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="pre_loaded_with_all_messages_vlsm" class="idref" href="#pre_loaded_with_all_messages_vlsm"><span class="id" title="section">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:738" class="idref" href="#message:738"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:739" class="idref" href="#X:739"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:738"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm_sig" class="idref" href="#pre_loaded_with_all_messages_vlsm_sig"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="message:740" class="idref" href="#message:740"><span class="id" title="binder">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vm0"><span class="id" title="definition">vm0</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vl0"><span class="id" title="definition">vl0</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm_machine" class="idref" href="#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_sig"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm" class="idref" href="#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>.<br/>

<br/>
</div>

<div class="doc">
    A message which can be emitted during a protocol run of
    the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> is called a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#byzantine_message"><span class="id" title="definition">byzantine_message</span></a></span>, because
    as shown by Lemmas <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ByzantineTraces.html#byzantine_pre_loaded_with_all_messages"><span class="id" title="lemma">byzantine_pre_loaded_with_all_messages</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ByzantineTraces.html#pre_loaded_with_all_messages_alt_eq"><span class="id" title="lemma">pre_loaded_with_all_messages_alt_eq</span></a></span>,
    byzantine traces for a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> are precisely the protocol traces
    of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span>, hence a byzantine message is any message
    which a byzantine trace <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span>.
  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="byzantine_message_prop" class="idref" href="#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:741" class="idref" href="#m:741"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:741"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="byzantine_message" class="idref" href="#byzantine_message"><span class="id" title="definition">byzantine_message</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="any_message_is_protocol_in_preloaded" class="idref" href="#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a> (<a id="om:748" class="idref" href="#om:748"><span class="id" title="binder">om</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:748"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_message_protocol_prop"><span class="id" title="lemma">pre_loaded_with_all_messages_message_protocol_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="preloaded_protocol_state_prop" class="idref" href="#preloaded_protocol_state_prop"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="preloaded_protocol_initial_state" class="idref" href="#preloaded_protocol_initial_state"><span class="id" title="constructor">preloaded_protocol_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:751" class="idref" href="#s:751"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:752" class="idref" href="#Hs:752"><span class="id" title="binder">Hs</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> (<span class="id" title="var">VLSM_sign</span>:=<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_sig"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_sig</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#s:751"><span class="id" title="variable">s</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop:749"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:751"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;| <a id="preloaded_protocol_generated" class="idref" href="#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:753" class="idref" href="#l:753"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:754" class="idref" href="#s:754"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:755" class="idref" href="#Hps:755"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop:749"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:754"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:756" class="idref" href="#om:756"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:757" class="idref" href="#Hv:757"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> (<span class="id" title="var">VLSM_class</span>:=<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#l:753"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:754"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:756"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop:749"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> (<span class="id" title="var">VLSM_class</span>:=<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#l:753"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:754"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:756"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_protocol_state_prop_iff" class="idref" href="#preloaded_protocol_state_prop_iff"><span class="id" title="lemma">preloaded_protocol_state_prop_iff</span></a> <a id="s:758" class="idref" href="#s:758"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:758"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:758"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">som</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hproto</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">som</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_initial_state"><span class="id" title="constructor">preloaded_protocol_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>;[<span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> (<span class="id" title="var">som'</span> := <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">l1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span>:<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">som'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">som'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHpreloaded_protocol_state_prop</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">IHs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a> <span class="id" title="var">om</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a>;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_protocol_prop" class="idref" href="#preloaded_weaken_protocol_prop"><span class="id" title="lemma">preloaded_weaken_protocol_prop</span></a> <a id="som:759" class="idref" href="#som:759"><span class="id" title="binder">som</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:759"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:759"><span class="id" title="variable">som</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">om</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">l1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IHprotocol_prop1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IHprotocol_prop2</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_protocol_transition" class="idref" href="#preloaded_weaken_protocol_transition"><span class="id" title="lemma">preloaded_weaken_protocol_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:760" class="idref" href="#l:760"><span class="id" title="binder">l</span></a> <a id="s:761" class="idref" href="#s:761"><span class="id" title="binder">s</span></a> <a id="om:762" class="idref" href="#om:762"><span class="id" title="binder">om</span></a> <a id="s':763" class="idref" href="#s':763"><span class="id" title="binder">s'</span></a> <a id="om':764" class="idref" href="#om':764"><span class="id" title="binder">om'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:760"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:761"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:762"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':763"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om':764"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:760"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:761"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:762"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':763"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om':764"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hproto_s</span>] [<span class="id" title="var">_</span> <span class="id" title="var">Hpvalid</span>]] <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">clear</span> <span class="id" title="var">Htrans</span>|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_weaken_protocol_prop"><span class="id" title="lemma">preloaded_weaken_protocol_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">_om</span> <span class="id" title="var">Hproto_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="vlsm_incl_pre_loaded_with_all_messages_vlsm" class="idref" href="#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_vlsm_incl" class="idref" href="#pre_loaded_vlsm_incl"><span class="id" title="lemma">pre_loaded_vlsm_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:765" class="idref" href="#P:765"><span class="id" title="binder">P</span></a> <a id="Q:766" class="idref" href="#Q:766"><span class="id" title="binder">Q</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PimpliesQ:768" class="idref" href="#PimpliesQ:768"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="keyword">forall</span> <a id="m:767" class="idref" href="#m:767"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#P:765"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:767"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Q:766"><span class="id" title="variable">Q</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:767"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#P:765"><span class="id" title="variable">P</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Q:766"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)). <span class="id" title="tactic">intro</span> <span class="id" title="var">Hpincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| ..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span>|<span class="id" title="var">HP</span>];[<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True" class="idref" href="#pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True"><span class="id" title="lemma">pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <a id="m:769" class="idref" href="#m:769"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>))); <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">right</span>;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)) <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a> ); <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="vlsm_is_pre_loaded_with_False" class="idref" href="#vlsm_is_pre_loaded_with_False"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <a id="m:770" class="idref" href="#m:770"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)). <span class="id" title="tactic">intro</span> <span class="id" title="var">Hpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">left</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="vlsm_is_pre_loaded_with_False_protocol_prop" class="idref" href="#vlsm_is_pre_loaded_with_False_protocol_prop"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False_protocol_prop</span></a><br/>
&nbsp;&nbsp;(<a id="som:771" class="idref" href="#som:771"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:771"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a>  (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <a id="m:772" class="idref" href="#m:772"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>)) <a class="idref" href="CasperCBC.VLSM.Common.html#som:771"><span class="id" title="variable">som</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_is_pre_loaded_with_False"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_incl"><span class="id" title="lemma">protocol_prop_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;[|<span class="id" title="var">cbn</span>;<span class="id" title="tactic">tauto</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">Ht</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="section">pre_loaded_with_all_messages_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="non_empty_protocol_trace_from_protocol_generated_prop" class="idref" href="#non_empty_protocol_trace_from_protocol_generated_prop"><span class="id" title="lemma">non_empty_protocol_trace_from_protocol_generated_prop</span></a><br/>
&nbsp;&nbsp;`(<a id="X:774" class="idref" href="#X:774"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a id="message:773" class="idref" href="#message:773"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:775" class="idref" href="#s:775"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:776" class="idref" href="#m:776"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:773"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:774"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:775"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:776"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:777" class="idref" href="#is:777"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:778" class="idref" href="#tr:778"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="item:779" class="idref" href="#item:779"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:774"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:777"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:778"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:778"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:779"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:779"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:775"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:779"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:776"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [(<span class="id" title="var">s'</span>, <span class="id" title="var">om'</span>) [<span class="id" title="var">l</span> <span class="id" title="var">Hsm</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hp</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_singleton"><span class="id" title="definition">finite_ptrace_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_complete_left"><span class="id" title="lemma">finite_protocol_trace_from_complete_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Htrs</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">context</span> [<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>?<span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>] =&gt; <span class="id" title="var">remember</span> <span class="id" title="var">item</span> <span class="id" title="keyword">as</span> <span class="id" title="var">lstitem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">trs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">lstitem</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">exists</span> <span class="id" title="var">lstitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">lstitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hitem</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hm</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr</span> <span class="id" title="var">tr'</span> <span class="id" title="var">item'</span> <span class="id" title="var">Heq</span>; [<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">item'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">l1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_protocol_generated" class="idref" href="#VLSM_incl_protocol_generated"><span class="id" title="lemma">VLSM_incl_protocol_generated</span></a><br/>
&nbsp;&nbsp;{<a id="message:780" class="idref" href="#message:780"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:781" class="idref" href="#vtype:781"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:780"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:782" class="idref" href="#SigX:782"><span class="id" title="binder">SigX</span></a> <a id="SigY:783" class="idref" href="#SigY:783"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:781"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:784" class="idref" href="#MX:784"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:782"><span class="id" title="variable">SigX</span></a>) (<a id="MY:785" class="idref" href="#MY:785"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:783"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:786" class="idref" href="#X:786"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:784"><span class="id" title="variable">MX</span></a>) (<a id="Y:787" class="idref" href="#Y:787"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:785"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl:788" class="idref" href="#Hincl:788"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:786"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:787"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:789" class="idref" href="#s:789"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:790" class="idref" href="#m:790"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:780"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:786"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:789"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:790"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:787"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:789"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:790"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#non_empty_protocol_trace_from_protocol_generated_prop"><span class="id" title="lemma">non_empty_protocol_trace_from_protocol_generated_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#non_empty_protocol_trace_from_protocol_generated_prop"><span class="id" title="lemma">non_empty_protocol_trace_from_protocol_generated_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsm</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hsm</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr</span>, <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_finite_protocol_trace"><span class="id" title="lemma">VLSM_incl_finite_protocol_trace</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_can_emit" class="idref" href="#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a><br/>
&nbsp;&nbsp;{<a id="message:791" class="idref" href="#message:791"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:792" class="idref" href="#vtype:792"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:791"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:793" class="idref" href="#SigX:793"><span class="id" title="binder">SigX</span></a> <a id="SigY:794" class="idref" href="#SigY:794"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:792"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:795" class="idref" href="#MX:795"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:793"><span class="id" title="variable">SigX</span></a>) (<a id="MY:796" class="idref" href="#MY:796"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:794"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:797" class="idref" href="#X:797"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:795"><span class="id" title="variable">MX</span></a>) (<a id="Y:798" class="idref" href="#Y:798"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:796"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl:799" class="idref" href="#Hincl:799"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:797"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:798"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:800" class="idref" href="#m:800"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:791"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:797"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:800"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:798"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:800"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hsm</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_protocol_generated"><span class="id" title="lemma">VLSM_incl_protocol_generated</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_can_emit" class="idref" href="#pre_loaded_with_all_messages_can_emit"><span class="id" title="lemma">pre_loaded_with_all_messages_can_emit</span></a><br/>
&nbsp;&nbsp;{<a id="message:801" class="idref" href="#message:801"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:802" class="idref" href="#X:802"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:801"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:803" class="idref" href="#m:803"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:801"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:804" class="idref" href="#Hm:804"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:802"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:803"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:802"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#m:803"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm_machine"><span class="id" title="lemma">mk_vlsm_machine</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>

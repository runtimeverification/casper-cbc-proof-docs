<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#"><span class="id" title="library">ListSet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Logic.FinFun.html#"><span class="id" title="library">FinFun</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Reals.Reals.html#"><span class="id" title="library">Reals</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="CasperCBC.Lib.ListSetExtras.html#"><span class="id" title="library">ListSetExtras</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Classes.html#"><span class="id" title="library">Lib.Classes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.CBC.Common.html#"><span class="id" title="library">CBC.Common</span></a> <a class="idref" href="CasperCBC.CBC.Equivocation.html#"><span class="id" title="library">CBC.Equivocation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#"><span class="id" title="library">VLSM.Common</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#"><span class="id" title="library">VLSM.Composition</span></a> <a class="idref" href="CasperCBC.VLSM.Equivocation.html#"><span class="id" title="library">VLSM.Equivocation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#"><span class="id" title="library">VLSM.ProjectionTraces</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab58"></a><h1 class="section">Observable equivocation</h1>


<div class="paragraph"> </div>

In this section we define a notion of equivocation based on observations.

<div class="paragraph"> </div>

This approach is based on the intuition that a participant to the protocol
stores in its state knowledge about validators, obtained either directly or
through third parties.

<div class="paragraph"> </div>

We will consider this items of knowledge to be abstract objects of a
type <tt>event</tt>.
The <tt>event</tt> type is equiped with a decidable relation <span class="inlinecode"><span class="id" title="var">happens_before</span></span> which should tell
whether an event was generated befor another.

<div class="paragraph"> </div>

We assume that all events for a given validator must be comparable through
<span class="inlinecode"><span class="id" title="var">happens_before</span></span>. Under this assumption, if there are events for the same
validator which are not comparable through <span class="inlinecode"><span class="id" title="var">happens_before</span></span>, this constitutes
an <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence"><span class="id" title="method">equivocation_evidence</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a id="observation_based_equivocation_evidence" class="idref" href="#observation_based_equivocation_evidence"><span class="id" title="record">observation_based_equivocation_evidence</span></a><br/>
&nbsp;&nbsp;(<a id="state:1" class="idref" href="#state:1"><span class="id" title="binder">state</span></a> <a id="validator:2" class="idref" href="#validator:2"><span class="id" title="binder">validator</span></a> <a id="event:3" class="idref" href="#event:3"><span class="id" title="binder">event</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="event_eq:4" class="idref" href="#event_eq:4"><span class="id" title="binder">event_eq</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:3"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="happens_before:5" class="idref" href="#happens_before:5"><span class="id" title="binder">happens_before</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:3"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:3"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="happens_before_dec:6" class="idref" href="#happens_before_dec:6"><span class="id" title="binder">happens_before_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:5"><span class="id" title="variable">happens_before</span></a>) :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="observable_events" class="idref" href="#observable_events"><span class="id" title="projection">observable_events</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:1"><span class="id" title="variable">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:2"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:3"><span class="id" title="variable">event</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">equivocation_evidence</span> (<a id="s:11" class="idref" href="#s:11"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:1"><span class="id" title="variable">state</span></a>) (<a id="v:12" class="idref" href="#v:12"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:2"><span class="id" title="variable">validator</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="e1:13" class="idref" href="#e1:13"><span class="id" title="binder">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:13"><span class="id" title="variable">e1</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events:8"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:11"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:12"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="e2:14" class="idref" href="#e2:14"><span class="id" title="binder">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:14"><span class="id" title="variable">e2</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events:8"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:11"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:12"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:5"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:13"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:14"><span class="id" title="variable">e2</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="iff_dec" class="idref" href="#iff_dec"><span class="id" title="lemma">iff_dec</span></a> {<a id="P:16" class="idref" href="#P:16"><span class="id" title="binder">P</span></a> <a id="Q:17" class="idref" href="#Q:17"><span class="id" title="binder">Q</span></a> : <span class="id" title="keyword">Prop</span>}:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#P:16"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Q:17"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#Decision"><span class="id" title="class">Decision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#P:16"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#Decision"><span class="id" title="class">Decision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Q:17"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">firstorder</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ex_out" class="idref" href="#ex_out"><span class="id" title="lemma">ex_out</span></a> (<a id="A:18" class="idref" href="#A:18"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="P:19" class="idref" href="#P:19"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>) (<a id="Q:20" class="idref" href="#Q:20"><span class="id" title="binder">Q</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#A:18"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:21" class="idref" href="#x:21"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#P:19"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Q:20"><span class="id" title="variable">Q</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#x:21"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#P:19"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:22" class="idref" href="#x:22"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Q:20"><span class="id" title="variable">Q</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#x:22"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">firstorder</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="equivocation_evidence_dec" class="idref" href="#equivocation_evidence_dec"><span class="id" title="instance">equivocation_evidence_dec</span></a> {<a id="state:23" class="idref" href="#state:23"><span class="id" title="binder">state</span></a> <a id="validator:24" class="idref" href="#validator:24"><span class="id" title="binder">validator</span></a> <a id="event:25" class="idref" href="#event:25"><span class="id" title="binder">event</span></a>:<span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Hevidence:29" class="idref" href="#Hevidence:29"><span class="id" title="binder">Hevidence</span></a>: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="class">observation_based_equivocation_evidence</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:23"><span class="id" title="variable">state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:24"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:25"><span class="id" title="variable">event</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence"><span class="id" title="method">equivocation_evidence</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> (<span class="id" title="keyword">fun</span> <a id="e1:32" class="idref" href="#e1:32"><span class="id" title="binder">e1</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> (<span class="id" title="keyword">fun</span> <a id="e2:33" class="idref" href="#e2:33"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <span class="id" title="var">happens_before</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:30"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:31"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <span class="id" title="var">s</span> <span class="id" title="var">v</span>)) (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <span class="id" title="var">s</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence"><span class="id" title="method">equivocation_evidence</span></a> <span class="id" title="var">s</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence"><span class="id" title="method">equivocation_evidence</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms_Prop.html#ex_iff_morphism"><span class="id" title="instance">Morphisms_Prop.ex_iff_morphism</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#and_iff_compat_l"><span class="id" title="lemma">and_iff_compat_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms_Prop.html#ex_iff_morphism"><span class="id" title="instance">Morphisms_Prop.ex_iff_morphism</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">e2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#and_iff_compat_l"><span class="id" title="lemma">and_iff_compat_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#iff_dec"><span class="id" title="lemma">iff_dec</span></a> <span class="id" title="var">H</span>);<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#Exists_dec"><span class="id" title="lemma">Exists_dec</span></a>;<span class="id" title="tactic">intro</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#Exists_dec"><span class="id" title="lemma">Exists_dec</span></a>;<span class="id" title="tactic">intro</span> <span class="id" title="var">e2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Preamble.html#comparable_dec"><span class="id" title="instance">comparable_dec</span></a> <span class="id" title="var">happens_before</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>);[<span class="id" title="tactic">right</span>|<span class="id" title="tactic">left</span>];<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can use this notion of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="record">observation_based_equivocation_evidence</span></a></span>
 to obtain the <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.Equivocation.html#basic_equivocation"><span class="id" title="record">basic_equivocation</span></a></span> between states and validators.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="basic_observable_equivocation" class="idref" href="#basic_observable_equivocation"><span class="id" title="definition">basic_observable_equivocation</span></a><br/>
&nbsp;&nbsp;(<a id="state:34" class="idref" href="#state:34"><span class="id" title="binder">state</span></a> <a id="validator:35" class="idref" href="#validator:35"><span class="id" title="binder">validator</span></a> <a id="event:36" class="idref" href="#event:36"><span class="id" title="binder">event</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<a id="event_eq:37" class="idref" href="#event_eq:37"><span class="id" title="binder">event_eq</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:36"><span class="id" title="variable">event</span></a>}<br/>
&nbsp;&nbsp;(<a id="happens_before:38" class="idref" href="#happens_before:38"><span class="id" title="binder">happens_before</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:36"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:36"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;{<a id="happens_before_dec:39" class="idref" href="#happens_before_dec:39"><span class="id" title="binder">happens_before_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:38"><span class="id" title="variable">happens_before</span></a>}<br/>
&nbsp;&nbsp;{<a id="Hevidence:40" class="idref" href="#Hevidence:40"><span class="id" title="binder">Hevidence</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="class">observation_based_equivocation_evidence</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:34"><span class="id" title="variable">state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:35"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:36"><span class="id" title="variable">event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event_eq:37"><span class="id" title="variable">event_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:38"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before_dec:39"><span class="id" title="variable">happens_before_dec</span></a>}<br/>
&nbsp;&nbsp;{<a id="measurable_V:41" class="idref" href="#measurable_V:41"><span class="id" title="binder">measurable_V</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#Measurable"><span class="id" title="class">Measurable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:35"><span class="id" title="variable">validator</span></a>}<br/>
&nbsp;&nbsp;{<a id="reachable_threshold:42" class="idref" href="#reachable_threshold:42"><span class="id" title="binder">reachable_threshold</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#ReachableThreshold"><span class="id" title="class">ReachableThreshold</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:35"><span class="id" title="variable">validator</span></a>}<br/>
&nbsp;&nbsp;(<a id="validators:43" class="idref" href="#validators:43"><span class="id" title="binder">validators</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:34"><span class="id" title="variable">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:35"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="validators_nodup:45" class="idref" href="#validators_nodup:45"><span class="id" title="binder">validators_nodup</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:44" class="idref" href="#s:44"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:34"><span class="id" title="variable">state</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators:43"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:44"><span class="id" title="variable">s</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.CBC.Equivocation.html#basic_equivocation"><span class="id" title="class">basic_equivocation</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:34"><span class="id" title="variable">state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:35"><span class="id" title="variable">validator</span></a><br/>
&nbsp;&nbsp;:= {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.CBC.Equivocation.html#is_equivocating_fn"><span class="id" title="method">is_equivocating_fn</span></a> := <span class="id" title="keyword">fun</span> <a id="s:46" class="idref" href="#s:46"><span class="id" title="binder">s</span></a> <a id="v:47" class="idref" href="#v:47"><span class="id" title="binder">v</span></a> =&gt; @<a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence_dec"><span class="id" title="instance">equivocation_evidence_dec</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:46"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:47"><span class="id" title="variable">v</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.CBC.Equivocation.html#state_validators"><span class="id" title="method">state_validators</span></a> := <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators:43"><span class="id" title="variable">validators</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.CBC.Equivocation.html#state_validators_nodup"><span class="id" title="method">state_validators_nodup</span></a> := <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators_nodup:45"><span class="id" title="variable">validators_nodup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="not_heavy_incl" class="idref" href="#not_heavy_incl"><span class="id" title="section">not_heavy_incl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="state:48" class="idref" href="#state:48"><span class="id" title="binder">state</span></a> <a id="validator:49" class="idref" href="#validator:49"><span class="id" title="binder">validator</span></a> <a id="event:50" class="idref" href="#event:50"><span class="id" title="binder">event</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:51" class="idref" href="#EqDecision0:51"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:51" class="idref" href="#EqDecision0:51"><span class="id" title="binder">event</span></a>}<br/>
&nbsp;&nbsp;(<a id="v_eq:52" class="idref" href="#v_eq:52"><span class="id" title="binder">v_eq</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:49"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;{<a id="happens_before:53" class="idref" href="#happens_before:53"><span class="id" title="binder">happens_before</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:50"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:50"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;{<a id="happens_before_dec:54" class="idref" href="#happens_before_dec:54"><span class="id" title="binder">happens_before_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:53"><span class="id" title="variable">happens_before</span></a>}<br/>
&nbsp;&nbsp;{<a id="Hevidence:55" class="idref" href="#Hevidence:55"><span class="id" title="binder">Hevidence</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="class">observation_based_equivocation_evidence</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:48"><span class="id" title="variable">state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:49"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:50"><span class="id" title="variable">event</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:53"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before_dec:54"><span class="id" title="variable">happens_before_dec</span></a>}<br/>
&nbsp;&nbsp;{<a id="measurable_V:56" class="idref" href="#measurable_V:56"><span class="id" title="binder">measurable_V</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#Measurable"><span class="id" title="class">Measurable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:49"><span class="id" title="variable">validator</span></a>}<br/>
&nbsp;&nbsp;{<a id="reachable_threshold:57" class="idref" href="#reachable_threshold:57"><span class="id" title="binder">reachable_threshold</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#ReachableThreshold"><span class="id" title="class">ReachableThreshold</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:49"><span class="id" title="variable">validator</span></a>}<br/>
&nbsp;&nbsp;(<a id="validators:58" class="idref" href="#validators:58"><span class="id" title="binder">validators</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:48"><span class="id" title="variable">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:49"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="validators_nodup:60" class="idref" href="#validators_nodup:60"><span class="id" title="binder">validators_nodup</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:59" class="idref" href="#s:59"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:48"><span class="id" title="variable">state</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators:58"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:59"><span class="id" title="variable">s</span></a>))<br/>
&nbsp;&nbsp;(<a id="basic_eqv:61" class="idref" href="#basic_eqv:61"><span class="id" title="binder">basic_eqv</span></a> := <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#basic_observable_equivocation"><span class="id" title="definition">basic_observable_equivocation</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#state:48"><span class="id" title="variable">state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:49"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:50"><span class="id" title="variable">event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:53"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators:58"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators_nodup:60"><span class="id" title="variable">validators_nodup</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">basic_eqv</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equivocation_fault_incl" class="idref" href="#equivocation_fault_incl"><span class="id" title="lemma">equivocation_fault_incl</span></a><br/>
&nbsp;&nbsp;(<a id="sigma:62" class="idref" href="#sigma:62"><span class="id" title="binder">sigma</span></a> <a id="sigma':63" class="idref" href="#sigma':63"><span class="id" title="binder">sigma'</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.state"><span class="id" title="variable">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl_validators:64" class="idref" href="#Hincl_validators:64"><span class="id" title="binder">Hincl_validators</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.validators"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma:62"><span class="id" title="variable">sigma</span></a>) (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.validators"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma':63"><span class="id" title="variable">sigma'</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hincl:66" class="idref" href="#Hincl:66"><span class="id" title="binder">Hincl</span></a> : <span class="id" title="keyword">forall</span> <a id="v:65" class="idref" href="#v:65"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.validator"><span class="id" title="variable">validator</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma:62"><span class="id" title="variable">sigma</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:65"><span class="id" title="variable">v</span></a>) (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma':63"><span class="id" title="variable">sigma'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:65"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;: (<a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocation_fault"><span class="id" title="method">equivocation_fault</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma:62"><span class="id" title="variable">sigma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocation_fault"><span class="id" title="method">equivocation_fault</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma':63"><span class="id" title="variable">sigma'</span></a>)%<span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocation_fault"><span class="id" title="method">equivocation_fault</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocating_validators"><span class="id" title="method">equivocating_validators</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.CBC.Common.html#sum_weights_incl"><span class="id" title="lemma">sum_weights_incl</span></a>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#NoDup_filter"><span class="id" title="lemma">NoDup_filter</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#state_validators_nodup"><span class="id" title="method">state_validators_nodup</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl_tran"><span class="id" title="lemma">incl_tran</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="CasperCBC.CBC.Equivocation.html#is_equivocating_fn"><span class="id" title="method">is_equivocating_fn</span></a> <span class="id" title="var">sigma'</span>) (<a class="idref" href="CasperCBC.CBC.Equivocation.html#state_validators"><span class="id" title="method">state_validators</span></a> <span class="id" title="var">sigma</span>))<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#filter_incl"><span class="id" title="lemma">filter_incl</span></a>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#filter_incl_fn"><span class="id" title="lemma">filter_incl_fn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">v</span>. <span class="id" title="var">spec</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence"><span class="id" title="method">equivocation_evidence</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide_eq_true"><span class="id" title="lemma">bool_decide_eq_true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">Hincl</span>;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;If&nbsp;a&nbsp;state&nbsp;is&nbsp;not&nbsp;overweight,&nbsp;none&nbsp;of&nbsp;its&nbsp;subsets&nbsp;are&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="not_heavy_incl" class="idref" href="#not_heavy_incl"><span class="id" title="lemma">not_heavy_incl</span></a><br/>
&nbsp;&nbsp;(<a id="sigma:67" class="idref" href="#sigma:67"><span class="id" title="binder">sigma</span></a> <a id="sigma':68" class="idref" href="#sigma':68"><span class="id" title="binder">sigma'</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.state"><span class="id" title="variable">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl_validators:69" class="idref" href="#Hincl_validators:69"><span class="id" title="binder">Hincl_validators</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.validators"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma:67"><span class="id" title="variable">sigma</span></a>) (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.validators"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma':68"><span class="id" title="variable">sigma'</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hincl:71" class="idref" href="#Hincl:71"><span class="id" title="binder">Hincl</span></a> : <span class="id" title="keyword">forall</span> <a id="v:70" class="idref" href="#v:70"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl.validator"><span class="id" title="variable">validator</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma:67"><span class="id" title="variable">sigma</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:70"><span class="id" title="variable">v</span></a>) (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma':68"><span class="id" title="variable">sigma'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:70"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hsigma':72" class="idref" href="#Hsigma':72"><span class="id" title="binder">Hsigma'</span></a> : <a class="idref" href="CasperCBC.CBC.Equivocation.html#not_heavy"><span class="id" title="method">not_heavy</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma':68"><span class="id" title="variable">sigma'</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.CBC.Equivocation.html#not_heavy"><span class="id" title="method">not_heavy</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sigma:67"><span class="id" title="variable">sigma</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Reals.RIneq.html#Rle_trans"><span class="id" title="lemma">Rle_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocation_fault"><span class="id" title="method">equivocation_fault</span></a> <span class="id" title="var">sigma'</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_fault_incl"><span class="id" title="lemma">equivocation_fault_incl</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_heavy_incl"><span class="id" title="section">not_heavy_incl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="observable_equivocation_in_composition" class="idref" href="#observable_equivocation_in_composition"><span class="id" title="section">observable_equivocation_in_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab59"></a><h2 class="section">Observable messages in a VLSM composition</h2>


<div class="paragraph"> </div>

We assume a composition of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>s where each machine has a way to
produce <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="record">observation_based_equivocation_evidence</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:73" class="idref" href="#message:73"><span class="id" title="binder">message</span></a> <a id="validator:74" class="idref" href="#validator:74"><span class="id" title="binder">validator</span></a> <a id="event:75" class="idref" href="#event:75"><span class="id" title="binder">event</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:76" class="idref" href="#EqDecision0:76"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:76" class="idref" href="#EqDecision0:76"><span class="id" title="binder">event</span></a>}<br/>
&nbsp;&nbsp;{<a id="happens_before:77" class="idref" href="#happens_before:77"><span class="id" title="binder">happens_before</span></a>: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:75"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:75"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;{<a id="happens_before_dec:78" class="idref" href="#happens_before_dec:78"><span class="id" title="binder">happens_before_dec</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:77"><span class="id" title="variable">happens_before</span></a>}<br/>
&nbsp;&nbsp;{<a id="index:79" class="idref" href="#index:79"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision1:80" class="idref" href="#EqDecision1:80"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:80" class="idref" href="#EqDecision1:80"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="index_listing:81" class="idref" href="#index_listing:81"><span class="id" title="binder">index_listing</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:79"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="finite_index:82" class="idref" href="#finite_index:82"><span class="id" title="binder">finite_index</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Logic.FinFun.html#Listing"><span class="id" title="definition">Listing</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index_listing:81"><span class="id" title="variable">index_listing</span></a>)<br/>
&nbsp;&nbsp;(<a id="IM:83" class="idref" href="#IM:83"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:79"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message:73"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hevidence:85" class="idref" href="#Hevidence:85"><span class="id" title="binder">Hevidence</span></a> : <span class="id" title="keyword">forall</span> (<a id="i:84" class="idref" href="#i:84"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:79"><span class="id" title="variable">index</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="class">observation_based_equivocation_evidence</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:83"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:84"><span class="id" title="variable">i</span></a>)) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:74"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:75"><span class="id" title="variable">event</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:77"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before_dec:78"><span class="id" title="variable">happens_before_dec</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="i0:86" class="idref" href="#i0:86"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:79"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:87" class="idref" href="#constraint:87"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:83"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:83"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message:73"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="X:88" class="idref" href="#X:88"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:83"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i0:86"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#constraint:87"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="PreX:89" class="idref" href="#PreX:89"><span class="id" title="binder">PreX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#X:88"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
It is easy to define a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="record">observation_based_equivocation_evidence</span></a></span> mechanism for
the composition, by just defining the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="projection">observable_events</span></a></span> for the composite state
to be the union of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="projection">observable_events</span></a></span> for each of the component states.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="composed_observable_events" class="idref" href="#composed_observable_events"><span class="id" title="definition">composed_observable_events</span></a><br/>
&nbsp;&nbsp;(<a id="s:90" class="idref" href="#s:90"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:91" class="idref" href="#v:91"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_union"><span class="id" title="definition">set_union</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:92" class="idref" href="#i:92"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:90"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:92"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:91"><span class="id" title="variable">v</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index_listing"><span class="id" title="variable">index_listing</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composed_observation_based_equivocation_evidence" class="idref" href="#composed_observation_based_equivocation_evidence"><span class="id" title="definition">composed_observation_based_equivocation_evidence</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="class">observation_based_equivocation_evidence</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before_dec"><span class="id" title="variable">happens_before_dec</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> := <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composed_observable_events"><span class="id" title="definition">composed_observable_events</span></a> |}.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">composed_observation_based_equivocation_evidence</span>.<br/>

<br/>
</div>

<div class="doc">
Let us now factor <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>s into the event observability framework.

<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message_observable_events"><span class="id" title="projection">message_observable_events</span></a></span> can be extracted from any message.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="composite_vlsm_observable_messages" class="idref" href="#composite_vlsm_observable_messages"><span class="id" title="record">composite_vlsm_observable_messages</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{<br/>
</div>

<div class="doc">
To simplify the presentation, we assume that no events can be observed in
initial states.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="no_events_in_initial_state" class="idref" href="#no_events_in_initial_state"><span class="id" title="projection">no_events_in_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:94" class="idref" href="#s:94"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="His:95" class="idref" href="#His:95"><span class="id" title="binder">His</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:94"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:96" class="idref" href="#v:96"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:94"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:96"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>;<br/>
<br/>
</div>

<div class="doc">
We assume that machines communicate through messages,
and that messages can carry some of the information of their originating
states.

<div class="paragraph"> </div>

To formalize that, we willl assume a function <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message_observable_events"><span class="id" title="projection">message_observable_events</span></a></span>
yielding the events which can be observed in a message for a validator,
and we will require that we cannot observe in a sent message events which
were not available in the transition that generated it
(<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message_observable_consistency"><span class="id" title="projection">message_observable_consistency</span></a></span>).

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="message_observable_events" class="idref" href="#message_observable_events"><span class="id" title="projection">message_observable_events</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="message_observable_consistency" class="idref" href="#message_observable_consistency"><span class="id" title="projection">message_observable_consistency</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:99" class="idref" href="#m:99"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:100" class="idref" href="#v:100"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:101" class="idref" href="#som:101"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:102" class="idref" href="#l:102"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:103" class="idref" href="#s:103"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:104" class="idref" href="#Ht:104"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#l:102"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#som:101"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:103"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#m:99"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message_observable_events:98"><span class="id" title="method">message_observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#m:99"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:100"><span class="id" title="variable">v</span></a>) (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:103"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#l:102"><span class="id" title="variable">l</span></a>)) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:100"><span class="id" title="variable">v</span></a>);<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="Hcomposite:106" class="idref" href="#Hcomposite:106"><span class="id" title="binder">Hcomposite</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composite_vlsm_observable_messages"><span class="id" title="class">composite_vlsm_observable_messages</span></a>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision2:107" class="idref" href="#EqDecision2:107"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision2:107" class="idref" href="#EqDecision2:107"><span class="id" title="binder">message</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_message_observable_events" class="idref" href="#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a><br/>
&nbsp;&nbsp;(<a id="om:108" class="idref" href="#om:108"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:109" class="idref" href="#v:109"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#om:108"><span class="id" title="variable">om</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span> =&gt; <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message_observable_events"><span class="id" title="method">message_observable_events</span></a> <span class="id" title="var">m</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:109"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
An useful result, corollary of the abstract <span class="inlinecode"><a class="idref" href="CasperCBC.Lib.ListExtras.html#existsb_first"><span class="id" title="lemma">existsb_first</span></a></span> says that if
an event is observed into the final state of a trace, there must be a
prefix of the trace with the same property and no prior observation of
the event.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="in_observable_events_first" class="idref" href="#in_observable_events_first"><span class="id" title="lemma">in_observable_events_first</span></a><br/>
&nbsp;&nbsp;(<a id="is:111" class="idref" href="#is:111"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:112" class="idref" href="#tr:112"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:113" class="idref" href="#Htr:113"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:111"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:112"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:114" class="idref" href="#v:114"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:115" class="idref" href="#e:115"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:116" class="idref" href="#s:116"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:112"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:111"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="He:117" class="idref" href="#He:117"><span class="id" title="binder">He</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:115"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:116"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:114"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="pre:118" class="idref" href="#pre:118"><span class="id" title="binder">pre</span></a> <a id="suf:119" class="idref" href="#suf:119"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:120" class="idref" href="#item:120"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:121" class="idref" href="#Heq:121"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:112"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#pre:118"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:120"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#suf:119"><span class="id" title="variable">suf</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="He':122" class="idref" href="#He':122"><span class="id" title="binder">He'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:115"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:120"><span class="id" title="variable">item</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:114"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="item:123" class="idref" href="#item:123"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:115"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:123"><span class="id" title="variable">item</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:114"><span class="id" title="variable">v</span></a>)) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#pre:118"><span class="id" title="variable">pre</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htr0</span> : <span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">reflexivity</span>) || (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">discriminate</span> <span class="id" title="var">contra</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr0</span> | <span class="id" title="var">Htr0</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">His</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#no_events_in_initial_state"><span class="id" title="method">no_events_in_initial_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="keyword">is</span>) <span class="id" title="var">His</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hno</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="keyword">is</span>) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#exists_last"><span class="id" title="lemma">exists_last</span></a> <span class="id" title="var">Htr0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">l'</span> [<span class="id" title="var">a</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#existsb_first"><span class="id" title="lemma">existsb_first</span></a> <span class="id" title="var">tr</span> (<span class="id" title="keyword">fun</span> <a id="item:125" class="idref" href="#item:125"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.ListExtras.html#inb"><span class="id" title="definition">inb</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <span class="id" title="var">e</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:124"><span class="id" title="variable">item</span></a>) <span class="id" title="var">v</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hfirst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hfirst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last_last"><span class="id" title="lemma">last_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfirst</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre</span> [<span class="id" title="var">suf</span> [<span class="id" title="var">a'</span> [<span class="id" title="var">He'</span> [<span class="id" title="var">Heq'</span> <span class="id" title="var">Hfirst</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#existsb_forall"><span class="id" title="lemma">existsb_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfirst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">pre</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">suf</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a'</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">He'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfirst</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct'"><span class="id" title="lemma">in_correct'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfirst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab60"></a><h2 class="section">Defining observable equivocation based on observable messages</h2>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

We call <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a></span> a new event for validator <tt>v</tt> which
appeared as result of a transition in a trace, that is, which it was
not in the state prior to the transition, nor in the received message,
but it is in the state resulted after the transition.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_generated_event" class="idref" href="#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a><br/>
&nbsp;&nbsp;(<a id="is:126" class="idref" href="#is:126"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:127" class="idref" href="#tr:127"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="v:128" class="idref" href="#v:128"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:129" class="idref" href="#e:129"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="prefix:130" class="idref" href="#prefix:130"><span class="id" title="binder">prefix</span></a> <a id="suffix:131" class="idref" href="#suffix:131"><span class="id" title="binder">suffix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:132" class="idref" href="#item:132"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:133" class="idref" href="#Heq:133"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:127"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:130"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:132"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#suffix:131"><span class="id" title="variable">suffix</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:134" class="idref" href="#i:134"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:132"><span class="id" title="variable">item</span></a>))<br/>
&nbsp;&nbsp;(<a id="s:135" class="idref" href="#s:135"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:130"><span class="id" title="variable">prefix</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:126"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':136" class="idref" href="#s':136"><span class="id" title="binder">s'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:132"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:129"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_diff"><span class="id" title="definition">set_diff</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s':136"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:134"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:128"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_union"><span class="id" title="definition">set_union</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:135"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:134"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:128"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:132"><span class="id" title="variable">item</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:128"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_generated_event_fn" class="idref" href="#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a><br/>
&nbsp;&nbsp;(<a id="is:137" class="idref" href="#is:137"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:138" class="idref" href="#tr:138"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="v:139" class="idref" href="#v:139"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:140" class="idref" href="#e:140"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="t:141" class="idref" href="#t:141"><span class="id" title="binder">t</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#t:141"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="i:143" class="idref" href="#i:143"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s:144" class="idref" href="#s:144"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:137"><span class="id" title="variable">is</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s':145" class="idref" href="#s':145"><span class="id" title="binder">s'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.ListExtras.html#inb"><span class="id" title="definition">inb</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:140"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_diff"><span class="id" title="definition">set_diff</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s':145"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:143"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:139"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_union"><span class="id" title="definition">set_union</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:144"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:143"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:139"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <span class="id" title="var">item</span>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:139"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#one_element_decompositions"><span class="id" title="definition">one_element_decompositions</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:138"><span class="id" title="variable">tr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_generated_event_function" class="idref" href="#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a><br/>
&nbsp;&nbsp;(<a id="is:146" class="idref" href="#is:146"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:147" class="idref" href="#tr:147"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="v:148" class="idref" href="#v:148"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:149" class="idref" href="#e:149"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:146"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:147"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:148"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:149"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:146"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:147"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:148"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:149"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">pre</span> [<span class="id" title="var">suf</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Hin</span>]]]]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">suf</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_one_element_decompositions_iff"><span class="id" title="lemma">in_one_element_decompositions_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [((<span class="id" title="var">pre</span>, <span class="id" title="var">item</span>), <span class="id" title="var">suf</span>) [<span class="id" title="var">Hdec</span> <span class="id" title="var">H</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_one_element_decompositions_iff"><span class="id" title="lemma">in_one_element_decompositions_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">pre</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">suf</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">item</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hdec</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If an event is generated by a trace <tt>tr</tt>, then it's also generated by
any trace having <tt>tr</tt> as a prefix.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="trace_generated_prefix" class="idref" href="#trace_generated_prefix"><span class="id" title="lemma">trace_generated_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="is:150" class="idref" href="#is:150"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="pre:151" class="idref" href="#pre:151"><span class="id" title="binder">pre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="v:152" class="idref" href="#v:152"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:153" class="idref" href="#e:153"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hgen:154" class="idref" href="#Hgen:154"><span class="id" title="binder">Hgen</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:150"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#pre:151"><span class="id" title="variable">pre</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:152"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:153"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;(<a id="suf:155" class="idref" href="#suf:155"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:150"><span class="id" title="variable">is</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#pre:151"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#suf:155"><span class="id" title="variable">suf</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:152"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:153"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hgen</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre'</span> [<span class="id" title="var">suf'</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Hgen</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">pre'</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">suf'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">suf</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">pre</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Conversely, if an event is not generated by a trace, then it's not
generated by any of its prefixes.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="not_trace_generated_prefix" class="idref" href="#not_trace_generated_prefix"><span class="id" title="lemma">not_trace_generated_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="is:156" class="idref" href="#is:156"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="pre:157" class="idref" href="#pre:157"><span class="id" title="binder">pre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="v:158" class="idref" href="#v:158"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:159" class="idref" href="#e:159"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="suf:160" class="idref" href="#suf:160"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hngen:161" class="idref" href="#Hngen:161"><span class="id" title="binder">Hngen</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:156"><span class="id" title="variable">is</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#pre:157"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#suf:160"><span class="id" title="variable">suf</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:158"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:159"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:156"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#pre:157"><span class="id" title="variable">pre</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:158"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:159"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">Hngen</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_prefix"><span class="id" title="lemma">trace_generated_prefix</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An event which was not generated prior to reaching a trace, but it is
observable in its final state must come from the previous state or
the incoming message.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="not_trace_generated_event" class="idref" href="#not_trace_generated_event"><span class="id" title="lemma">not_trace_generated_event</span></a><br/>
&nbsp;&nbsp;(<a id="is:162" class="idref" href="#is:162"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:163" class="idref" href="#tr:163"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="v:164" class="idref" href="#v:164"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:165" class="idref" href="#e:165"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hne:166" class="idref" href="#Hne:166"><span class="id" title="binder">Hne</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:162"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:163"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:164"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:165"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;(<a id="prefix:167" class="idref" href="#prefix:167"><span class="id" title="binder">prefix</span></a> <a id="suffix:168" class="idref" href="#suffix:168"><span class="id" title="binder">suffix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:169" class="idref" href="#item:169"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:170" class="idref" href="#Heq:170"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:163"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:167"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:169"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#suffix:168"><span class="id" title="variable">suffix</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:171" class="idref" href="#i:171"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:169"><span class="id" title="variable">item</span></a>))<br/>
&nbsp;&nbsp;(<a id="s:172" class="idref" href="#s:172"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:167"><span class="id" title="variable">prefix</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:162"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':173" class="idref" href="#s':173"><span class="id" title="binder">s'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:169"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hin:174" class="idref" href="#Hin:174"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:165"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s':173"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:171"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:164"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:165"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:172"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:171"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:164"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:165"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:169"><span class="id" title="variable">item</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:164"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">v</span> <span class="id" title="var">e</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">Hne</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#existsb_forall"><span class="id" title="lemma">existsb_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hne'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prefix</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">suffix</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_one_element_decompositions_iff"><span class="id" title="lemma">in_one_element_decompositions_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hne'</span> <span class="id" title="var">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct'"><span class="id" title="lemma">in_correct'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_diff_iff"><span class="id" title="lemma">set_diff_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_union_iff"><span class="id" title="lemma">set_union_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Bool.Bool.html#orb_true_iff"><span class="id" title="lemma">Bool.orb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_correct"><span class="id" title="lemma">in_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Bool.Bool.html#orb_true_iff"><span class="id" title="lemma">Bool.orb_true_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#inb"><span class="id" title="definition">inb</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">prefix</span>) <span class="id" title="keyword">is</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <span class="id" title="var">item</span>))) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#inb"><span class="id" title="definition">inb</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <span class="id" title="var">e</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <span class="id" title="var">item</span>) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">bool</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqn</span>:<span class="id" title="var">Hor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">Hne'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">contra</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We say that an equivocation of validator <tt>v</tt> can be observed in the
last state <tt>s</tt> of a trace (<span class="inlinecode"><span class="id" title="var">equivocating_trace_last</span></span>) if there is an
<span class="inlinecode"><span class="id" title="var">observable_event</span></span> for <tt>v</tt> in s, which was no <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a></span>
in the same trace.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="equivocating_in_trace_last" class="idref" href="#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a><br/>
&nbsp;&nbsp;(<a id="is:175" class="idref" href="#is:175"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:176" class="idref" href="#tr:176"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:177" class="idref" href="#s:177"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:176"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:175"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:178" class="idref" href="#v:178"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="e:179" class="idref" href="#e:179"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="He:180" class="idref" href="#He:180"><span class="id" title="binder">He</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:179"><span class="id" title="variable">e</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:177"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:178"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:175"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:176"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:178"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:179"><span class="id" title="variable">e</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="equivocating_in_trace_last_fn" class="idref" href="#equivocating_in_trace_last_fn"><span class="id" title="definition">equivocating_in_trace_last_fn</span></a><br/>
&nbsp;&nbsp;(<a id="is:181" class="idref" href="#is:181"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:182" class="idref" href="#tr:182"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:183" class="idref" href="#s:183"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:182"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:181"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:184" class="idref" href="#v:184"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:185" class="idref" href="#e:185"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:181"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:182"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:184"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:185"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:183"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:184"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equivocating_in_trace_last_function" class="idref" href="#equivocating_in_trace_last_function"><span class="id" title="lemma">equivocating_in_trace_last_function</span></a><br/>
&nbsp;&nbsp;(<a id="is:186" class="idref" href="#is:186"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:187" class="idref" href="#tr:187"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:188" class="idref" href="#v:188"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:186"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:187"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:188"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last_fn"><span class="id" title="definition">equivocating_in_trace_last_fn</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:186"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:187"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:188"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">e</span> [<span class="id" title="var">He</span> <span class="id" title="var">Hnobs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last_fn"><span class="id" title="definition">equivocating_in_trace_last_fn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">v</span> <span class="id" title="var">e</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">Hnobs</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> [<span class="id" title="var">Hin</span> <span class="id" title="var">H</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">contra</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Since the initial state has no events, no equivocations can exist in an
empty protocol trace.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="not_equivocating_in_trace_last_initial" class="idref" href="#not_equivocating_in_trace_last_initial"><span class="id" title="lemma">not_equivocating_in_trace_last_initial</span></a><br/>
&nbsp;&nbsp;(<a id="s:189" class="idref" href="#s:189"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:190" class="idref" href="#Hs:190"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:189"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:191" class="idref" href="#v:191"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:189"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:191"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">contra</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> [<span class="id" title="var">He</span> <span class="id" title="var">Hne</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#no_events_in_initial_state"><span class="id" title="method">no_events_in_initial_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="var">s</span>) <span class="id" title="var">Hs</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hno</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="var">s</span>) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">He</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We say that <tt>v</tt> is <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace"><span class="id" title="definition">equivocating_in_trace</span></a></span> <tt>tr</tt> if there is
a prefix of <tt>tr</tt> such that v is <span class="inlinecode"><span class="id" title="var">equivocating_trace_last</span></span> w.r.t. that
prefix.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="equivocating_in_trace" class="idref" href="#equivocating_in_trace"><span class="id" title="definition">equivocating_in_trace</span></a><br/>
&nbsp;&nbsp;(<a id="tr:192" class="idref" href="#tr:192"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:193" class="idref" href="#v:193"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="prefix:194" class="idref" href="#prefix:194"><span class="id" title="binder">prefix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="last:195" class="idref" href="#last:195"><span class="id" title="binder">last</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpr:196" class="idref" href="#Hpr:196"><span class="id" title="binder">Hpr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:192"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#last:195"><span class="id" title="variable">last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:194"><span class="id" title="variable">prefix</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#trace_first"><span class="id" title="definition">trace_first</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:192"><span class="id" title="variable">tr</span></a>)) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:194"><span class="id" title="variable">prefix</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:193"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
We say that <tt>v</tt> is <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">equivocating_in_all_traces_ending_in_state</span></a></span> <tt>s</tt> if it is
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a></span> w.r.t. all <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s ending in <tt>s</tt>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="equivocating_in_all_traces_ending_in_state" class="idref" href="#equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">equivocating_in_all_traces_ending_in_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:197" class="idref" href="#s:197"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:198" class="idref" href="#v:198"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:199" class="idref" href="#is:199"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:200" class="idref" href="#tr:200"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:201" class="idref" href="#Htr:201"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:199"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:200"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hlast:202" class="idref" href="#Hlast:202"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:200"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:199"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:197"><span class="id" title="variable">s</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:199"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:200"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:198"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next property holds for states <tt>s</tt> and validators <tt>v</tt> for which there
exists at least one trace ending in <tt>s</tt> and not equivocating in <tt>v</tt>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="not_equivocating_in_some_traces_ending_in_state" class="idref" href="#not_equivocating_in_some_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_some_traces_ending_in_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:203" class="idref" href="#s:203"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:204" class="idref" href="#v:204"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:205" class="idref" href="#is:205"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:206" class="idref" href="#tr:206"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:207" class="idref" href="#Htr:207"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:205"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:206"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hlast:208" class="idref" href="#Hlast:208"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:206"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:205"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:203"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:205"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:206"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:204"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next property holds for states <tt>s</tt> and validators <tt>v</tt> for which
all protocol traces ending in <tt>s</tt> are not equivocating in <tt>v</tt>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="not_equivocating_in_all_traces_ending_in_state" class="idref" href="#not_equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_all_traces_ending_in_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:209" class="idref" href="#s:209"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:210" class="idref" href="#v:210"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:211" class="idref" href="#is:211"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:212" class="idref" href="#tr:212"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:213" class="idref" href="#Htr:213"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:211"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:212"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hlast:214" class="idref" href="#Hlast:214"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:212"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:211"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:209"><span class="id" title="variable">s</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:211"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:212"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:210"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
Given that each protocol state has a witness trace, it follow that
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_all_traces_ending_in_state</span></a></span> implies
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_some_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_some_traces_ending_in_state</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="not_equivocating_in_traces_ending_in_state" class="idref" href="#not_equivocating_in_traces_ending_in_state"><span class="id" title="lemma">not_equivocating_in_traces_ending_in_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:215" class="idref" href="#s:215"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:216" class="idref" href="#v:216"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hall:217" class="idref" href="#Hall:217"><span class="id" title="binder">Hall</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_all_traces_ending_in_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:215"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:216"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_some_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_some_traces_ending_in_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:215"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:216"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span> | [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hlast</span> <span class="id" title="var">_</span>]]]]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_trace_last_initial"><span class="id" title="lemma">not_equivocating_in_trace_last_initial</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlst</span> := <a class="idref" href="CasperCBC.VLSM.Common.html#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">s</span> <span class="id" title="var">Hlast</span> <span class="id" title="keyword">is</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hlst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hall</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Hlst</span>). <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab61"></a><h2 class="section">Linking observable equivocation to message-based equivocation</h2>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

This shows that if there exists an event which is observable for a
validator <tt>v</tt> in the last state of a trace but which was not generated
by <tt>v</tt> during the trace <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a></span>, then there exists
a message <tt>m</tt> which was received but not sent in the trace
<span class="inlinecode"><span class="id" title="var">VLSM.Equivocation.equivocation_in_trace</span></span>.

<div class="paragraph"> </div>

Note that this result does not guarantee that the sender of <tt>m</tt> is <tt>v</tt>.
To achieve that we would need additional <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages"><span class="id" title="record">unforgeable_messages</span></a></span> assumptions.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="event_equivocation_implies_message_equivocation" class="idref" href="#event_equivocation_implies_message_equivocation"><span class="id" title="lemma">event_equivocation_implies_message_equivocation</span></a><br/>
&nbsp;&nbsp;(<a id="is:218" class="idref" href="#is:218"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:219" class="idref" href="#tr:219"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:220" class="idref" href="#Htr:220"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:218"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:219"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:221" class="idref" href="#v:221"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heqv:222" class="idref" href="#Heqv:222"><span class="id" title="binder">Heqv</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:218"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:219"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:221"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="m:223" class="idref" href="#m:223"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="CasperCBC.VLSM.Equivocation.html#equivocation_in_trace"><span class="id" title="definition">VLSM.Equivocation.equivocation_in_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#m:223"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:219"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> [<span class="id" title="var">He</span> <span class="id" title="var">Hne</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#in_observable_events_first"><span class="id" title="lemma">in_observable_events_first</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">He</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre</span> [<span class="id" title="var">suf</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">He</span> <span class="id" title="var">Hpre</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_trace_generated_prefix"><span class="id" title="lemma">not_trace_generated_prefix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hne</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">His</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">item</span> <span class="id" title="var">tl</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListSetExtras.html#set_union_in_iterated"><span class="id" title="lemma">set_union_in_iterated</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">He</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">esi</span> [<span class="id" title="var">Hesi</span> <span class="id" title="var">He</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hesi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hesi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> [<span class="id" title="var">Hesi</span> <span class="id" title="var">Hi</span>]]. <span class="id" title="tactic">subst</span> <span class="id" title="var">esi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnpre</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">e</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span>) <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpre0</span>: <span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>; (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">reflexivity</span>) || (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">discriminate</span> <span class="id" title="var">contra</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpre0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpre0</span> | <span class="id" title="var">Hpre0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">pre</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#no_events_in_initial_state"><span class="id" title="method">no_events_in_initial_state</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">His</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hno</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composed_observable_events"><span class="id" title="definition">composed_observable_events</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#exists_last"><span class="id" title="lemma">exists_last</span></a> <span class="id" title="var">Hpre0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">pre'</span> [<span class="id" title="var">item'</span> <span class="id" title="var">Heq'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last_last"><span class="id" title="lemma">last_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hpre</span> <span class="id" title="var">item'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnei</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">e</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)) <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">Hnpre</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListSetExtras.html#set_union_in_iterated"><span class="id" title="lemma">set_union_in_iterated</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)) <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.finite_index"><span class="id" title="variable">finite_index</span></a>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_trace_generated_event"><span class="id" title="lemma">not_trace_generated_event</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hne</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> {| <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">s</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="keyword">as</span> <span class="id" title="var">Hng</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hng</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hng</span> <span class="id" title="var">He</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hng</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hng</span> | <span class="id" title="var">Hng</span>]; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">elim</span> <span class="id" title="var">Hnei</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">iom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hng</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">pre</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">suf</span>. <span class="id" title="tactic">exists</span> {| <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">s</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> |}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">contra</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">item'</span> [<span class="id" title="var">Hout</span> <span class="id" title="var">Hitem'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hpre</span> <span class="id" title="var">item'</span> <span class="id" title="var">Hitem'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_split"><span class="id" title="lemma">in_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hitem'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre'</span> [<span class="id" title="var">suf'</span> <span class="id" title="var">Hitem'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span> <span class="id" title="var">item'</span> <span class="id" title="var">tl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hout</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">oom0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message_observable_consistency"><span class="id" title="method">message_observable_consistency</span></a> <span class="id" title="var">m</span> <span class="id" title="var">v</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hng</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListSetExtras.html#set_union_in_iterated"><span class="id" title="lemma">set_union_in_iterated</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<span class="id" title="var">s0</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l0</span>)) <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l0</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.finite_index"><span class="id" title="variable">finite_index</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span> <span class="id" title="var">Hnpre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListSetExtras.html#set_union_in_iterated"><span class="id" title="lemma">set_union_in_iterated</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span> <span class="id" title="var">i</span>) <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_transition_state_neq"><span class="id" title="lemma">composite_transition_state_neq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H3</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The counter-positive of the above: if there exists no message <tt>m</tt> which
was received but not sent in the trace, then, for any validator <tt>v</tt>
<div class="paragraph"> </div>

there exists no event which is observable for <tt>v</tt> but not generated
during the trace.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="event_equivocation_implies_message_equivocation_converse" class="idref" href="#event_equivocation_implies_message_equivocation_converse"><span class="id" title="lemma">event_equivocation_implies_message_equivocation_converse</span></a><br/>
&nbsp;&nbsp;(<a id="is:224" class="idref" href="#is:224"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:225" class="idref" href="#tr:225"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:226" class="idref" href="#Htr:226"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:224"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:225"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hneqv:228" class="idref" href="#Hneqv:228"><span class="id" title="binder">Hneqv</span></a> : <span class="id" title="keyword">forall</span> (<a id="m:227" class="idref" href="#m:227"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.message"><span class="id" title="variable">message</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.Equivocation.html#equivocation_in_trace"><span class="id" title="definition">VLSM.Equivocation.equivocation_in_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#m:227"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:225"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:229" class="idref" href="#v:229"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:224"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:225"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:229"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event_equivocation_implies_message_equivocation"><span class="id" title="lemma">event_equivocation_implies_message_equivocation</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">contra</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">contra</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<span class="id" title="var">Hneqv</span> <span class="id" title="var">m</span>). <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab62"></a><h2 class="section">Linking evidence of equivocation with observable equivocation</h2>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

The class below links <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composite_vlsm_observable_messages"><span class="id" title="record">composite_vlsm_observable_messages</span></a></span> with
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="record">observation_based_equivocation_evidence</span></a></span> by requiring that all
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a></span>s for the same validator are <span class="inlinecode"><a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a></span> through
the <span class="inlinecode"><span class="id" title="var">happens_before</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="composite_vlsm_comparable_generated_events" class="idref" href="#composite_vlsm_comparable_generated_events"><span class="id" title="record">composite_vlsm_comparable_generated_events</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="comparable_generated_events" class="idref" href="#comparable_generated_events"><span class="id" title="projection">comparable_generated_events</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:231" class="idref" href="#is:231"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:232" class="idref" href="#tr:232"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:233" class="idref" href="#Htr:233"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:231"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:232"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:234" class="idref" href="#v:234"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e1:235" class="idref" href="#e1:235"><span class="id" title="binder">e1</span></a> <a id="e2:236" class="idref" href="#e2:236"><span class="id" title="binder">e2</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="He1:237" class="idref" href="#He1:237"><span class="id" title="binder">He1</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:231"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:232"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:234"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:235"><span class="id" title="variable">e1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="He2:238" class="idref" href="#He2:238"><span class="id" title="binder">He2</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:231"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:232"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:234"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:236"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:235"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:236"><span class="id" title="variable">e2</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="Hcomparable_generated_events:240" class="idref" href="#Hcomparable_generated_events:240"><span class="id" title="binder">Hcomparable_generated_events</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composite_vlsm_comparable_generated_events"><span class="id" title="class">composite_vlsm_comparable_generated_events</span></a>}.<br/>

<br/>
</div>

<div class="doc">
A helping lemma: if two events obsevable for <tt>v</tt> in the last state of
a protocol trace are uncomparable and one of them is generated, then
there exists an equivocation (the other cannot be).

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="uncomparable_with_generated_event_equivocation" class="idref" href="#uncomparable_with_generated_event_equivocation"><span class="id" title="lemma">uncomparable_with_generated_event_equivocation</span></a><br/>
&nbsp;&nbsp;(<a id="is:241" class="idref" href="#is:241"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:242" class="idref" href="#tr:242"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:243" class="idref" href="#Htr:243"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:241"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:242"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:244" class="idref" href="#v:244"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e1:245" class="idref" href="#e1:245"><span class="id" title="binder">e1</span></a> <a id="e2:246" class="idref" href="#e2:246"><span class="id" title="binder">e2</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:247" class="idref" href="#s:247"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:242"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:241"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="He1:248" class="idref" href="#He1:248"><span class="id" title="binder">He1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:245"><span class="id" title="variable">e1</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:247"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:244"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="He2:249" class="idref" href="#He2:249"><span class="id" title="binder">He2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:246"><span class="id" title="variable">e2</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:247"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:244"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hnc:250" class="idref" href="#Hnc:250"><span class="id" title="binder">Hnc</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:245"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:246"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hgen1:251" class="idref" href="#Hgen1:251"><span class="id" title="binder">Hgen1</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:241"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:242"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:244"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:245"><span class="id" title="variable">e1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_trace_last"><span class="id" title="definition">equivocating_in_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:241"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:242"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:244"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">v</span> <span class="id" title="var">e2</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hgen2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hnc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#comparable_generated_events"><span class="id" title="method">comparable_generated_events</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">Hgen1</span> <span class="id" title="var">Hgen2</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">e2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">He2</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hgen2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">contra</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We now tie the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="record">observation_based_equivocation_evidence</span></a></span> notion
to that of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composite_vlsm_comparable_generated_events"><span class="id" title="record">composite_vlsm_comparable_generated_events</span></a></span> by showing that
the existence of two events observable for a validator <tt>v</tt> in a state <tt>s</tt>
<div class="paragraph"> </div>

which are not <span class="inlinecode"><a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a></span> w.r.t. <span class="inlinecode"><span class="id" title="var">happens_before</span></span> relation guarantees
that <tt>v</tt> is <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">equivocating_in_all_traces_ending_in_state</span></a></span> <tt>s</tt>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="evidence_implies_equivocation" class="idref" href="#evidence_implies_equivocation"><span class="id" title="lemma">evidence_implies_equivocation</span></a><br/>
&nbsp;&nbsp;(<a id="s:252" class="idref" href="#s:252"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:253" class="idref" href="#Hs:253"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:252"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:254" class="idref" href="#v:254"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e1:255" class="idref" href="#e1:255"><span class="id" title="binder">e1</span></a> <a id="e2:256" class="idref" href="#e2:256"><span class="id" title="binder">e2</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="He1:257" class="idref" href="#He1:257"><span class="id" title="binder">He1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:255"><span class="id" title="variable">e1</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:252"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:254"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="He2:258" class="idref" href="#He2:258"><span class="id" title="binder">He2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:256"><span class="id" title="variable">e2</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:252"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:254"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="Heqv:259" class="idref" href="#Heqv:259"><span class="id" title="binder">Heqv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:255"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:256"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">equivocating_in_all_traces_ending_in_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:252"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hs:253"><span class="id" title="variable">Hs</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:254"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="keyword">is</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_fn"><span class="id" title="definition">trace_generated_event_fn</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">v</span> <span class="id" title="var">e1</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hgen1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#uncomparable_with_generated_event_equivocation"><span class="id" title="lemma">uncomparable_with_generated_event_equivocation</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">He1</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event_function"><span class="id" title="lemma">trace_generated_event_function</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hgen1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">contra</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The counter-positive of the above says that if there exists a trace
leading to <tt>s</tt> which is not equivocating, then all events observed
for <tt>v</tt> in <tt>s</tt> must be comparable w.r.t. the <span class="inlinecode"><span class="id" title="var">happens_before</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="evidence_implies_equivocation_converse" class="idref" href="#evidence_implies_equivocation_converse"><span class="id" title="lemma">evidence_implies_equivocation_converse</span></a><br/>
&nbsp;&nbsp;(<a id="s:260" class="idref" href="#s:260"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:261" class="idref" href="#Hs:261"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:260"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:262" class="idref" href="#v:262"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hneqv:263" class="idref" href="#Hneqv:263"><span class="id" title="binder">Hneqv</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_some_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_some_traces_ending_in_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:260"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hs:261"><span class="id" title="variable">Hs</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:262"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;(<a id="e1:264" class="idref" href="#e1:264"><span class="id" title="binder">e1</span></a> <a id="e2:265" class="idref" href="#e2:265"><span class="id" title="binder">e2</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="He1:266" class="idref" href="#He1:266"><span class="id" title="binder">He1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:264"><span class="id" title="variable">e1</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:260"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:262"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="He2:267" class="idref" href="#He2:267"><span class="id" title="binder">He2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:265"><span class="id" title="variable">e2</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:260"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:262"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:264"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:265"><span class="id" title="variable">e2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Preamble.html#comparable_dec"><span class="id" title="instance">comparable_dec</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hcmp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#evidence_implies_equivocation"><span class="id" title="lemma">evidence_implies_equivocation</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">He1</span> <span class="id" title="var">He2</span> <span class="id" title="var">Hcmp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hlast</span> <span class="id" title="var">Hneqv</span>]]]]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneqv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heqv</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Hlast</span>). <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab63"></a><h2 class="section">No-equivocation composition constraint guarantees no equivocations</h2>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

If the composition constraint subsumes the no-equivocations constraint,
then all observable events for a validator are comparable w.r.t.
the <span class="inlinecode"><span class="id" title="var">happens_before_fn</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="no_equivocation_constraint_implies_no_equivocations" class="idref" href="#no_equivocation_constraint_implies_no_equivocations"><span class="id" title="lemma">no_equivocation_constraint_implies_no_equivocations</span></a><br/>
&nbsp;&nbsp;(<a id="Hbs:269" class="idref" href="#Hbs:269"><span class="id" title="binder">Hbs</span></a> : <span class="id" title="keyword">forall</span> <a id="i:268" class="idref" href="#i:268"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent_capability"><span class="id" title="class">has_been_sent_capability</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:268"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hno_equiv:270" class="idref" href="#Hno_equiv:270"><span class="id" title="binder">Hno_equiv</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint_subsumption"><span class="id" title="definition">constraint_subsumption</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> (<a class="idref" href="CasperCBC.VLSM.Equivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hbs:269"><span class="id" title="variable">Hbs</span></a>))<br/>
&nbsp;&nbsp;(<a id="s:271" class="idref" href="#s:271"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:272" class="idref" href="#Hs:272"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:271"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:273" class="idref" href="#v:273"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">not_equivocating_in_all_traces_ending_in_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:271"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hs:272"><span class="id" title="variable">Hs</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:273"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="keyword">is</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event_equivocation_implies_message_equivocation"><span class="id" title="lemma">event_equivocation_implies_message_equivocation</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">contra</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> [<span class="id" title="var">pre</span> [<span class="id" title="var">suf</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hinput</span> <span class="id" title="var">contra</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpre</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinput</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hps</span> [<span class="id" title="var">Hpm</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">Hconstr</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_equiv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Equivocation.html#equivocation"><span class="id" title="definition">equivocation</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hconstr'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> (<span class="id" title="keyword">fun</span> <a id="i:275" class="idref" href="#i:275"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:274"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:274"><span class="id" title="variable">i</span></a>) <span class="id" title="var">m</span>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index_listing"><span class="id" title="variable">index_listing</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> (<span class="id" title="keyword">fun</span> <a id="i:277" class="idref" href="#i:277"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:276"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">pre</span>) <span class="id" title="keyword">is</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:276"><span class="id" title="variable">i</span></a>) <span class="id" title="var">m</span>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index_listing"><span class="id" title="variable">index_listing</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqn</span>: <span class="id" title="var">Hexist</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#existsb_forall"><span class="id" title="lemma">existsb_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">Hconstr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hexist</span> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.finite_index"><span class="id" title="variable">finite_index</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_not_been_sent"><span class="id" title="method">has_not_been_sent</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">Bool.negb_true_iff</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hconstr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hconstr'</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#protocol_state_projection"><span class="id" title="lemma">protocol_state_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_oms</span> <span class="id" title="var">Hps</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#proj_pre_loaded_with_all_messages_protocol_prop"><span class="id" title="lemma">proj_pre_loaded_with_all_messages_protocol_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Equivocation.html#proper_sent"><span class="id" title="method">proper_sent</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr'</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">_oms</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Equivocation.html#selected_message_exists_in_all_traces"><span class="id" title="definition">selected_message_exists_in_all_traces</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinit</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hinit</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Xi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <span class="id" title="var">Xi</span> (<span class="id" title="keyword">is</span> <span class="id" title="var">i</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_last_state"><span class="id" title="lemma">finite_trace_projection_last_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpre</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> (<span class="id" title="keyword">is</span> <span class="id" title="var">i</span>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span> <span class="id" title="var">pre</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">tri</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htri</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <span class="id" title="var">Xi</span> <span class="id" title="var">tri</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#proj_pre_loaded_with_all_messages_incl"><span class="id" title="lemma">proj_pre_loaded_with_all_messages_incl</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htri</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htri</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hconstr'</span> (<span class="id" title="keyword">is</span> <span class="id" title="var">i</span>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span> <span class="id" title="var">pre</span>) <span class="id" title="var">Htri</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconstr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hconstr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">itemi</span> [<span class="id" title="var">Hitemi</span> <span class="id" title="var">Houtput</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt_iff"><span class="id" title="lemma">finite_trace_projection_list_alt_iff</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span> <span class="id" title="var">pre</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Halt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Halt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Halt</span> (@<a class="idref" href="CasperCBC.Lib.ListExtras.html#filter_Forall"><span class="id" title="definition">filter_Forall</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#dec_from_projection"><span class="id" title="instance">dec_from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">pre</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Halt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitemi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitemi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hitemi</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">item</span> <span class="id" title="var">Hpr</span>] [<span class="id" title="var">Heq</span> <span class="id" title="var">Hitem</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">item</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">itemi</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#in_list_annotate_forget"><span class="id" title="lemma">in_list_annotate_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As a corollary, if the composition constraint subsumes the
no-equivocations constraint, then for any validator, all observable events
in a protocol state are comparable w.r.t. the <span class="inlinecode"><span class="id" title="var">happens_before_fn</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="no_equivocation_constraint_implies_comparable_events" class="idref" href="#no_equivocation_constraint_implies_comparable_events"><span class="id" title="lemma">no_equivocation_constraint_implies_comparable_events</span></a><br/>
&nbsp;&nbsp;(<a id="Hbs:279" class="idref" href="#Hbs:279"><span class="id" title="binder">Hbs</span></a> : <span class="id" title="keyword">forall</span> <a id="i:278" class="idref" href="#i:278"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.index"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent_capability"><span class="id" title="class">has_been_sent_capability</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:278"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hno_equiv:280" class="idref" href="#Hno_equiv:280"><span class="id" title="binder">Hno_equiv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#constraint_subsumption"><span class="id" title="definition">constraint_subsumption</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> (<a class="idref" href="CasperCBC.VLSM.Equivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hbs:279"><span class="id" title="variable">Hbs</span></a>)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="s:281" class="idref" href="#s:281"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:282" class="idref" href="#Hs:282"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:281"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="e1:283" class="idref" href="#e1:283"><span class="id" title="binder">e1</span></a> <a id="e2:284" class="idref" href="#e2:284"><span class="id" title="binder">e2</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:285" class="idref" href="#v:285"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="He1:286" class="idref" href="#He1:286"><span class="id" title="binder">He1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:283"><span class="id" title="variable">e1</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:281"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:285"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;(<a id="He2:287" class="idref" href="#He2:287"><span class="id" title="binder">He2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:284"><span class="id" title="variable">e2</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:281"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:285"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.Lib.Preamble.html#comparable"><span class="id" title="definition">comparable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e1:283"><span class="id" title="variable">e1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e2:284"><span class="id" title="variable">e2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#evidence_implies_equivocation_converse"><span class="id" title="lemma">evidence_implies_equivocation_converse</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#not_equivocating_in_traces_ending_in_state"><span class="id" title="lemma">not_equivocating_in_traces_ending_in_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#no_equivocation_constraint_implies_no_equivocations"><span class="id" title="lemma">no_equivocation_constraint_implies_no_equivocations</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">Hbs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Since an initial state has no observable events, it follows that it
cannot be equivocating for any validator.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="no_equivocation_in_initial_state" class="idref" href="#no_equivocation_in_initial_state"><span class="id" title="lemma">no_equivocation_in_initial_state</span></a><br/>
&nbsp;&nbsp;(<a id="is:288" class="idref" href="#is:288"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:289" class="idref" href="#Hs:289"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:288"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:290" class="idref" href="#v:290"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hps:291" class="idref" href="#Hps:291"><span class="id" title="binder">Hps</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:288"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hs:289"><span class="id" title="variable">Hs</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocating_in_all_traces_ending_in_state"><span class="id" title="definition">equivocating_in_all_traces_ending_in_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:288"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hps:291"><span class="id" title="variable">Hps</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:290"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">contra</span> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">contra</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">contra</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> [<span class="id" title="var">He</span> <span class="id" title="var">_</span>]]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#no_events_in_initial_state"><span class="id" title="method">no_events_in_initial_state</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">Hs</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heis</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heis</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heis</span> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">He</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="measurable_V:292" class="idref" href="#measurable_V:292"><span class="id" title="binder">measurable_V</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#Measurable"><span class="id" title="class">Measurable</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>}<br/>
&nbsp;&nbsp;{<a id="reachable_threshold:293" class="idref" href="#reachable_threshold:293"><span class="id" title="binder">reachable_threshold</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#ReachableThreshold"><span class="id" title="class">ReachableThreshold</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>}<br/>
&nbsp;&nbsp;(<a id="validators:294" class="idref" href="#validators:294"><span class="id" title="binder">validators</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="validators_nodup:296" class="idref" href="#validators_nodup:296"><span class="id" title="binder">validators_nodup</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:295" class="idref" href="#s:295"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validators:294"><span class="id" title="variable">validators</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:295"><span class="id" title="variable">s</span></a>))<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composed_observable_basic_equivocation" class="idref" href="#composed_observable_basic_equivocation"><span class="id" title="definition">composed_observable_basic_equivocation</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.CBC.Equivocation.html#basic_equivocation"><span class="id" title="class">basic_equivocation</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a><br/>
&nbsp;&nbsp;:= @<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#basic_observable_equivocation"><span class="id" title="definition">basic_observable_equivocation</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.event"><span class="id" title="variable">event</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before"><span class="id" title="variable">happens_before</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.happens_before_dec"><span class="id" title="variable">happens_before_dec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composed_observation_based_equivocation_evidence"><span class="id" title="definition">composed_observation_based_equivocation_evidence</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.measurable_V"><span class="id" title="variable">measurable_V</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.reachable_threshold"><span class="id" title="variable">reachable_threshold</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validators"><span class="id" title="variable">validators</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validators_nodup"><span class="id" title="variable">validators_nodup</span></a>.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">composed_observable_basic_equivocation</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_state_not_heavy" class="idref" href="#initial_state_not_heavy"><span class="id" title="lemma">initial_state_not_heavy</span></a><br/>
&nbsp;&nbsp;(<a id="is:297" class="idref" href="#is:297"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:298" class="idref" href="#Hs:298"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:297"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.CBC.Equivocation.html#not_heavy"><span class="id" title="method">not_heavy</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:297"><span class="id" title="variable">is</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#not_heavy"><span class="id" title="method">not_heavy</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocation_fault"><span class="id" title="method">equivocation_fault</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#equivocating_validators"><span class="id" title="method">equivocating_validators</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.CBC.Equivocation.html#state_validators"><span class="id" title="method">state_validators</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#equivocation_evidence"><span class="id" title="method">equivocation_evidence</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.CBC.Common.html#threshold"><span class="id" title="method">threshold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Reals.RIneq.html#Rge_le"><span class="id" title="lemma">Rge_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validators"><span class="id" title="variable">validators</span></a> <span class="id" title="keyword">is</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#filter_nil"><span class="id" title="lemma">filter_nil</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide_eq_false"><span class="id" title="lemma">bool_decide_eq_false</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">e1</span> [<span class="id" title="var">He1</span> <span class="id" title="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#no_events_in_initial_state"><span class="id" title="method">no_events_in_initial_state</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He1</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_equivocation_in_composition"><span class="id" title="section">observable_equivocation_in_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="unforgeable_messages" class="idref" href="#unforgeable_messages"><span class="id" title="section">unforgeable_messages</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab64"></a><h2 class="section">Unforgeability and observations</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:299" class="idref" href="#message:299"><span class="id" title="binder">message</span></a> <a id="validator:300" class="idref" href="#validator:300"><span class="id" title="binder">validator</span></a> <a id="event:301" class="idref" href="#event:301"><span class="id" title="binder">event</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:302" class="idref" href="#EqDecision0:302"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:302" class="idref" href="#EqDecision0:302"><span class="id" title="binder">event</span></a>}<br/>
&nbsp;&nbsp;{<a id="happens_before:303" class="idref" href="#happens_before:303"><span class="id" title="binder">happens_before</span></a>: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:301"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:301"><span class="id" title="variable">event</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;{<a id="happens_before_dec:304" class="idref" href="#happens_before_dec:304"><span class="id" title="binder">happens_before_dec</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:303"><span class="id" title="variable">happens_before</span></a>}<br/>
&nbsp;&nbsp;{<a id="index:305" class="idref" href="#index:305"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision1:306" class="idref" href="#EqDecision1:306"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:306" class="idref" href="#EqDecision1:306"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="index_listing:307" class="idref" href="#index_listing:307"><span class="id" title="binder">index_listing</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:305"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="finite_index:308" class="idref" href="#finite_index:308"><span class="id" title="binder">finite_index</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Logic.FinFun.html#Listing"><span class="id" title="definition">Listing</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index_listing:307"><span class="id" title="variable">index_listing</span></a>)<br/>
&nbsp;&nbsp;(<a id="IM:309" class="idref" href="#IM:309"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:305"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message:299"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hevidence:311" class="idref" href="#Hevidence:311"><span class="id" title="binder">Hevidence</span></a> : <span class="id" title="keyword">forall</span> (<a id="i:310" class="idref" href="#i:310"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:305"><span class="id" title="variable">index</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observation_based_equivocation_evidence"><span class="id" title="class">observation_based_equivocation_evidence</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:309"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:310"><span class="id" title="variable">i</span></a>)) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:300"><span class="id" title="variable">validator</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#event:301"><span class="id" title="variable">event</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:303"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before_dec:304"><span class="id" title="variable">happens_before_dec</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="i0:312" class="idref" href="#i0:312"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:305"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:313" class="idref" href="#constraint:313"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:309"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:309"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#message:299"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="A:314" class="idref" href="#A:314"><span class="id" title="binder">A</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#validator:300"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index:305"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:315" class="idref" href="#X:315"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:309"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i0:312"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#constraint:313"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="PreX:316" class="idref" href="#PreX:316"><span class="id" title="binder">PreX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#X:315"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;{<a id="Hobservable_messages:317" class="idref" href="#Hobservable_messages:317"><span class="id" title="binder">Hobservable_messages</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#composite_vlsm_observable_messages"><span class="id" title="class">composite_vlsm_observable_messages</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before:303"><span class="id" title="variable">happens_before</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#happens_before_dec:304"><span class="id" title="variable">happens_before_dec</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#index_listing:307"><span class="id" title="variable">index_listing</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#IM:309"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#Hevidence:311"><span class="id" title="variable">Hevidence</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i0:312"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#constraint:313"><span class="id" title="variable">constraint</span></a>}<br/>
.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="unforgeable_messages" class="idref" href="#unforgeable_messages"><span class="id" title="record">unforgeable_messages</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{<br/>
</div>

<div class="doc">
We'll also assume a weak form of <span class="inlinecode"><span class="id" title="var">unforgeability</span></span>: that a machine can only
produce events for its own validator; for other validators it can only
gather information through the messages it receives.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="sent_messages_unforgeability" class="idref" href="#sent_messages_unforgeability"><span class="id" title="projection">sent_messages_unforgeability</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:319" class="idref" href="#s:319"><span class="id" title="binder">s</span></a> <a id="s':320" class="idref" href="#s':320"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:321" class="idref" href="#om:321"><span class="id" title="binder">om</span></a> <a id="om':322" class="idref" href="#om':322"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:323" class="idref" href="#l:323"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:324" class="idref" href="#Ht:324"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#l:323"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:319"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#om:321"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s':320"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#om':322"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:325" class="idref" href="#i:325"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#l:323"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:326" class="idref" href="#v:326"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:327" class="idref" href="#Hv:327"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.A"><span class="id" title="variable">A</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:326"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:325"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s':320"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:325"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:326"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_union"><span class="id" title="definition">set_union</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:319"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:325"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:326"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.index_listing"><span class="id" title="variable">index_listing</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.Hevidence"><span class="id" title="variable">Hevidence</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#om:321"><span class="id" title="variable">om</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:326"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab65"></a><h3 class="section">On stating unforgeability for received messages</h3>


<div class="paragraph"> </div>

We'd like to argue here that it's not actually possible to state a similar
property for received messages. In fact, we argue that it is not possible
to require anything more from the received messages than what we already
know, i.e., that the message was produced in an alternative protocol trace.

<div class="paragraph"> </div>

The reason for the above affirmation is that we can assume that all the
nodes from the current protocol run which don't behave as in the protocol
run generating the message are in fact equivocating and there is a fork of
them behaving such as to guarantee the production of the message.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="Hunforge:329" class="idref" href="#Hunforge:329"><span class="id" title="binder">Hunforge</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages"><span class="id" title="class">unforgeable_messages</span></a>}.<br/>

<br/>
</div>

<div class="doc">
If a new event is <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#trace_generated_event"><span class="id" title="definition">trace_generated_event</span></a></span> for a validator, then it must be
that it's generated by the machine corresponding to that validator.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="trace_generated_index" class="idref" href="#trace_generated_index"><span class="id" title="lemma">trace_generated_index</span></a><br/>
&nbsp;&nbsp;(<a id="is:330" class="idref" href="#is:330"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:331" class="idref" href="#tr:331"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:332" class="idref" href="#Htr:332"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:330"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:331"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:333" class="idref" href="#v:333"><span class="id" title="binder">v</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.validator"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:334" class="idref" href="#e:334"><span class="id" title="binder">e</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.event"><span class="id" title="variable">event</span></a>)<br/>
&nbsp;&nbsp;(<a id="prefix:335" class="idref" href="#prefix:335"><span class="id" title="binder">prefix</span></a> <a id="suffix:336" class="idref" href="#suffix:336"><span class="id" title="binder">suffix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:337" class="idref" href="#item:337"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:338" class="idref" href="#Heq:338"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#tr:331"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:335"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:337"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#suffix:336"><span class="id" title="variable">suffix</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:339" class="idref" href="#i:339"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:337"><span class="id" title="variable">item</span></a>))<br/>
&nbsp;&nbsp;(<a id="s:340" class="idref" href="#s:340"><span class="id" title="binder">s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#prefix:335"><span class="id" title="variable">prefix</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#is:330"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':341" class="idref" href="#s':341"><span class="id" title="binder">s'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:337"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;(<a id="He:342" class="idref" href="#He:342"><span class="id" title="binder">He</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#e:334"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_diff"><span class="id" title="definition">set_diff</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s':341"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:339"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:333"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_union"><span class="id" title="definition">set_union</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#observable_events"><span class="id" title="method">observable_events</span></a> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#s:340"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:339"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:333"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#option_message_observable_events"><span class="id" title="definition">option_message_observable_events</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.index_listing"><span class="id" title="variable">index_listing</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.Hevidence"><span class="id" title="variable">Hevidence</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.constraint"><span class="id" title="variable">constraint</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#item:337"><span class="id" title="variable">item</span></a>) <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:333"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.A"><span class="id" title="variable">A</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#v:333"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#i:339"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.A"><span class="id" title="variable">A</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_to"><span class="id" title="lemma">protocol_transition_to</span></a> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">item</span> <span class="id" title="var">tr</span> <span class="id" title="var">prefix</span> <span class="id" title="var">suffix</span> <span class="id" title="var">Heq</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <span class="id" title="var">Htr</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hpt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#sent_messages_unforgeability"><span class="id" title="method">sent_messages_unforgeability</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <span class="id" title="var">item</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <span class="id" title="var">item</span>) <span class="id" title="var">Hpt</span> <span class="id" title="var">v</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.ListSet.html#set_diff_iff"><span class="id" title="lemma">set_diff_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">He</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">He</span> <span class="id" title="var">Hne</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">Hne</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.ObservableEquivocation.html#unforgeable_messages"><span class="id" title="section">unforgeable_messages</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
